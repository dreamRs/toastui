/*! For license information please see chart.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("HTMLWidgets")):"function"==typeof define&&define.amd?define(["HTMLWidgets"],t):"object"==typeof exports?exports.chart=t(require("HTMLWidgets")):e.chart=t(e.HTMLWidgets)}(self,(function(e){return(()=>{"use strict";var t={8840:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(8081),n=i.n(s),o=i(3645),a=i.n(o)()(n());a.push([e.id,"/*!\n * TOAST UI Chart 4th Edition\n * @version 4.6.1 | Wed Dec 21 2022\n * @author NHN Cloud. FE Development Lab <dl_javascript@nhn.com>\n * @license MIT\n */.toastui-chart-wrapper{height:100%;position:relative;width:100%}.toastui-chart-export-menu{background:#fff;box-sizing:border-box;font-family:Arial,sans-serif;left:0;position:absolute;top:0;user-select:none}.toastui-chart-export-menu-title{box-sizing:inherit;height:34px;margin:0;padding:10px;width:140px}.toastui-chart-export-menu-btn-wrapper{height:76px;width:100%}.toastui-chart-export-menu-btn{background:transparent;border:none;color:inherit;cursor:pointer;float:left;font-family:inherit;height:50%;padding:12px 3px;width:50%}.toastui-chart-export-menu-btn:hover{font-weight:700}.toastui-chart-export-menu-btn:nth-child(3){border-bottom-left-radius:inherit}.toastui-chart-export-menu-btn:nth-child(4){border-bottom-right-radius:inherit}.toastui-chart-tooltip-container{left:0;pointer-events:none;position:absolute;top:0;user-select:none}.toastui-chart-tooltip{box-sizing:border-box;display:flex;flex-direction:column;min-width:150px}.toastui-chart-tooltip-category{border-bottom:1px solid rgba(0,0,0,.1);padding:8px 15px}.toastui-chart-tooltip-series-wrapper{display:flex;flex-direction:column;padding:13px 15px}.toastui-chart-tooltip-series{display:flex;justify-content:space-between;width:100%}.toastui-chart-series-name{align-items:center;display:flex;line-height:10px}.toastui-chart-series-name .toastui-chart-icon,.toastui-chart-tooltip-series .toastui-chart-icon{display:inline-block;height:10px;margin-right:8px;width:10px}.toastui-chart-series-name .toastui-chart-name{white-space:nowrap}.toastui-chart-series-value{margin-left:10px;white-space:nowrap}.toastui-chart-tooltip-series-wrapper .toastui-chart-tooltip-title{padding:8px 0 5px}.toastui-chart-tooltip-series-wrapper .toastui-chart-tooltip-title:first-child{padding-top:0}",""]);const r=a},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(s)for(var r=0;r<this.length;r++){var l=this[r][0];null!=l&&(a[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);s&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},8081:e=>{e.exports=function(e){return e[1]}},3379:e=>{var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var o={},a=[],r=0;r<e.length;r++){var l=e[r],d=s.base?l[0]+s.base:l[0],c=o[d]||0,h="".concat(d," ").concat(c);o[d]=c+1;var u=i(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var m=n(p,s);s.byIndex=r,t.splice(r,0,{identifier:h,updater:m,references:1})}a.push(h)}return a}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var o=s(e=e||[],n=n||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var r=i(o[a]);t[r].references--}for(var l=s(e,n),d=0;d<o.length;d++){var c=i(o[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},569:e=>{var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1695:t=>{t.exports=e}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={id:e,exports:{}};return t[e](o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{s.r(n);var e={};s.r(e),s.d(e,{DEFAULT_LABEL_TEXT:()=>Ee,bubbleLabel:()=>He,label:()=>Ie,labelStyle:()=>We,strokeLabelStyle:()=>ze});var t={};s.r(t),s.d(t,{arc:()=>lt,circle:()=>ot,clipRectArea:()=>st,line:()=>at,pathRect:()=>nt,rect:()=>rt});var i={};s.r(i),s.d(i,{TICK_SIZE:()=>dt,tick:()=>ct});var o={};s.r(o),s.d(o,{dataLabel:()=>Ki,drawBubbleLabel:()=>Ji,getBubbleArrowPoints:()=>Qi});var a={};s.r(a),s.d(a,{SPECTRUM_LEGEND_LABEL_HEIGHT:()=>es,spectrumLegend:()=>ns,spectrumLegendBar:()=>ts,spectrumLegendTooltip:()=>is,spectrumTooltip:()=>os});var r={};s.r(r),s.d(r,{polygon:()=>Es});var l={};s.r(l),s.d(l,{scatterSeries:()=>zs});var d={};s.r(d),s.d(d,{LEGEND_CHECKBOX_SIZE:()=>Hs,LEGEND_ICON_SIZE:()=>Ns,LEGEND_ITEM_MARGIN_X:()=>Is,LEGEND_MARGIN_X:()=>Ys,getLegendItemHeight:()=>Fs,legend:()=>$s});var c={};s.r(c),s.d(c,{areaPoints:()=>sa,linePoints:()=>ia});var h={};s.r(h),s.d(h,{exportMenuButton:()=>na});var u={};s.r(u),s.d(u,{backButton:()=>oa,resetButton:()=>aa});var p={};s.r(p),s.d(p,{sector:()=>ca});var m={};s.r(m),s.d(m,{circleLegend:()=>qa});var g={};s.r(g),s.d(g,{boxPlot:()=>kr});var v={};function f(e){return!b(e)&&!x(e)}function b(e){return void 0===e}function x(e){return null===e}function y(e){return"boolean"==typeof e}function S(e){return"number"==typeof e}function w(e){return"string"==typeof e}function M(e){return S(e)&&isFinite(e)&&Math.floor(e)===e}function O(e){return"object"==typeof e&&null!==e}function A(e){return"function"==typeof e}function k(e,t){for(const i in e)e.hasOwnProperty(i)&&t(e[i],i)}function C(e,t,i){b(t)&&(t=e||0,e=0),i=i||1;const s=[];if(t){const n=i<0?-1:1;for(t*=n;e*n<t;e+=i)s.push(e)}return s}function T(e,t,i){if("number"==typeof i&&e[i]!==t)return!1;for(const i of e)if(i===t)return!0;return!1}function R(e,...t){const i={};return Object.keys(e).forEach((s=>{T(t,s)&&(i[s]=e[s])})),i}function D(e,...t){const i={};return Object.keys(e).forEach((s=>{T(t,s)||(i[s]=e[s])})),i}function j(e,t){const{length:i}=t;if(i)for(let s=0;s<i;s+=1){if(b(e)||x(e))return null;e=e[t[s]]}return e}function B(e,t=0){let i;return function(...s){window.clearTimeout(i),i=window.setTimeout((()=>{e(...s)}),t)}}function L(e,t){const i=Object.assign({},e);return Object.keys(t).forEach((e=>{O(i[e])?Array.isArray(t[e])?i[e]=P(t[e]):i.hasOwnProperty(e)?i[e]=L(i[e],t[e]):i[e]=E(t[e]):i[e]=t[e]})),i}function P(e){return e.map((e=>O(e)?Array.isArray(e)?P(e):E(e):e))}function E(e){const t={},i=Object.keys(e);return i.length?(i.forEach((i=>{O(e[i])?t[i]=Array.isArray(e[i])?P(e[i]):E(e[i]):t[i]=e[i]})),t):e}function W(e,t){return M(e)?Number(e)-Number(t):new Date(e).getTime()-new Date(t).getTime()}function z(e,t){return e-t}function I(e){return e.length?e[0]:void 0}function Y(e){return e.length?e[e.length-1]:void 0}function H(e=[]){return e.some((e=>Number(e)<0))}function N(e){return e.reduce(((e,t)=>e+t),0)}function X(e){return e.every((e=>Number(e)<=0))}function F(e){var t;return null===(t=e)||void 0===t?void 0:t.find((e=>null!==e))}function $(e,t){return S(t)?t:Number((e*(i=t,Number(i.substr(0,i.length-1)))/100).toFixed(2));var i}function G(e){return S(e)?e:0}function V(e){return"auto"===e}s.r(v),s.d(v,{clockHand:()=>Er}),s(1695);const _="It works only when the selectable option is true.",U="The index value is invalid.",q="Source object is observable already",Z=e=>`There's no ${e} data!`;let K=null,J=null;const Q=[];let ee=!1;function te(e){const t=()=>{J!==t&&(ee||!x(J)?(Q.includes(t)&&Q.splice(Q.indexOf(t),1),Q.push(t)):x(J)&&(J=t,e(),J=null,ie()))};return t.deps=[],K=t,K(),K=null,()=>{t.deps.forEach((e=>{const i=e.findIndex((e=>e===t));e.splice(i,1)})),t.deps=[]}}function ie(){if(Q.length){const e=Q.shift();e&&e()}}function se(e){return"object"==typeof e&&e.__toastUIChartOb__}function ne(e,t=e){if(se(t))throw new Error(q);se(e)||Object.defineProperty(e,"__toastUIChartOb__",{enumerable:!1});for(const i in t){if(!t.hasOwnProperty(i))continue;const s=[];let n=t[i];const o=Object.getOwnPropertyDescriptor(t,i),a=o&&o.get,r=o&&o.set;Object.defineProperty(e,i,{configurable:!0,enumerable:!0,get:function(){return K===le?{target:e,key:i,value:n,obs:s}:(ee||!K||s.includes(K)||(s.push(K),K.deps.push(s)),n)},set:function(t){const o=n;r?(r.call(e,t),n=a?a.call(e):e[i]):n=t,o!==n&&re(s)}}),"object"!=typeof e[i]||Array.isArray(e[i])||ne(e[i])}return e}function oe(e,t){if(se(t))throw new Error(q);return ne(e,t)}function ae(e,t){const i=le(e,t);i&&re(i.obs)}function re(e){e.forEach((e=>e()))}function le(e,t){K=le;const i=e[t];return K=null,"object"==typeof i&&i.hasOwnProperty("target")&&i.hasOwnProperty("obs")?i:null}function de(e){return JSON.parse(JSON.stringify(e))}class ce{constructor(e){this.computed={},this.actions={},this.initStoreState=E(e),this.setRootState({})}setRootState(e){ne(e),this.state=e}setComputed(e,t,i=this.computed){const s=e.split("."),n=s.splice(s.length-1,1)[0];!function(e,t,i){let s;const n={};Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:()=>s}),oe(e,n),te((()=>{const n=s;s=i(),n!==s&&(e[t]=s)}))}(function(e,t){const{length:i}=t;if(i)for(let s=0;s<i;s+=1)b(e[t[s]])&&(e[t[s]]={}),e=e[t[s]];return e}(i,s),n,t.bind(null,this.state,this.computed))}setWatch(e,t){return function(e,t,i){const s=t.split("."),n=s.splice(s.length-1,1)[0],o=j(e,s);if(!o)return null;const a=le(o,n);if(!a)return null;const r=()=>{i(o[n])};return a.obs.push(r),()=>{const e=a.obs.findIndex((e=>e===r));e>-1&&a.obs.splice(e,1)}}(this,e,t)}setAction(e,t){this.actions[e]=t}dispatch(e,t,i){i?(ee=!0,(()=>{this.actions[e].call(this,this,t)})(),ee=!1,ie()):this.actions[e].call(this,this,t)}observe(e){return te(e.bind(this,this.state,this.computed))}observable(e){return ne(e)}notifyByPath(e){!function(e,t){const i=t.split("."),s=i.splice(i.length-1,1)[0],n=j(e,i);n&&ae(n,s)}(this,e)}notify(e,t){ae(e,t)}setModule(e,t){if(t||(e=(t=e).name),t.state){const e="function"==typeof t.state?t.state(this.initStoreState):t.state;he(this.state,e)}t.computed&&k(t.computed,((e,t)=>{this.setComputed(t,e)})),t.watch&&k(t.watch,((e,t)=>{this.setWatch(t,e)})),t.action&&k(t.action,((e,t)=>{this.setAction(t,e)})),t.observe&&k(t.observe,(e=>{this.observe(e)}))}setValue(e,t,i){he(e,{[t]:i})}}function he(e,t){const i={};for(const s in t)t.hasOwnProperty(s)&&(b(e[s])?i[s]=t[s]:"object"!=typeof t[s]||Array.isArray(t[s])?e[s]=t[s]:he(e[s],t[s]));Object.keys(i).length&&oe(e,i)}function ue(e,{width:t,height:i}){return{width:0===t?e.offsetWidth:t,height:0===i?e.offsetHeight:i}}const pe={name:"root",state:({options:e})=>{var t,i,s,n,o,a,r,l;return{chart:Object.assign(Object.assign({},e.chart),{width:G(null===(i=null===(t=e)||void 0===t?void 0:t.chart)||void 0===i?void 0:i.width),height:G(null===(n=null===(s=e)||void 0===s?void 0:s.chart)||void 0===n?void 0:n.height)}),usingContainerSize:{width:V(null===(a=null===(o=e)||void 0===o?void 0:o.chart)||void 0===a?void 0:a.width),height:V(null===(l=null===(r=e)||void 0===r?void 0:r.chart)||void 0===l?void 0:l.height)},container:{}}},action:{setChartSize({state:e},t){e.chart.width=t.width,e.chart.height=t.height,this.notify(e,"chart")},initChartSize({state:e},t){const{width:i,height:s}=e.chart;0!==i&&0!==s||(t.parentNode?this.dispatch("setChartSize",ue(t,{width:i,height:s})):setTimeout((()=>{this.dispatch("setChartSize",ue(t,{width:i,height:s}))}),0))},setUsingContainerSize({state:e},{width:t,height:i}){e.usingContainerSize.width=t,e.usingContainerSize.height=i}}},me=pe,ge=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,ve=/rgb\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)/,fe=/rgba\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3}), ?(1|0?\.?\d+)\)/,be={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function xe(e,t){if(e.length>t)return e;let i=e;return C(0,t-1).forEach((e=>{i="0"+i})),i.slice(-1*t)}function ye(e){return ge.test(e)}function Se(e){return be[e.toLowerCase()]||e}function we(e){const t=Se(e);return!!ye(t)&&t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,i,s)=>"#"+t+t+i+i+s+s)).substring(1).match(/.{2}/g).map((e=>parseInt(e,16)))}function Me(e,t){const i=Se(e);if(ye(i)){const[e,s,n]=we(i);return`rgba(${e}, ${s}, ${n}, ${t})`}if(ve.test(e)){const i=ve.exec(e);return`rgba(${i[1]}, ${i[2]}, ${i[3]}, ${t})`}if(fe.test(e)){const i=fe.exec(e);return`rgba(${i[1]}, ${i[2]}, ${i[3]}, ${t})`}return e}function Oe(e){if(fe.test(e)){const t=fe.exec(e);return Number(t[4])}return 1}function Ae(e,t=1){return Me(e,Oe(e)*t)}function ke(e,t){return e.reduce(((e,i)=>w(i)?Object.assign(Object.assign({},e),t[i]):Object.assign(Object.assign({},e),i)),{})}function Ce(e,t){return`translate(${e}px,${t}px)`}function Te(e){const{fontFamily:t,fontSize:i,fontWeight:s}=e;return`${s} ${i}px ${t}`}function Re(e){const{color:t,fontSize:i,fontFamily:s,fontWeight:n}=e;return`font-weight: ${n}; font-family: ${s}; font-size: ${i}px; color: ${t};`}function De(e){return Te(R(e,"fontFamily","fontWeight","fontSize"))}function je(e,t){e.setLineDash&&e.setLineDash(t)}function Be(e){return Math.floor(.15*e)}function Le(e,t){e.fillStyle=t,e.fill()}function Pe(e,t){const{lineWidth:i,strokeStyle:s}=t;s&&(e.strokeStyle=s),i&&(e.lineWidth=i),e.lineWidth&&Oe(String(e.strokeStyle))&&e.stroke()}const Ee="normal 11px Arial",We={default:{font:Ee,fillStyle:"#333333",textAlign:"left",textBaseline:"middle"},title:{textBaseline:"top"},axisTitle:{textBaseline:"top"},rectLabel:{font:Ee,fillStyle:"rgba(0, 0, 0, 0.3)",textAlign:"center",textBaseline:"middle"}},ze={none:{lineWidth:1,strokeStyle:"rgba(255, 255, 255, 0)"},stroke:{lineWidth:4,strokeStyle:"rgba(255, 255, 255, 0.5)"}};function Ie(e,t){var i,s,n,o,a,r,l,d;const{x:c,y:h,text:u,style:p,stroke:m,opacity:g,radian:v,rotationPosition:f}=t;if(p){const t=ke(p,We);Object.keys(t).forEach((i=>{e[i]="fillStyle"===i&&S(g)?Ae(t[i],g):t[i]}))}if(e.save(),v&&(e.translate(null!=(s=null===(i=f)||void 0===i?void 0:i.x)?s:c,null!=(o=null===(n=f)||void 0===n?void 0:n.y)?o:h),e.rotate(v),e.translate(-(null!=(r=null===(a=f)||void 0===a?void 0:a.x)?r:c),-(null!=(d=null===(l=f)||void 0===l?void 0:l.y)?d:h))),m){const t=ke(m,ze),i=Object.keys(t);i.forEach((i=>{e[i]="strokeStyle"===i&&S(g)?Ae(t[i],g):t[i]})),i.length&&e.strokeText(u,c,h)}e.fillText(u,c,h),e.restore()}const Ye={shadow:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetY:2,shadowBlur:4}};function He(e,t){var i,s,n,o;const{radian:a=0,rotationPosition:r,bubble:{x:l,y:d,width:c,height:h,radius:u=0,lineWidth:p=1,direction:m,points:g=[],fill:v="#fff",strokeStyle:f="rgba(0, 0, 0, 0)",style:b=null}}=t;if(c>0&&h>0&&function(e,t){const{x:i,y:s,width:n,height:o,style:a,radius:r=0,strokeStyle:l,fill:d,lineWidth:c=1,points:h=[],direction:u="",radian:p,rotationPosition:m}=t,g=i+n,v=s+o;if(e.beginPath(),e.save(),p&&m&&(e.translate(m.x,m.y),e.rotate(p),e.translate(-m.x,-m.y)),e.moveTo(i+r,s),"top"===u&&Ne(e,h),e.lineTo(g-r,s),e.quadraticCurveTo(g,s,g,s+r),"right"===u&&Ne(e,h),e.lineTo(g,s+o-r),e.quadraticCurveTo(g,v,g-r,v),"bottom"===u&&Ne(e,h),e.lineTo(i+r,v),e.quadraticCurveTo(i,v,i,v-r),"left"===u&&Ne(e,h),e.lineTo(i,s+r),e.quadraticCurveTo(i,s,i+r,s),a){const t=ke(a,Ye);Object.keys(t).forEach((i=>{e[i]=t[i]}))}d&&Le(e,d),l&&Pe(e,{strokeStyle:l,lineWidth:c}),e.restore()}(e,{x:l,y:d,radius:u,width:c,height:h,style:b,fill:v,strokeStyle:f,lineWidth:p,direction:m,points:g,radian:a,rotationPosition:{x:(s=null===(i=r)||void 0===i?void 0:i.x,null!=s?s:l),y:(o=null===(n=r)||void 0===n?void 0:n.y,null!=o?o:d)}}),t.label.text){const{x:i,y:s,text:n,strokeStyle:o="rgba(0, 0, 0, 0)",style:l}=t.label;e.shadowColor="rgba(0, 0, 0, 0)",Ie(e,{type:"label",x:i,y:s,text:n,style:l,stroke:[{strokeStyle:o}],radian:a,rotationPosition:r})}}function Ne(e,t){t.length&&(e.lineTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y))}const Xe=180,Fe=360,$e=-90,Ge=90;function Ve(e,t){return Object.assign({anchor:e},R(t,"x","y","radius","degree","drawingStartAngle"))}function _e(e,t=$e){let i=0;return e%Fe==0?i=Math.PI/Xe*t:e>=0&&(i=Math.PI/Xe*(e+t)),i}function Ue(e){const{anchor:t,x:i,y:s,radius:{inner:n,outer:o},degree:{start:a,end:r},drawingStartAngle:l=$e}=e;return qe(i,s,"outer"===t?o:(o+n)/2,_e(a+(r-a)/2,l))}function qe(e,t,i,s){return{x:Math.round(e+i*Math.cos(s)),y:Math.round(t+i*Math.sin(s))}}function Ze(e,t,i,s){return e?t<=s&&i>=s:t>=s&&i<=s}function Ke({width:e,height:t},i=!1,s=0,n=0){let o;return o=i?Math.min(e/2,t)-n:e>t?t/2-n:e/2-s,Math.max(o,10)}function Je(e,t,i=!0){const{totalAngle:s=Fe,degree:{start:n,end:o},drawingStartAngle:a=$e}=e;let r="center";if("outer"!==t)return r;const l=_e(0,a),d=_e(s/2,a),c=function(e,t,i,s){return _e(s?(t+e)/2:e,i)}(n,o,a,i);return a>=$e&&a<Ge?l<c&&d>c?r="left":d<c&&(r="right"):l<c&&d>c?r="right":d<c&&(r="left"),r}function Qe(e,t){return e.reduce(((i,s,n)=>(n&&i.push({inner:s+t,outer:e[n-1]-t}),n===e.length-1&&i.push({inner:t,outer:s-t}),i)),[])}function et(e){return e<0?Fe+e%Fe:e>Fe?e%Fe:e}const tt={default:{strokeStyle:"#ffffff",lineWidth:2},plot:{lineWidth:1,strokeStyle:"rgba(0, 0, 0, 0.05)"}},it={shadow:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetX:2,shadowOffsetY:2,shadowBlur:6}};function st(e,t){const{x:i,y:s,width:n,height:o}=t;e.beginPath(),e.rect(i,s,n,o),e.clip()}function nt(e,t){const{x:i,y:s,width:n,height:o,radius:a=0,stroke:r="black",fill:l="",lineWidth:d=1}=t;e.beginPath(),e.moveTo(i+a,s),e.lineTo(i+n-a,s),e.quadraticCurveTo(i+n,s,i+n,s+a),e.lineTo(i+n,s+o-a),e.quadraticCurveTo(i+n,s+o,i+n-a,s+o),e.lineTo(i+a,s+o),e.quadraticCurveTo(i,s+o,i,s+o-a),e.lineTo(i,s+a),e.quadraticCurveTo(i,s,i+a,s),e.closePath(),l&&Le(e,l),Pe(e,{lineWidth:d,strokeStyle:r})}function ot(e,t){const{x:i,y:s,style:n,radius:o,color:a,angle:r={start:0,end:2*Math.PI},borderWidth:l,borderColor:d}=t;if(e.beginPath(),n){const t=ke(n,tt);Object.keys(t).forEach((i=>{e[i]=t[i]}))}e.arc(i,s,o,r.start,r.end,!0),Pe(e,{lineWidth:l,strokeStyle:d}),Le(e,a),e.closePath()}function at(e,t){const{x:i,y:s,x2:n,y2:o,strokeStyle:a,lineWidth:r,dashSegments:l}=t;e.beginPath(),l&&je(e,l),e.moveTo(i,s),e.lineTo(n,o),Pe(e,{strokeStyle:a,lineWidth:r}),e.closePath()}function rt(e,t){const{x:i,y:s,width:n,height:o,style:a,thickness:r=0,color:l,borderColor:d="#ffffff"}=t;if(e.beginPath(),a){const t=ke(a,it);Object.keys(t).forEach((i=>{e[i]=t[i]}))}r&&(e.fillStyle=d,e.fillRect(i-r,s-r,n+2*r,o+2*r),e.shadowColor="rgba(0, 0, 0, 0)"),e.rect(i,s,n,o),Le(e,l)}function lt(e,t){const{x:i,y:s,angle:{start:n,end:o},borderWidth:a,borderColor:r,drawingStartAngle:l,radius:d,clockwise:c=!0}=t;e.beginPath();const h=_e(n,l),u=_e(o,l);e.arc(i,s,d,h,u,!c),Pe(e,{lineWidth:a,strokeStyle:r}),e.closePath()}const dt=5;function ct(e,t){const{x:i,y:s,isYAxis:n,tickSize:o=dt,strokeStyle:a,lineWidth:r}=t,l={type:"line",x:i,y:s,x2:i,y2:s,strokeStyle:a,lineWidth:r};n?l.x2+=o:l.y2+=o,at(e,l)}const ht=document.createElement("canvas").getContext("2d");function ut(e,t=Ee){return ht.font=t,Math.ceil(ht.measureText(e).width)}function pt(e,t=Ee){ht.font=t;const{actualBoundingBoxAscent:i,actualBoundingBoxDescent:s}=ht.measureText(e);return S(i)&&S(s)?Math.ceil(Math.abs(i)+Math.abs(s))+1:mt(t)}function mt(e=Ee){const t=e.match(/\d+(?=px)/);return parseInt(String(1.2*Number(t)),10)}function gt(e){return Mt(2*dt+e/2)}function vt(...e){const t=e.map((e=>function(e){var t,i;return null!=(i=null===(t=String(e).split(".")[1])||void 0===t?void 0:t.length)?i:0}(e))),i=Math.max(...t);return Math.pow(10,i)}function ft(e,t){const i=vt(e,t);return(e*i+t*i)/i}function bt(e,t){const i=vt(e,t);return e*i*(t*i)/(i*i)}function xt(e,t){const i=vt(e,t);return e*i/(t*i)}function yt(e){const t=e.slice();return t.unshift(0),t.reduce(((e,t)=>ft(parseFloat(String(e)),parseFloat(String(t)))))}function St(e,t,i){const s=vt(t);return C(Math.round(e.min*s),Math.round(e.max*s)+1,t*s).map((e=>String(i?new Date(e):e/s)))}function wt(e,t,i=0,s=0){let n=[];return t>0&&(n=C(0,t).map((s=>(0===s?0:s/(t-1))*e+i))),s&&n.push(s),n}function Mt(e,t=1){const i=t/2;return t%2?(M(e)?e:Math.round(e-i))+i:Math.round(e)}function Ot(e,t,i){const{x:s,y:n}=e,{x:o,y:a}=t,{x:r,y:l}=i,d=Ct(i,t),c=Ct(t,e),h=.333*c/(c+d)||0,u=.333*d/(c+d)||0;return{prev:{x:o-h*(r-s),y:a-h*(l-n)},next:{x:o+u*(r-s),y:a+u*(l-n)}}}function At(e){for(let t=0,i=e.length,s=e[0];t<i;t+=1){const n=e[t];if(x(n)){s=e[t+1];continue}const o=e[Math.min(t+1,i-1)%i];s&&o&&(n.controlPoint=Ot(s,n,o)),s=n}}function kt(e,{min:t,max:i}){return i===t?0:(e-t)/(i-t)}function Ct(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Tt(e){return ut(e.reduce(((e,t)=>e.length>t.length?e:t),""))}function Rt(e,t,i,s){const{pointOnColumn:n,tickDistance:o,labelRange:a}=e;let r;return r=a?kt(w(i)?Number(new Date(i)):Number(i),a)*t:o*s+(n?o/2:0),r}function Dt(e,t){return e.reduce(((e,i)=>[...e,i[t]]),[])}class jt{constructor({store:e,eventBus:t}){this.name="Component",this.type="component",this.rect={x:0,y:0,height:0,width:0},this.isShow=!0,this.store=e,this.eventBus=t}update(e){this.drawModels&&(Array.isArray(this.models)?this.updateModels(this.drawModels,this.models,e):Object.keys(this.models).forEach((t=>{const i=this.drawModels[t],s=this.models[t];this.updateModels(i,s,e)})))}initUpdate(e){this.update(e)}updateModels(e,t,i){e.forEach(((e,s)=>{const n=t[s];Object.keys(e).forEach((t=>{var s;if(e&&n&&"_"!==t[0])if(S(e[t]))e[t]=e[t]+(n[t]-e[t])*i;else if("points"===t){const o=this.getCurrentModelToMatchTargetModel(e[t],e[t],n[t]).map(((e,s)=>{const o=n[t][s];if(e&&o){const{x:t,y:s}=e,{x:n,y:a}=o;return Object.assign(Object.assign({},o),{x:t+(n-t)*i,y:s+(a-s)*i})}return o}));(null===(s=this.store.state.options.series)||void 0===s?void 0:s.spline)&&At(o),e[t]=o}else e[t]=n[t]}))}))}sync(){this.drawModels&&(Array.isArray(this.models)?this.syncModels(this.drawModels,this.models):Object.keys(this.models).length?Object.keys(this.models).forEach((e=>{const t=this.drawModels[e],i=this.models[e];this.syncModels(t,i,e)})):this.drawModels=this.models)}getCurrentModelToMatchTargetModel(e,t,i){var s;if(!e||!t)return[...i];if(null===(s=F(i))||void 0===s?void 0:s.name){const s=[...new Set(e.map((({name:e})=>e)))],n=[...new Set(i.map((({name:e})=>e)))];if(!function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i]!==t[i])return!1;return!0}(s,n))return this.getCurrentModelWithDifferentModel(e,t,i,s,n)}const n=t.length,o=i.length;return n<o?[...t,...i.slice(n,o)]:n>o?t.slice(0,o):e}getCurrentModelWithDifferentModel(e,t,i,s,n){const o=t.length,a=i.length;if(o>a){const t=e.filter((({name:e})=>T(n,e)));return t.length!==i.length?i:t}if(o<a){const t=i.reduce(((e,t,i)=>T(s,t.name)?e:{models:[...e.models,t],modelIdx:[...e.modelIdx,i]}),{models:[],modelIdx:[]});if(e.length+t.models.length===a){const i=[...e];return t.models.forEach(((e,s)=>{i.splice(t.modelIdx[s],0,e)})),i}return i}return e}syncModels(e,t,i){const s=i?this.drawModels[i]:this.drawModels,n=this.getCurrentModelToMatchTargetModel(s,e,t);i?this.drawModels[i]=n:this.drawModels=n}getSelectableOption(e){var t,i,s;return null!=(s=null===(i=null===(t=e)||void 0===t?void 0:t.series)||void 0===i?void 0:i.selectable)&&s}renderDataLabels(e,t){setTimeout((()=>{this.eventBus.emit("renderDataLabels",{data:e,name:null!=t?t:this.name})}),0)}draw(e){const t=this.drawModels?this.drawModels:this.models;Array.isArray(t)?e.paintForEach(t):t&&Object.keys(t).forEach((i=>{e.paintForEach(t[i])}))}}var Bt;!function(e){e.X="xAxis",e.Y="yAxis",e.SECONDARY_Y="secondaryYAxis",e.CIRCULAR="circularAxis",e.VERTICAL="verticalAxis"}(Bt||(Bt={}));class Lt extends jt{constructor(){super(...arguments),this.models={label:[],tick:[],axisLine:[]},this.axisSize=0}initialize({name:e}){this.type="axis",this.name=e,this.yAxisComponent=T([Bt.Y,Bt.SECONDARY_Y],e)}render({layout:e,axes:t,theme:i,scale:s}){var n;if(t.centerYAxis||!t[this.name])return;this.theme=mi(i,this.name),this.rect=e[this.name],this.axisSize=this.yAxisComponent?this.rect.height:this.rect.width;const{viewLabels:o}=t[this.name],{offsetKey:a,anchorKey:r}={offsetKey:(l=this.yAxisComponent)?"y":"x",anchorKey:l?"x":"y"};var l;const d=this.makeRenderOptions(t[this.name],null===(n=s)||void 0===n?void 0:n[this.name]);this.hasOnlyAxisLine()||(this.models.label=this.renderLabelModels(o,a,r,d),this.models.tick=this.renderTickModels(a,r,d)),this.models.axisLine=[this.renderAxisLineModel()],this.drawModels||(this.drawModels={tick:[],label:[],axisLine:this.models.axisLine},["tick","label"].forEach((e=>{this.drawModels[e]=this.models[e].map((e=>{const t=Object.assign({},e);return this.yAxisComponent?t.y=0:t.x=0,t}))})))}renderAxisLineModel(){const e=Mt(0);let t;const{color:i,width:s}=this.theme;if(this.yAxisComponent){const n=this.getYAxisXPoint();t={type:"line",x:n,y:e,x2:n,y2:Mt(this.axisSize),strokeStyle:i,lineWidth:s}}else t={type:"line",x:e,y:e,x2:Mt(this.axisSize),y2:e,strokeStyle:i,lineWidth:s};return t}renderTickModels(e,t,i){const s=this.yAxisComponent?this.getYAxisXPoint():Mt(0),{tickInterval:n,relativePositions:o}=i,a=T([Bt.SECONDARY_Y,Bt.X],this.name)?dt:-dt;return o.reduce(((i,o,r)=>r%n?i:[...i,{type:"tick",isYAxis:this.yAxisComponent,tickSize:a,[e]:Mt(o),[t]:s,strokeStyle:this.theme.color,lineWidth:this.theme.width}]),[])}renderLabelModels(e,t,i,s){const{needRotateLabel:n,radian:o,offsetY:a}=s,r=this.theme.label,l=Te(r),d=["default",{textAlign:this.getLabelTextAlign(n),font:l,fillStyle:r.color}],c=this.yAxisComponent?this.getYAxisAnchorPoint():a;return e.map((({text:e,offsetPos:s})=>({type:"label",text:e,style:d,radian:o,[t]:Mt(s),[i]:c})))}makeRenderOptions(e,t){var i,s,n,o;const{tickCount:a,tickInterval:r}=e,l=null!=(s=null===(i=t)||void 0===i?void 0:i.sizeRatio)?s:1,d=null!=(o=null===(n=t)||void 0===n?void 0:n.positionRatio)?o:0,c=wt(this.axisSize*l,a,this.axisSize*d);if(this.yAxisComponent)return{relativePositions:c,tickInterval:r};const{needRotateLabel:h,radian:u,offsetY:p}=e;return{relativePositions:c,tickInterval:r,needRotateLabel:h,radian:u,offsetY:p}}getYAxisAnchorPoint(){return this.isRightSide()?Mt(this.rect.width):Mt(0)}getLabelTextAlign(e){const t=this.isRightSide()?"right":"left",i=e?"left":"center";return this.yAxisComponent?t:i}isRightSide(){return this.name===Bt.SECONDARY_Y}getYAxisXPoint(){return this.isRightSide()?Mt(0):Mt(this.rect.width)}hasOnlyAxisLine(){return this.yAxisComponent&&!this.rect.width||this.name===Bt.X&&!this.rect.height}}const Pt=Math.PI/180,Et=[0,25,45,65,85,90];function Wt(e,t){return Math.cos(e*Pt)*t}function zt(e,t){return Math.sin(e*Pt)*t}function It(e,t,i){return 2*(zt(e,t/2)+zt(90-e,i/2))}const Yt=/[\\]*YYYY|[\\]*YY|[\\]*MMMM|[\\]*MMM|[\\]*MM|[\\]*M|[\\]*DD|[\\]*D|[\\]*HH|[\\]*H|[\\]*mm|[\\]*m|[\\]*ss|[\\]*s|[\\]*A/gi,Ht=["Invalid month","January","February","March","April","May","Jun","Jul","August","September","October","November","December"],Nt=[0,31,28,31,30,31,30,31,31,30,31,30,31],Xt={M:e=>Number(e.month),MM:e=>{const t=e.month;return Number(t)<10?`0${t}`:t},MMM:e=>Ht[Number(e.month)].substr(0,3),MMMM:e=>Ht[Number(e.month)],D:e=>Number(e.date),d:e=>Xt.D(e),DD:e=>{const t=e.date;return Number(t)<10?`0${t}`:t},dd:e=>Xt.DD(e),YY:e=>Number(e.year)%100,yy:e=>Xt.YY(e),YYYY:e=>{let t="20";const i=e.year;return i>69&&i<100&&(t="19"),Number(i)<100?t+String(i):i},yyyy:e=>Xt.YYYY(e),A:e=>e.meridiem,a:e=>e.meridiem,hh:e=>{const t=e.hour;return Number(t)<10?"0"+t:t},HH:e=>Xt.hh(e),h:e=>String(Number(e.hour)),H:e=>Xt.h(e),m:e=>String(Number(e.minute)),mm:e=>{const t=e.minute;return Number(t)<10?`0${t}`:t},s:e=>String(Number(e.second)),ss:e=>{const t=e.second;return Number(t)<10?`0${t}`:t}};function Ft(e,t,i){const s=i-t,n=Math.abs(s);return s>0&&n!==Fe&&!e||s<0&&n!==Fe&&e?Fe-n:n}function $t(e,t,i){return Ft(e,t,i)<=Xe&&(function(e,t,i){return e&&(t>=$e&&i<=Ge||t>=Ge&&i<=Xe)}(e,t,i)||function(e,t,i){return!e&&(t>=-180&&i<=Ge||t<=Ge&&i>=$e)}(e,t,i))}function Gt(e,t){return t?1*e:.1*e}function Vt(e,t=""){return e.filter((({data:e})=>!x(e))).map((({data:e,name:i,color:s,rootParentName:n})=>({label:i,color:s,value:e,category:t,rootParentName:n,templateType:"pie"})))}function _t(e){var t;return!(!e.pie||!Array.isArray(null===(t=e.pie[0])||void 0===t?void 0:t.data))}function Ut(e){return e.pie.map((({name:e})=>e))}function qt(e){const t=e.toFixed(2),i=parseFloat(t);return`${t.length>5?parseFloat(t.substr(0,4)):String(i)}%`}function Zt(e,t){var i,s,n;return!!t.pie&&"outer"===(null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s.dataLabels)||void 0===n?void 0:n.anchor)}function Kt(e,t){var i,s,n,o;return!!t.pie&&"outer"===(null===(o=null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s.dataLabels)||void 0===n?void 0:n.pieSeriesName)||void 0===o?void 0:o.anchor)}var Jt;function Qt(e=!0,t=!1){let i="center";return t&&(i=e?"right":"left"),i}function ei({labels:e,intervalData:t,circularAxisLabelMargin:i,circularAxisLabelFont:s,defaultAxisData:n,radiusData:o}){const{maxLabelWidth:a,maxLabelHeight:r}=Mi(e,i,s),{totalAngle:l,clockwise:d,axisSize:c,centerX:h,centerY:u,startAngle:p,endAngle:m,drawingStartAngle:g}=n,{tickInterval:v,labelInterval:f}=t,{innerRadius:b,outerRadius:x}=o;return{axisSize:c,centerX:h,centerY:u,label:{labels:e,interval:f,margin:i,maxWidth:a,maxHeight:r},radius:{inner:b,outer:x},angle:{start:p,end:m,total:l,central:l/(e.length+(l<Fe?-1:0)),drawingStart:g},tickInterval:v,clockwise:d}}function ti(e,t,i){var s,n,o;const a=null!=(o=null===(n=null===(s=e[i])||void 0===s?void 0:s.label)||void 0===n?void 0:n.formatter)?o:e=>e;return t.map(((e,s)=>a(e,{index:s,labels:t,axisName:i})))}!function(e){e.CIRCULAR="circularAxis",e.VERTICAL="verticalAxis"}(Jt||(Jt={}));const ii={name:"radialAxes",state:()=>({radialAxes:{}}),action:{setRadialAxesData({state:e}){var t,i;const{series:s,layout:n,scale:o}=e,a=e.categories,{plot:r}=n,l=ni({series:s,categories:a}),d=e.options,c=e.theme,h=Te(c.circularAxis.label),u=Te(c.verticalAxis.label),{verticalAxisLabelMargin:p,circularAxisLabelMargin:m}=function(e,t){var i,s,n,o,a,r,l,d;return{verticalAxisLabelMargin:(o=null===(n=null===(s=null===(i=t)||void 0===i?void 0:i.verticalAxis)||void 0===s?void 0:s.label)||void 0===n?void 0:n.margin,null!=o?o:e?5:0),circularAxisLabelMargin:(d=null===(l=null===(r=null===(a=t)||void 0===a?void 0:a.circularAxis)||void 0===r?void 0:r.label)||void 0===l?void 0:l.margin,null!=d?d:25)}}(l,d),{radialAxisLabels:g,yAxisLabels:v}=function(e,t,i,s){const n=e?Jt.CIRCULAR:Jt.VERTICAL,{limit:o,stepSize:a}=s[n],r=ti(t,St(o,a),n),l=ti(t,i,e?Jt.VERTICAL:Jt.CIRCULAR);return{radialAxisLabels:e?r:l,yAxisLabels:e?l:r}}(l,d,a,o),{maxLabelWidth:f,maxLabelHeight:b}=Mi(g,m,h),x=ki(d,r,f,b+m,l),{axisSize:y}=x,S=l?function(e,t,i=1){var s,n,o,a;const r=$(e,null!==(n=null===(s=t)||void 0===s?void 0:s.inner)&&void 0!==n?n:0),l=$(e,null!==(a=null===(o=t)||void 0===o?void 0:o.outer)&&void 0!==a?a:e);return{radiusRanges:wt(l-r,i,r).splice(0===r?1:0,i).reverse(),innerRadius:r,outerRadius:l}}(y,null===(i=null===(t=d)||void 0===t?void 0:t.series)||void 0===i?void 0:i.radiusRange,v.length+1):{radiusRanges:wt(y,v.length),innerRadius:0,outerRadius:y},w=function({labels:e,pointOnColumn:t,intervalData:i,isLabelOnVerticalAxis:s,verticalAxisLabelMargin:n,verticalAxisLabelFont:o,defaultAxisData:a,radiusData:r}){const{clockwise:l,axisSize:d,centerX:c,centerY:h,startAngle:u,endAngle:p}=a,{radiusRanges:m,innerRadius:g,outerRadius:v}=r,{labelInterval:f}=i,{maxLabelWidth:b,maxLabelHeight:x}=Mi(e,n,o);return{axisSize:d,centerX:c,centerY:h,label:{labels:e,interval:f,margin:n,maxWidth:b,maxHeight:x,align:Qt(l,s)},radius:{inner:g,outer:v,ranges:m},angle:{start:u,end:p},tickDistance:(v-g)/e.length,pointOnColumn:t}}({labels:v,pointOnColumn:l,isLabelOnVerticalAxis:l,intervalData:Ai(l,{axis:d.verticalAxis,categories:a,layout:n}),verticalAxisLabelMargin:p,verticalAxisLabelFont:u,defaultAxisData:x,radiusData:S});e.radialAxes={circularAxis:ei({labels:g,intervalData:Ai(!0,{axis:d.circularAxis,categories:a,layout:n}),defaultAxisData:x,circularAxisLabelMargin:m,circularAxisLabelFont:h,radiusData:S}),verticalAxis:w}}},observe:{updateRadialAxes(){this.dispatch("setRadialAxesData")}}},si=ii;function ni({series:e,options:t,categories:i}){var s,n;return!!e.bar||!!e.radialBar||!!e.gauge&&Array.isArray(i)&&!i.length||!!e.bullet&&!(null===(n=null===(s=t)||void 0===s?void 0:s.series)||void 0===n?void 0:n.vertical)}function oi(e){return!!(e.column||e.bar||e.boxPlot||e.bullet)}function ai(e){return!!e.radar||!!e.radialBar||!!e.gauge}function ri(e,t){return ai(t)?function(e){return{valueAxisName:e?"circularAxis":"verticalAxis",labelAxisName:e?"verticalAxis":"circularAxis"}}(e):{valueAxisName:e?"xAxis":"yAxis",labelAxisName:e?"yAxis":"xAxis"}}function li(e){return{valueSizeKey:e?"width":"height",labelSizeKey:e?"height":"width"}}function di(e){const t=e.map((e=>Number(e)));return{min:Math.min(...t),max:Math.max(...t)}}function ci(e){var t;return Array.isArray(null===(t=e)||void 0===t?void 0:t.yAxis)&&2===e.yAxis.length}function hi(e){var t;const i=ci(e);return{yAxis:i?e.yAxis[0]:null===(t=e)||void 0===t?void 0:t.yAxis,secondaryYAxis:i?e.yAxis[1]:null}}function ui(e,t,i){var s;const{secondaryYAxis:n}=hi(e);return(null===(s=n)||void 0===s?void 0:s.chartType)===t?"secondaryYAxis":i}function pi(e,t){if(T([Bt.X,Bt.CIRCULAR,Bt.VERTICAL],t))return[t];const i=e,{yAxis:s,secondaryYAxis:n}=hi(i);return n?[s.chartType,n.chartType].map(((e,s)=>e?ui(i,e,t):["yAxis","secondaryYAxis"][s])):[t]}function mi(e,t){const{xAxis:i,yAxis:s,circularAxis:n}=e;let o;return o=t===Bt.X?i:Array.isArray(s)?t===Bt.Y?s[0]:s[1]:t===Jt.CIRCULAR?n:s,o}function gi(e,t,i){var s,n;const o=e[i],a=t[i];return!(!o&&!a)&&(null===(s=o)||void 0===s?void 0:s.maxLabelWidth)!==(null===(n=a)||void 0===n?void 0:n.maxLabelWidth)}function vi(e,t){return function(e,t){return gi(e,t,"yAxis")||gi(e,t,"secondaryYAxis")}(e,t)||function(e,t){const{maxHeight:i}=e.xAxis,{maxHeight:s}=t.xAxis;return i!==s}(e,t)}function fi(e){var t,i,s,n;return null==(n=null===(s=null===(i=null===(t=e)||void 0===t?void 0:t.xAxis)||void 0===i?void 0:i.label)||void 0===s?void 0:s.rotatable)||n}function bi(e,t){var i,s,n,o;const{labels:a,pointOnColumn:r,labelDistance:l,tickDistance:d,labelInterval:c,tickInterval:h,tickCount:u,scale:p}=e;let m=t,g=0,v=0;if(p){const e=null!=(s=null===(i=p)||void 0===i?void 0:i.sizeRatio)?s:1,a=null!=(o=null===(n=p)||void 0===n?void 0:n.positionRatio)?o:0;m=t*e,g=t*a}else{const e=c===h?c:1;v=r?(null!=l?l:d*e)/2:0}const f=wt(m,u,g);return a.reduce(((e,i,s)=>{const n=f[s]+v;return!(s%c)&&n<=t?[...e,{offsetPos:n,text:i}]:e}),[])}function xi(e){if(b(e))return e;const t={text:"",offsetX:0,offsetY:0};return w(e)?Object.assign(Object.assign({},t),{text:e}):Object.assign(Object.assign({},t),e)}function yi(e,t){var i,s,n;return null!=(n=null===(s=null===(i=Object.assign(Object.assign({},hi(e)),{xAxis:e.xAxis})[t])||void 0===i?void 0:i.label)||void 0===s?void 0:s.formatter)?n:e=>e}function Si(e,t,i,s){var n,o;const a=function(e){if(e)return O(e)?e.format:"YY-MM-DD hh:mm:ss"}(null===(o=null===(n=t)||void 0===n?void 0:n[s])||void 0===o?void 0:o.date),r=i&&a?e.map((e=>function(e,t,i){var s,n,o;const a=null!=(n=null===(s=i)||void 0===s?void 0:s.meridiemSet.AM)?n:"AM",r=(null===(o=i)||void 0===o?void 0:o.meridiemSet.PM)||"PM";let l;if(t instanceof Date)l={year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()};else{const{year:e,month:i,hour:s,minute:n,second:o}=t;l={year:e,month:i,date:t.date,hour:s,minute:n,second:o}}return function(e,t,i){const s=Number(e),n=Number(t),o=Number(i);if(!(s>-1&&s<100||s>1969&&s<2070)||!(n>0&&n<13))return!1;const a=function(e,t){return 2===e&&t%4==0&&(t%100!=0||t%400==0)}(n,s)?29:Nt[n];return o>0&&o<=a}(l.year,l.month,l.date)?(l.meridiem="",/([^\\]|^)[aA]\b/.test(e)&&(l.hour>12&&(l.hour%=12),0===l.hour&&(l.hour=12),l.meridiem=l.hour>11?r:a),e.replace(Yt,(e=>e.indexOf("\\")>-1?e.replace(/\\/,""):Xt[e](l)||""))):""}(a,new Date(e)))):e,l=yi(t,s);return r.map(((t,i)=>l(t,{index:i,labels:e,axisName:s})))}function wi(e,t,i,s,n){const o=function(e,t,i,s){let n=0;return Et.every((o=>{const a=function(e,t,i){return 2*(Wt(e,t/2)+Wt(90-e,i/2))}(o,t,i);return n=o,a>e||a/2>s.x})),e<t||t/2>s.x?n:0}(i,e,t,n);return s&&0!==o?{needRotateLabel:o>0,radian:_e(o,0),rotationHeight:It(o,e,t)}:{needRotateLabel:!1,radian:0,rotationHeight:t}}function Mi(e,t,i=Ee){const s=e.reduce(((e,t)=>e.length>t.length?e:t),"");return{maxLabelWidth:ut(s,i)+t,maxLabelHeight:pt(s,i)}}function Oi(e,t){var i,s,n,o;if("xAxis"===e)return 0;const a=hi(t);return Math.abs(null!=(o=null===(n=null===(s=null===(i=a)||void 0===i?void 0:i[e])||void 0===s?void 0:s.label)||void 0===n?void 0:n.margin)?o:0)}function Ai(e,t){var i,s,n,o,a,r;const{axis:l,categories:d,layout:c,isCoordinateTypeChart:h}=t,u=null===(s=null===(i=l)||void 0===i?void 0:i.tick)||void 0===s?void 0:s.interval,p=null===(o=null===(n=l)||void 0===n?void 0:n.label)||void 0===o?void 0:o.interval,m=S(u)||S(p),g=e&&!S(null===(r=null===(a=l)||void 0===a?void 0:a.scale)||void 0===r?void 0:r.stepSize)&&!t.shift&&!m&&!h,v=g?function(e,t){if(!e||!t)return 1;const{width:i}=t.xAxis;return function(e,t,i){var s;if((null===(s=i)||void 0===s?void 0:s[0])&&ut(i[0])<t/e-5)return 1;let n=[];if(function(e){const t=[];for(let i,s=2;s*s<=e;s+=1)e%s==0&&(i=e/s,t.push(s),i!==s&&t.push(i));return t.sort(((e,t)=>e-t))}(e).forEach((i=>{const s=i/e*t;s>=90&&s<=121&&n.push({interval:i,blockCount:Math.floor(e/i),remainBlockCount:0})})),!n.length){const i=C(90,121,5);n=i.reduce(((i,s)=>{const n=function(e,t,i){let s,n=Math.floor(t/i),o=null;const a=n?Math.floor(e/n):e;return a>1&&(s=e-a*n,s>=a&&(n+=Math.floor(s/a),s%=a),o={blockCount:n,remainBlockCount:s,interval:a}),o}(e,t,s);return n?[...i,n]:i}),[])}let o=1;return n.length&&(o=n.reduce(((e,t)=>t.blockCount>e.blockCount?t:e),{blockCount:0,interval:1}).interval),o}(e.length,i,e)}(d,c):1;return{tickInterval:null!=u?u:v,labelInterval:null!=p?p:g?v:1}}function ki(e,t,i=0,s=0,n=!1){var o;const a=t.width/2;if(n){const{startAngle:n,endAngle:r,clockwise:l}=function(e){var t,i,s,n,o,a,r,l;const d=null==(i=null===(t=e)||void 0===t?void 0:t.clockwise)||i;return{clockwise:d,startAngle:(o=null===(n=null===(s=e)||void 0===s?void 0:s.angleRange)||void 0===n?void 0:n.start,null!=o?o:d?0:Fe),endAngle:(l=null===(r=null===(a=e)||void 0===a?void 0:a.angleRange)||void 0===r?void 0:r.end,null!=l?l:d?Fe:0)}}(null===(o=e)||void 0===o?void 0:o.series),d=$t(l,n,r);return{isSemiCircular:d,axisSize:Ke(t,d,i,s),centerX:a,centerY:d?Gt(t.height,l):t.height/2,totalAngle:Ft(l,n,r),drawingStartAngle:n,clockwise:l,startAngle:n,endAngle:r}}return{isSemiCircular:!1,axisSize:Ke(t,!1,i,s),centerX:a,centerY:t.height/2,totalAngle:Fe,drawingStartAngle:0,clockwise:!0,startAngle:0,endAngle:Fe}}function Ci(e,t){var i;return!!(null===(i=e[t])||void 0===i?void 0:i.date)}function Ti(e){return S(e)?e:Array.isArray(e)?e[1]:e.y}function Ri(e){return Array.isArray(e)?e[0]:e.x}function Di(e,t,i,s){if(S(e))return i-s;const n=Ri(e);let o=t.findIndex((e=>e===String(n)));return-1===o&&function(e,t){const i=Y(t);return!!i&&(S(e)?e>=Number(i):new Date(e)>=new Date(i))}(n,t)&&(o=t.length),o}function ji(e){return function(e){var t;if(!e.line)return!1;const i=F(null===(t=e.line[0])||void 0===t?void 0:t.data);return i&&(Array.isArray(i)||O(i))}(e)||!!e.scatter||!!e.bubble}function Bi(e){var t,i;const s=!!j(e,["series","diverging"]),n="center"===(null===(i=null===(t=e)||void 0===t?void 0:t.yAxis)||void 0===i?void 0:i.align);return s&&n}function Li(e){const{axisSize:t,categories:i,series:s,options:n,theme:o,scale:a,initialAxisData:r,isCoordinateTypeChart:l,axisName:d}=e,c=!!s.line,h=function(e,t){var i;return!!oi(e)||!(!e.line&&!e.area)&&Boolean(null===(i=t.xAxis)||void 0===i?void 0:i.pointOnColumn)}(s,n),u=Ci(n,d),p=l?St(a.limit,a.stepSize,u):i,m=Si(p,n,u,d);let g;if(a&&c){const e=(h?p:i).map((e=>Number(u?new Date(e):e)));g={min:Math.min(...e),max:Math.max(...e)}}const v=i.length,f=v-(h?0:1),b=f?t/f:t,x=t/(m.length-(h?0:1));let y=m.length;h&&!l&&(y+=1);const S=bi(Object.assign({labels:m,pointOnColumn:h,tickDistance:b,tickCount:y,scale:a},r),t),w=Oi(d,n);return Object.assign(Object.assign({labels:m,viewLabels:S,pointOnColumn:h,labelDistance:x,tickDistance:b,tickCount:y,labelRange:g,rectResponderCount:v,isLabelAxis:!0},r),Mi(m,w,Te(o.label)))}function Pi(e){var t;const{scale:i,axisSize:s,series:n,options:o,centerYAxis:a,initialAxisData:r,theme:l,labelOnYAxis:d,axisName:c}=e,{limit:h,stepSize:u}=i,p=a?null===(t=a)||void 0===t?void 0:t.xAxisHalfSize:s,m=function(e,t){var i;return oi(e)&&!!(null===(i=t.series)||void 0===i?void 0:i.diverging)}(n,o),g=yi(o,c),v=function(e,t,i,s){const{min:n,max:o}=e;if(!(n<=0&&o>=0)||s)return null;const a=(0-n)/(o-n)*t;return i?a:t-a}(h,s,ni({series:n,options:o}),m);let f=St(h,u);!a&&m&&(f=function(e){return X(e)?e.reverse().slice(1).concat(e):e.slice(1).reverse().concat(e)}(f));const b=f.map(((e,t)=>g(e,{index:t,labels:f,axisName:c}))),x=p/Math.max(f.length,1),y=f.length,w=bi(Object.assign({labels:d?b:[...b].reverse(),pointOnColumn:!1,tickDistance:x,tickCount:y},r),p),M=Oi(c,o),O=Object.assign(Object.assign({labels:b,viewLabels:w,pointOnColumn:!1,isLabelAxis:!1,tickCount:y,tickDistance:x},r),Mi(b,M,Te(l.label)));return S(v)&&(O.zeroPosition=v),O}function Ei(e,t){var i,s;const n=Ai(e,t),o=xi(null===(s=null===(i=t)||void 0===i?void 0:i.axis)||void 0===s?void 0:s.title);return o&&(n.title=o),n}function Wi({axisData:e,axisSize:t,axisLayout:i,centerYAxis:s,rotatable:n,labelMargin:o=0}){const{viewLabels:a,pointOnColumn:r,maxLabelWidth:l,maxLabelHeight:d}=e,c=gt(d)+o,h=wi(l,d,(s?s.xAxisHalfSize:t)/(a.length-(r?0:1)),n,i),{needRotateLabel:u,rotationHeight:p}=h,m=(u?p:d)+c;return Object.assign(Object.assign(Object.assign({},e),h),{maxHeight:m,offsetY:c})}const zi={name:"axes",state:({series:e,options:t})=>{const{secondaryYAxis:i}=hi(t),s={xAxis:{},yAxis:{}};return e.bar&&Bi(t)&&(s.centerYAxis={}),i&&(s.secondaryYAxis={}),{axes:s}},action:{setAxesData({state:e,initStoreState:t}){var i,s;const{scale:n,options:o,series:a,layout:r,theme:l}=e,{xAxis:d,yAxis:c,plot:h}=r,u=ji(t.series),p=ni({series:a,options:o}),{categories:m}=function(e,t){var i,s;return{categories:(i=e,null!=i?i:[]),rawCategories:(s=t,null!=s?s:[])}}(e.categories,e.rawCategories),{valueAxisName:g,valueAxisSize:v,labelAxisName:f,labelAxisSize:b}=function(e,t,i){const{valueAxisName:s,labelAxisName:n}=ri(e,i),{valueSizeKey:o,labelSizeKey:a}=li(e);return{valueAxisName:s,valueAxisSize:t[o],labelAxisName:n,labelAxisSize:t[a]}}(p,h,a),x=e.axes.centerYAxis,y=function(e,t,i,s,n){var o,a,r;const{yAxis:l,secondaryYAxis:d}=hi(e),c=null===(a=null===(o=e)||void 0===o?void 0:o.series)||void 0===a?void 0:a.shift;return{xAxis:Ei(!t,{categories:i,axis:null===(r=e)||void 0===r?void 0:r.xAxis,layout:s,shift:c,isCoordinateTypeChart:n}),yAxis:Ei(t,{axis:l}),secondaryYAxis:d?Ei(t,{axis:d}):null}}(o,p,m,r,u),S=Pi({scale:n[g],axisSize:v,options:o,series:a,theme:mi(l,g),centerYAxis:x?{xAxisHalfSize:(d.width-c.width)/2}:null,initialAxisData:y[g],labelOnYAxis:p,axisName:g}),w=Li({scale:n[f],axisSize:b,categories:m,options:o,series:a,theme:mi(l,f),initialAxisData:y[f],isCoordinateTypeChart:u,labelOnYAxis:p,axisName:f});let M,O;if(e.axes.secondaryYAxis&&(M=function({state:e,labelOnYAxis:t,valueAxisSize:i,labelAxisSize:s,initialAxisData:n,isCoordinateTypeChart:o}){var a,r;const{scale:l,options:d,series:c,theme:h}=e,u=e.categories;return t?Li({scale:l.secondaryYAxis,axisSize:s,categories:(r=null===(a=hi(d).secondaryYAxis)||void 0===a?void 0:a.categories,null!=r?r:u),options:d,series:c,theme:mi(h,Bt.SECONDARY_Y),initialAxisData:n,isCoordinateTypeChart:o,axisName:Bt.SECONDARY_Y}):Pi({scale:l.secondaryYAxis,axisSize:i,options:d,series:c,theme:mi(h,Bt.SECONDARY_Y),centerYAxis:null,initialAxisData:n,axisName:Bt.SECONDARY_Y})}({state:e,labelOnYAxis:p,valueAxisSize:v,labelAxisSize:b,labelAxisName:f,valueAxisName:g,initialAxisData:y.secondaryYAxis,isCoordinateTypeChart:u})),x){const e=(d.width-c.width)/2;O=L(S,{x:d.x+e,xAxisHalfSize:e,secondStartX:(d.width+c.width)/2,yAxisLabelAnchorPoint:c.width/2,yAxisHeight:c.height})}const A={xAxis:Wi({axisData:p?S:w,axisSize:p?v:b,axisLayout:r.xAxis,centerYAxis:O,rotatable:fi(o),labelMargin:null===(s=null===(i=o.xAxis)||void 0===i?void 0:i.label)||void 0===s?void 0:s.margin}),yAxis:p?w:S,secondaryYAxis:M,centerYAxis:O};vi(e.axes,A)&&this.notify(e,"layout"),e.axes=A}},computed:{},observe:{updateAxes(){this.dispatch("setAxesData")}}},Ii=zi,Yi={xls:"data:application/vnd.ms-excel;base64,",csv:"data:text/csv;charset=utf-8,%EF%BB%BF"};function Hi(e,t,i,s){const n=function(e){return"jpeg"===e||"png"===e}(t)?function(e){const t=e.substr(0,e.indexOf(";base64,")).substr(e.indexOf(":")+1),i=atob(e.substr(e.indexOf(",")+1)),s=[];for(let e=0;e<i.length;e+=1024){const t=i.slice(e,e+1024),n=new Array(t.length);for(let e=0;e<t.length;e+=1)n[e]=t.charCodeAt(e);s.push(new window.Uint8Array(n))}try{return new Blob(s,{type:t})}catch(e){return new Blob(s.map((e=>e.buffer)),{type:t})}}(i):new Blob([i],{type:s});window.navigator.msSaveOrOpenBlob(n,`${e}.${t}`)}function Ni(e,t,i){if(i){const s=document.createElement("a");s.href=i,s.target="_blank",s.download=`${e}.${t}`,document.body.appendChild(s),s.click(),s.remove()}}function Xi(...e){return((e,...t)=>e.reduce(((e,i,s)=>e+t[s-1]+i)))(...e).replace(/\n\s*/g,"")}function Fi(e,t){return e.reduce(((e,i,s)=>{var n,o;return!s||e<(null===(o=null===(n=i)||void 0===n?void 0:n[t])||void 0===o?void 0:o.length)?i[t].length:e}),0)}function $i({label:e,data:t,children:i=[]},s){return t&&s.push([e,t]),i.forEach((e=>$i(e,s))),s}function Gi(e){const{series:t}=e,i=[["Label","Data"]];return t.treemap.data.forEach((e=>{$i(e,i)})),i}function Vi(e){let t;const{series:i}=e;return t=i.bullet?function({series:e}){const t=e.bullet.data,i=Fi(t,"markers"),s=C(0,Fi(t,"ranges")).map((e=>`Range ${e+1}`)),n=C(0,i).map((e=>`Marker ${e+1}`));return t.reduce(((e,{data:t,markers:i,name:o,ranges:a})=>[...e,[o,null!=t?t:"",...s.map(((e,t)=>{var i;const s=null===(i=a)||void 0===i?void 0:i[t];return s?`${s[0]} ~ ${s[1]}`:""})),...n.map(((e,t)=>{var s,n;return null!=(n=null===(s=i)||void 0===s?void 0:s[t])?n:""}))]]),[["","Actual",...s,...n]])}(e):i.heatmap?function({categories:e,series:t}){const i=e.x;return t.heatmap.data.reduce(((e,{data:t,yCategory:i})=>[...e,[i,...t.map((e=>x(e)?"":e))]]),[["",...i]])}(e):i.bubble?function(e){const{series:t}=e;return t.bubble.data.reduce(((e,{name:t,data:i})=>[...e,...i.map((e=>x(e)?[]:[t,e.label,String(e.x),e.y,e.r]))]),[["Name","Label","X","Y","Radius"]])}(e):i.boxPlot?function(e){var t;const{series:i}=e,s=null!=(t=e.categories)?t:[];return i.boxPlot.data.reduce(((e,{name:t,data:i,outliers:s})=>{const n=(null!=i?i:[]).map(((e,t)=>{var i;const n=null===(i=(null!=s?s:[]).find((e=>e[0]===t)))||void 0===i?void 0:i[1];return(n?[...e,n]:[...e]).join()}));return[...e,[t,...n]]}),[["",...s]])}(e):i.pie?function(e){var t;const{series:i}=e,s=null!=(t=e.categories)?t:[];return i.pie.data.reduce(((e,{name:t,data:i})=>{const s=Array.isArray(i)?(null!=i?i:[]).reduce(((e,t)=>{var i;return[...e,[t.name,(i=t.data,null!=i?i:"")]]}),[]):[[t,null!=i?i:""]];return[...e,...s]}),s.length?[["",...s]]:[])}(e):i.treemap?Gi(e):function(e){const{series:t}=e,i=e.categories;return Object.keys(t).reduce(((e,s)=>{const n=t[s].data.map((({name:e,data:t})=>{const n=!S(F(t))&&T(["line","area","scatter"],s)?function(e,t,i){return t.map(((t,s)=>{if("area"===e&&Array.isArray(i[s]))return i[s].join();const n=i.find((e=>t===String(Ri(e))));return n?Ti(n):""}))}(s,i,t):t.map((e=>Array.isArray(e)?e.join():e));return[e,...n]}));return[...e,...n]}),t.gauge?[]:[["",...i]])}(e),t}function _i(e,t,i,s){const n=function(){let e;const t=!b(document.createElement("a").download);return b(window.Blob&&window.navigator.msSaveOrOpenBlob)?t&&(e=Ni):e=Hi,e}();w(i)&&n&&n(e,t,i,s)}const Ui={IMAGES:["png","jpeg"],SPREAD_SHEETS:["xls","csv"]},qi=24;class Zi extends jt{constructor(){super(...arguments),this.models={exportMenuButton:[]},this.opened=!1,this.chartWidth=0,this.toggleExportMenu=()=>{this.opened=!this.opened,this.models.exportMenuButton[0].opened=this.opened,this.eventBus.emit("needDraw"),this.opened?(this.applyPanelWrapperStyle(),this.chartEl.appendChild(this.exportMenuEl)):this.chartEl.removeChild(this.exportMenuEl)},this.getCanvasExportBtnRemoved=()=>{const e=this.chartEl.getElementsByTagName("canvas")[0],t=e.getContext("2d"),{x:i,y:s,height:n,width:o}=this.rect;return t.clearRect(i,s,o,n),t.fillStyle=this.chartBackgroundColor,t.fillRect(i,s,o,n),e},this.onClickExportButton=e=>{const{id:t}=e.target,i=Ui.IMAGES.includes(t),s=Ui.SPREAD_SHEETS.includes(t);if(i){const e=this.getCanvasExportBtnRemoved();_i(this.fileName,t,e.toDataURL(`image/${t}`,1))}else s&&function(e,t,i){const s=Vi(i),n=Yi[t].replace(/(data:|;base64,|,%EF%BB%BF)/g,"");let o="";o="csv"===t?encodeURIComponent(function(e,t={}){const{lineDelimiter:i="\n",itemDelimiter:s=","}=t,n=e.length-1;let o="";return e.forEach(((e,t)=>{const a=e.length-1;e.forEach(((e,t)=>{const i=S(e)?e:`"${e}"`;o+=i,t<a&&(o+=s)})),t<n&&(o+=i)})),o}(s)):function(e){return Xi`<html xmlns:o="urn:schemas-microsoft-com:office:office"
        xmlns:x="urn:schemas-microsoft-com:office:excel"
        xmlns="http://www.w3.org/TR/REC-html40">
        <head>
            <!--[if gte mso 9]>
                <xml>
                    <x:ExcelWorkbook>
                        <x:ExcelWorksheets>
                            <x:ExcelWorksheet>
                                <x:Name>Ark1</x:Name>
                                <x:WorksheetOptions>
                                    <x:DisplayGridlines/>
                                </x:WorksheetOptions>
                            </x:ExcelWorksheet>
                        </x:ExcelWorksheets>
                        </x:ExcelWorkbook>
                </xml>
            <![endif]-->
            <meta name=ProgId content=Excel.Sheet>
            <meta charset=UTF-8>
        </head>
        <body>
            ${function(e){let t="<table>";return e.forEach(((e,i)=>{const s=0===i?"th":"td";t+="<tr>",e.forEach(((e,n)=>{t+=`<${s}${0!==i||0===n?' class="number"':""}>${e}</${s}>`})),t+="</tr>"})),t+="</table>",t}(e)}
        </body>
        </html>`}(s),function(){const e=!b(document.createElement("a").download);return!!b(window.Blob&&window.navigator.msSaveOrOpenBlob)&&e}()&&("csv"!==t&&(o=window.btoa(unescape(encodeURIComponent(o)))),o=Yi[t]+o),_i(e,t,o,n)}(this.fileName,t,this.data);(i||s)&&this.toggleExportMenu()}}applyExportButtonPanelStyle(){const e=this.exportMenuEl.querySelector(".toastui-chart-export-menu-title"),t=this.exportMenuEl.querySelector(".toastui-chart-export-menu-btn-wrapper");e.setAttribute("style",this.makePanelStyle("header")),t.setAttribute("style",this.makePanelStyle("body"))}makeExportMenuButton(){const e=document.createElement("div");return e.onclick=this.onClickExportButton,e.innerHTML='\n        <div class="toastui-chart-export-menu">\n          <p class="toastui-chart-export-menu-title">Export to</p>\n          <div class="toastui-chart-export-menu-btn-wrapper">\n            <button class="toastui-chart-export-menu-btn" id="xls">xls</button>\n            <button class="toastui-chart-export-menu-btn" id="csv">csv</button>\n            <button class="toastui-chart-export-menu-btn" id="png">png</button>\n            <button class="toastui-chart-export-menu-btn" id="jpeg">jpeg</button>\n          </div>\n        </div>\n      ',e}initialize({chartEl:e}){this.chartEl=e,this.type="exportMenu",this.name="exportMenu",this.exportMenuEl=this.makeExportMenuButton()}onClick({responders:e}){e.length&&this.toggleExportMenu()}getFileName(e){var t,i;return w(e)?e:null!=(i=null===(t=e)||void 0===t?void 0:t.text)?i:"toast-ui-chart"}render({options:e,layout:t,chart:i,series:s,rawCategories:n,theme:o}){var a,r;this.isShow=ms(e),this.chartWidth=i.width,this.isShow&&(this.chartBackgroundColor=o.chart.backgroundColor,this.theme=o.exportMenu,this.data={series:s,categories:n},this.fileName=this.getFileName((null===(r=null===(a=e)||void 0===a?void 0:a.exportMenu)||void 0===r?void 0:r.filename)||i.title),this.applyExportButtonPanelStyle(),this.rect=t.exportMenu,this.models.exportMenuButton=[{type:"exportMenuButton",x:0,y:0,opened:this.opened,theme:this.theme.button}],this.responders=[{type:"rect",width:qi,height:qi,x:0,y:0}])}applyPanelWrapperStyle(){const e=this.exportMenuEl.querySelector(".toastui-chart-export-menu"),t=this.chartWidth-140-as.X,i=as.Y+qi+5,{borderRadius:s,borderWidth:n,borderColor:o}=this.theme.panel,a=`\n      transform: ${Ce(t,i)};\n      border: ${n}px solid ${o};\n      border-radius: ${s}px;`;e.setAttribute("style",a)}makePanelStyle(e){const t=this.theme.panel[e],i="header"===e?"top":"bottom",{borderRadius:s,borderWidth:n}=this.theme.panel,o=s-n+"px";return[`${Re(t)}`,`border-${i}-left-radius: ${o};`,`border-${i}-right-radius: ${o};`,`background-color: ${t.backgroundColor};`].join("")}}function Ki(e,t){var i;const{x:s,y:n,text:o,textAlign:a,textBaseline:r,opacity:l,callout:d,theme:c,radian:h}=t,{color:u,textBubble:p}=c,m={textAlign:a,textBaseline:r,font:De(c),fillStyle:u},g=function(e){const{textStrokeColor:t}=e,i=R(e,"lineWidth","shadowColor","shadowBlur");return t&&(i.strokeStyle=t),i}(c);if(d){const{theme:{lineWidth:t,lineColor:i}}=d;at(e,Object.assign(Object.assign({type:"line"},R(d,"x","y","x2","y2")),{strokeStyle:i,lineWidth:t}))}(null===(i=p)||void 0===i?void 0:i.visible)?Ji(e,t):Ie(e,{type:"label",x:s,y:n,text:o,style:[m],stroke:[g],opacity:l,radian:h})}function Ji(e,t){const{text:i,theme:s,radian:n=0}=t,{color:o,textStrokeColor:a}=s,r=De(s),l=function(e){const{text:t,theme:i,textAlign:s,textBaseline:n}=e,o=De(i),{arrow:a,paddingX:r,paddingY:l,borderRadius:d,borderColor:c,borderWidth:h,backgroundColor:u,shadowBlur:p,shadowOffsetX:m,shadowOffsetY:g,shadowColor:v}=i.textBubble,f=ut(t,o)+2*r,b=pt(t,o)+2*l;let{x,y}=e;"center"===s?x-=f/2:T(["right","end"],s)&&(x-=f),"middle"===n?y-=b/2:"bottom"===n&&(y-=b);const S={x,y,width:f,height:b};return Object.assign(Object.assign(Object.assign({},S),{radius:d,lineWidth:h,fill:u,strokeStyle:c,style:[{shadowBlur:p,shadowOffsetX:m,shadowOffsetY:g,shadowColor:v}]}),function(e,t,i,s){var n,o;if(!(null===(n=s)||void 0===n?void 0:n.visible))return null;const a=s.height,{width:r,height:l}=e,d=null!==(o=s.direction)&&void 0!==o?o:function(e,t){let i="top";return"center"===e&&"top"===t?i="top":"center"===e&&"bottom"===t?i="bottom":"middle"===t&&"right"===e?i="right":"middle"===t&&"left"===e&&(i="left"),i}(t,i);let{x:c,y:h}=e,{x:u,y:p}=e;return"top"===d?h+=a:"bottom"===d?(h-=a,p+=l):"right"===d?(c-=a,u+=r):"left"===d&&(c+=a),"center"===t?u=e.x+r/2:"middle"===i&&(p=e.y+l/2),{direction:d,points:Qi(d,{x:u,y:p},s),x:c,y:h}}(S,s,n,a))}(t),{x:d,y:c,width:h,height:u}=l;He(e,{type:"bubbleLabel",radian:n,rotationPosition:{x:t.x,y:t.y},bubble:l,label:{x:d+h/2,y:c+u/2,text:i,style:[{font:r,fillStyle:o,textAlign:"center",textBaseline:"middle"}],strokeStyle:a}})}function Qi(e,{x:t,y:i},s){const n=s.width,o=s.height;let a=[];return"top"===e?a=[{x:t-n/2,y:i+o},{x:t,y:i},{x:t+n/2,y:i+o}]:"bottom"===e?a=[{x:t+n/2,y:i-o},{x:t,y:i},{x:t-n/2,y:i-o}]:"right"===e?a=[{x:t-o,y:i-n/2},{x:t,y:i},{x:t-o,y:i+n/2}]:"left"===e&&(a=[{x:t+o,y:i+n/2},{x:t,y:i},{x:t+o,y:i-n/2}]),a}const es=12,ts={HEIGHT:6,PADDING:5},is={HEIGHT:28,POINT_WIDTH:8,POINT_HEIGHT:6,PADDING:6};function ss(e,t,i){const{HEIGHT:s}=ts;return{barWidth:i?e:s,barHeight:i?s:t-es}}function ns(e,t){const i=function(e){const{align:t,x:i,y:s,labels:n,width:o}=e;let a,r;return"top"===t?(a=i,r=s):"bottom"===t?(a=i,r=s+is.HEIGHT+ts.HEIGHT+ts.PADDING):"left"===t?(a=i+Tt(n),r=s):(a=i+o-Tt(n)-as.X,r=s),{x:a,y:r}}(t),s=function(e){const{align:t,x:i,y:s,labels:n,width:o}=e,{PADDING:a}=ts;let r,l;return"top"===t?(r=i,l=s+es+a):"bottom"===t?(r=i,l=s+is.HEIGHT):"left"===t?(r=i+Tt(n)+a,l=s+es/2):(r=i+o-(Tt(n)+as.X+2*a+ts.HEIGHT),l=s+es/2),{x:r,y:l}}(t);!function(e,t){const{labels:i,align:s,x:n,y:o,width:a,height:r,verticalAlign:l}=t,{barWidth:d,barHeight:c}=ss(a,r,l),h=i.length-1,u={left:{textAlign:"right",textBaseline:"top"},right:{textAlign:"left",textBaseline:"top"},top:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"}};i.forEach(((t,i)=>{Ie(e,{type:"label",x:l?n+d/h*i:n,y:l?o:o+c/h*i,text:t,style:["default",u[s]]})}))}(e,Object.assign(Object.assign({},t),i)),function(e,t){const{width:i,height:s,startColor:n,endColor:o,x:a,y:r,verticalAlign:l}=t,{barWidth:d,barHeight:c}=ss(i,s,l),h=l?e.createLinearGradient(a,r,a+d,r):e.createLinearGradient(a,r,a,r+c);h.addColorStop(0,n),h.addColorStop(1,o),e.fillStyle=h,e.fillRect(a,r,d,c)}(e,Object.assign(Object.assign({},t),s))}function os(e,t){const{x:i,y:s}=function(e){const{align:t,colorRatio:i,width:s,height:n,x:o,y:a,labels:r,verticalAlign:l}=e,{barWidth:d,barHeight:c}=ss(s,n,l),{PADDING:h,HEIGHT:u}=ts;return"top"===t?{x:o+d*i,y:a+es+u+2*h}:"bottom"===t?{x:o+d*i,y:a+es+2*h}:"left"===t?{x:o+Tt(r)+u+2*h,y:a+c*i+h}:"right"===t?{x:o+s-(Tt(r)+as.X+3*h+u),y:a+c*i+h}:void 0}(t),{PADDING:n,POINT_HEIGHT:o,POINT_WIDTH:a}=is,{align:r,text:l,color:d}=t,c=ut(l)+2*n,h=es+2*n,u=r;let p=i,m=s;"top"===r?m+=o:"right"===r?(p-=c/2+o,m-=h/2):"left"===r?(p+=c/2+o,m-=h/2):"bottom"===r&&(m-=h+o),He(e,{type:"bubbleLabel",bubble:{x:p-c/2,y:m,width:c,height:h,points:Qi(r,{x:i,y:s},{visible:!0,width:a,height:o}),direction:u,fill:d},label:{text:l,x:p,y:m+h/2,style:[{font:"normal 11px Arial",fillStyle:"#333333",textAlign:"center",textBaseline:"middle"}]}})}const as={X:10,Y:15};function rs(e){return"top"===e||"bottom"===e}function ls(e,t,i){var s,n,o,a;return{height:(n=null===(s=e)||void 0===s?void 0:s.height,null!=n?n:i),width:(a=null===(o=e)||void 0===o?void 0:o.width,null!=a?a:t)}}function ds(e){const{yAxisTitle:t,isRightSide:i,visibleSecondaryYAxis:s}=e,n=cs(e);return i&&s?Math.max(t.x+t.width-n,0):t.x}function cs({maxLabelWidth:e,size:t,isRightSide:i}){var s,n,o;return null!=(o=null===(n=null===(s=t)||void 0===s?void 0:s[i?"secondaryYAxis":"yAxis"])||void 0===n?void 0:n.width)?o:e}function hs(e){var t,i;const{size:s,isRightSide:n=!1}=e,o=function(e){const{chartSize:t,legend:i,circleLegend:s,hasCenterYAxis:n,maxLabelWidth:o}=e,{width:a}=t,{align:r}=i;let l=cs(e),d=ds(e);return n&&(l=o+2*(dt+as.X),d=(a-i.width-l+2*as.X)/2),i.visible&&"left"===r&&(d=ds(e)),s.visible&&"left"===r&&(d=Math.max(s.width+as.X,d)),d}(e),a=function({yAxisTitle:e}){return e.y+e.height}(e),r=function(e){const{hasCenterYAxis:t,hasXYAxis:i,maxLabelWidth:s,visibleSecondaryYAxis:n=!1,isRightSide:o=!1}=e;let a=cs(e);return t&&!o?a=s+2*(dt+as.X):(!i||o&&!n)&&(a=0),a}(e),l=function({chartSize:e,legend:t,yAxisTitle:i,hasXYAxis:s,size:n,xAxisTitleHeight:o}){var a,r,l,d;const{height:c}=e,{align:h,height:u}=t,p=function(e){var t;return(null===(t=e.xAxis)||void 0===t?void 0:t.height)&&!e.yAxis?e.xAxis.height:20}(n),m=i.y+i.height;let g=c-m-p-o;if(s||(g=c-m),t.visible){const e=Math.max(m,u);"top"===h?g=c-e-(s?20+o:0):"bottom"===h&&(g=c-m-20-o-u)}return!(null===(r=null===(a=n)||void 0===a?void 0:a.yAxis)||void 0===r?void 0:r.height)&&(null===(d=null===(l=n)||void 0===l?void 0:l.plot)||void 0===d?void 0:d.height)&&(g=n.plot.height),g}(e);return Object.assign({x:o,y:a},ls(n?null===(t=s)||void 0===t?void 0:t.secondaryYAxis:null===(i=s)||void 0===i?void 0:i.yAxis,r,l))}function us({chartSize:e,visible:t,title:i,legend:{align:s,width:n,height:o,visible:a,useSpectrumLegend:r},hasCenterYAxis:l,visibleSecondaryYAxis:d,isRightSide:c=!1,yAxisTitleHeight:h}){const u=t?h+5:0,p=rs(s),m=(e.width-(p?2*as.X:n))/(d?2:1),g={x:c?i.x+m:i.x,y:i.y+i.height};return a&&("left"===s?g.x+=n:"top"===s&&(g.y+=function(e,t){return e?es+2*ts.PADDING+is.POINT_HEIGHT+is.HEIGHT+as.Y:t+as.Y}(r,o))),l&&(g.x=(m+2*as.X)/2),Object.assign({height:u,width:m},g)}function ps(e){var t;return!!(null===(t=e.series)||void 0===t?void 0:t.zoomable)}function ms(e){var t;const i=null===(t=e.exportMenu)||void 0===t?void 0:t.visible;return!!b(i)||i}function gs(e){return e?e+as.X:40}function vs(e){return!e||b(e.width)&&b(e.height)?null:R(e,"width","height")}function fs(e,t,i){const s=e[i],n=t[i];if(S(s)&&S(n))return Math.max(s,n)}function bs(e,t=0){return(Array.isArray(e)?Math.max(e[0].title.fontSize,e[1].title.fontSize):e.title.fontSize)+t}const xs={name:"layout",state:()=>({layout:{}}),action:{setLayout({state:e}){var t,i,s,n,o,a,r,l,d,c,h,u,p,m,g,v,f;const{legend:b,theme:x,circleLegend:y,series:S,options:w,chart:M,axes:O,radialAxes:A}=e,{width:k,height:C}=M,T={height:C-2*as.Y,width:k-2*as.X},R=!!S.bar&&Bi(w),D=function(e){return!(e.pie||e.radar||e.treemap||e.radialBar||e.gauge)}(S),j=function(e){const t=vs(e.xAxis),i=hi(e),s=vs(i.yAxis),n=vs(i.secondaryYAxis),o=vs(e.plot);return o&&(t&&(t.width=o.width=fs(t,o,"width")),s&&(s.height=o.height=fs(s,o,"height")),n&&(n.height=o.height=fs(n,o,"height"))),{xAxis:t,yAxis:s,plot:o,secondaryYAxis:n}}(w),{yAxis:B,secondaryYAxis:L}=function(e,t){return t?hi(e):{yAxis:null,secondaryYAxis:null}}(w,D),P=!!L,E=x.title.fontSize,W=null!=(n=bs(x.yAxis,null===(s=null===(i=null===(t=O)||void 0===t?void 0:t.yAxis)||void 0===i?void 0:i.title)||void 0===s?void 0:s.offsetY))?n:0,z=null!=(l=bs(x.xAxis,null===(r=null===(a=null===(o=O)||void 0===o?void 0:o.xAxis)||void 0===a?void 0:a.title)||void 0===r?void 0:r.offsetY))?l:0,I=function(e,t){return{x:t?as.X+e.width-qi:as.X+e.width,y:as.Y,height:t?29:0,width:t?qi:0}}(T,ms(w)),Y=function(e,t){return{x:t?e.x-qi-as.X:0,y:t?e.y:0,height:t?29:0,width:t?qi:0}}(I,ps(w)),H=function(e,t,i,s){const n={x:as.X,y:as.Y},o=i?e.width-t.width:0,a=i?Math.max(s+5,t.height):t.height;return Object.assign({width:o,height:a},n)}(T,I.height?I:Y,!!(null===(d=w.chart)||void 0===d?void 0:d.title),E),N=!!(null===(c=B)||void 0===c?void 0:c.title)||!!(null===(h=L)||void 0===h?void 0:h.title),X=us({chartSize:T,visible:N,title:H,legend:b,hasCenterYAxis:R,visibleSecondaryYAxis:P,yAxisTitleHeight:W}),F=hs({chartSize:T,legend:b,circleLegend:y,yAxisTitle:X,hasCenterYAxis:R,hasXYAxis:D,maxLabelWidth:gs(null===(u=O)||void 0===u?void 0:u.yAxis.maxLabelWidth),size:j,xAxisTitleHeight:z}),$=us({chartSize:T,visible:N,title:H,legend:b,hasCenterYAxis:R,isRightSide:!0,visibleSecondaryYAxis:P,yAxisTitleHeight:W}),G=hs({chartSize:T,legend:b,circleLegend:y,yAxisTitle:$,hasCenterYAxis:R,hasXYAxis:D,maxLabelWidth:gs(null===(m=null===(p=O)||void 0===p?void 0:p.secondaryYAxis)||void 0===m?void 0:m.maxLabelWidth),size:j,isRightSide:!0,visibleSecondaryYAxis:P,xAxisTitleHeight:z}),V=function(e){var t;const{hasXYAxis:i,hasCenterYAxis:s,yAxis:n,size:o,xAxisData:a}=e,r=s?2*as.X:n.x+n.width,l=n.y+n.height,d=function({chartSize:e,yAxis:t,hasCenterYAxis:i,legend:s,circleLegend:n,secondaryYAxis:o,xAxisData:a}){var r;const{width:l}=e,{align:d,width:c}=s,h=rs(d);let u;return h?(u=l-(t.x+t.width+as.X),n.visible&&(u-=n.width)):u=l-(t.width+Math.max(c,n.visible?n.width:0)),i&&(u=l-(h?0:c)-2*as.X),o.width&&(u-=o.width),(null===(r=a)||void 0===r?void 0:r.maxLabelWidth)&&(u-=.5*a.maxLabelWidth),u}(e),c=function(e,t=!1){var i,s;return t?null!=(s=null===(i=e)||void 0===i?void 0:i.maxHeight)?s:20:0}(a,i);return Object.assign({x:r,y:l},ls(null===(t=o)||void 0===t?void 0:t.xAxis,d,c))}({chartSize:T,yAxis:F,secondaryYAxis:G,legend:b,circleLegend:y,hasCenterYAxis:R,hasXYAxis:D,size:j,xAxisData:null===(g=O)||void 0===g?void 0:g.xAxis}),_=function(e,t,i){const s={x:t.x,y:t.y+t.height},n=e?i:0,o=e?t.width:0;return Object.assign({height:n,width:o},s)}(!!(null===(v=w.xAxis)||void 0===v?void 0:v.title),V,z),U=function(e){const{legend:t,xAxis:i,yAxis:s,chartSize:n,title:o,hasXYAxis:a,secondaryYAxis:r,xAxisTitleHeight:l}=e;if(!t.visible)return{x:0,y:0,width:0,height:0};const{align:d,width:c,height:h}=t,{width:u}=n,p=rs(d);let m=i.x+i.width+r.width+as.X,g=Math.max(s.y,qi);return p?(m=(u-c)/2,g="top"===d?o.y+o.height:s.y+s.height+(a?i.height+l:as.Y)):"left"===d&&(m=as.X),{width:c,height:h,x:m,y:g}}({chartSize:T,xAxis:V,yAxis:F,secondaryYAxis:G,title:H,legend:b,hasXYAxis:D,xAxisTitleHeight:z});!function({width:e,height:t},i,s){if(e<0||t<0)return;const{title:n,yAxisTitle:o,yAxis:a,xAxis:r,xAxisTitle:l,legend:d,secondaryYAxis:c}=i,{align:h}=s,u=rs(h),p=u?d.height:0,m=r.height+l.height+a.height+o.height+n.height+p-t;m>0&&(a.height-=m,r.y-=m,l.y-=m,u&&(d.y-=m)),c.x=r.x+r.width,c.height=a.height}(T,{title:H,yAxisTitle:X,yAxis:F,xAxis:V,xAxisTitle:_,legend:U,secondaryYAxis:G},b);const q=function(e,t,i,s){return{width:s,height:t.height,x:"left"===i?as.X:e.x+e.width+as.X,y:t.y}}(V,F,b.align,y.width),Z=function(e,t,i){return Object.assign({x:e.x,y:t.y},ls(i,e.width,t.height))}(V,F,j.plot),K=function(e,t,i){var s,n;if(!i)return Object.assign({},e);const{x:o,y:a}=e,{centerX:r,centerY:l,axisSize:d,title:c,radius:{outer:h}}=i,u=null!=(n=null===(s=c)||void 0===s?void 0:s.offsetY)?n:0;return{x:r+o-d/2,y:l+a-h/2,width:d,height:t.title.fontSize+u}}(Z,x.circularAxis,null===(f=A)||void 0===f?void 0:f.circularAxis);he(e.layout,{chart:{x:0,y:0,width:k,height:C},title:H,plot:Z,legend:U,circleLegend:q,xAxis:V,xAxisTitle:_,yAxis:F,yAxisTitle:X,exportMenu:I,resetButton:Y,secondaryYAxisTitle:$,secondaryYAxis:G,circularAxisTitle:K})}},observe:{updateLayoutObserve(){this.dispatch("setLayout")}}},ys=xs;function Ss(e){return Array.isArray(e)&&2===e.length}function ws(e){return Array.isArray(e)&&Ss(F(e))}function Ms(e,t){return t?e.slice(t[0],t[1]+1):e}function Os(e,t){if(t)return t;const i=new Set;return Object.keys(e).forEach((t=>{var s;"pie"!==t&&"gauge"!==t&&(s=e[t].data,null!=s?s:e[t]).forEach((({data:e,name:s,visible:n})=>{Array.isArray(e)?e.forEach((e=>{if(!x(e)){const t=Ri(e);i.add(S(t)?t:t.toString())}})):("bullet"===t&&b(n)||n)&&i.add(s)}))})),Array.from(i).sort(W).map((e=>String(e)))}const As={name:"category",state:({categories:e,series:t})=>({categories:Os(t,e)}),action:{setCategory({state:e,computed:t}){const{viewRange:i}=t;let s=e.rawCategories;i&&(s=Array.isArray(s)?Ms(s,i):Object.assign(Object.assign({},s),{x:Ms(s.x,i)})),e.categories=s,this.notify(e,"categories")},initCategory({initStoreState:e,state:t}){const{zoomRange:i}=t;let s=Os(e.series);i&&Array.isArray(s)&&(s=Ms(s,i)),t.categories=s,this.notify(t,"categories")},removeCategoryByName({state:e},t){const i=e.categories.findIndex((e=>e===t));e.categories.splice(i,1),this.notify(e,"axes")}},observe:{updateCategory(){this.dispatch("setCategory")}}};function ks(e,t){let i;return i=t?Array.isArray(t)?t.length:t.x.length:Object.keys(Os(e,t)).length,[0,i-1]}function Cs(e,t,i){var s;if((e.line||e.area||e.column)&&(null===(s=t.series)||void 0===s?void 0:s.rangeSelectable))return ks(e,i)}function Ts(e,t,i){var s;if((e.line||e.area)&&(null===(s=t.series)||void 0===s?void 0:s.zoomable))return ks(e,i)}function Rs(e,t,i){var s;if((e.line||e.area||e.column||e.heatmap)&&(null===(s=t.series)||void 0===s?void 0:s.shift))return ks(e,i)}function Ds(e,t,i,s){if(!s)return e;let[n,o]=s;const a=F(e);return"area"===i||b(a)||S(a)?(n=n>1?n-1:n,o=o<t.length-1?o+1:o):[n,o]=function(e,t,i){const[s,n]=i;let o,a;return C(s,n+1).forEach((i=>{const s=e.findIndex((e=>Ri(e).toString()===t[i]));-1!==s&&(b(o)&&(o=s),b(o)||(a=Math.max(s,null!=a?a:0)))})),[o,a]}(e,t,s),e.slice(n,o+1)}function js(e,t){return ji(e)&&(b(t)||"line"===t||"scatter"===t)}function Bs(e){const t=_t(e),i=[];return t?e.pie.forEach((({data:e})=>{e.forEach((e=>{y(e.visible)&&!e.visible&&i.push(e.name)}))})):Object.keys(e).forEach((t=>{e[t].forEach((({name:e,visible:t})=>{y(t)&&!t&&i.push(e)}))})),i}const Ls={name:"seriesData",state:({series:e,categories:t,options:i})=>({rawCategories:Os(e,t),series:Object.assign({},e),selectionRange:Cs(e,i,t),zoomRange:Ts(e,i,t),shiftRange:Rs(e,i,t),disabledSeries:Bs(e)}),action:{setSeriesData({state:e,initStoreState:t}){const i=E(t.series),{disabledSeries:s,theme:n,zoomRange:o,rawCategories:a}=e,r={};let l=0;Object.keys(i).forEach((e=>{var t,d,c;const{colors:h,iconTypes:u}=n.series[e];let p=i[e].map((t=>{const i=!!t.colorByCategories,s=i?a.length:1,n=h?function(e,t,i,s){return s?e.slice(0,i+1):e[t%e.length]}(h,l,s,i):"";return l+=s,Object.assign(Object.assign({},t),{rawData:t.data,data:Ds(t.data,a,e,o),color:n})}));"scatter"===e&&(p=p.map(((e,t)=>Object.assign(Object.assign({},e),{iconType:u?u[t]:"circle"}))));const m=p.length,g=null!=(c=null===(d=null===(t=p[0])||void 0===t?void 0:t.data)||void 0===d?void 0:d.length)?c:0,v=p.filter((({name:e})=>!s.includes(e)));r[e]={seriesCount:m,seriesGroupCount:g,data:v,colors:h}})),he(e.series,r)},disableSeries({state:e},t){e.disabledSeries.push(t),this.notify(e,"disabledSeries"),e.series.bullet&&this.dispatch("removeCategoryByName",t)},enableSeries({state:e},t){const i=e.disabledSeries.findIndex((e=>e===t));e.disabledSeries.splice(i,1),this.notify(e,"disabledSeries"),e.series.bullet&&(e.categories=e.series.bullet.data.map((({name:e})=>e)),this.notify(e,"axes"))},selection({state:e},t){const i=e.rawCategories;e.selectionRange=t.map((e=>i.findIndex((t=>t===e)))),this.notify(e,"selectionRange")},zoom({state:e},t){const i=e.rawCategories;e.zoomRange=t.map((e=>i.findIndex((t=>t===e)))),this.notify(e,"zoomRange")},resetZoom({state:e,initStoreState:t}){const{series:i,options:s}=t,n=e.rawCategories;e.zoomRange=Ts(i,s,n),this.notify(e,"zoomRange")},addData({state:e,initStoreState:t},{data:i,category:s,chartType:n}){const{series:o}=t,a=js(e.series,n);let{categories:r}=t;if(r=o.heatmap?r.x:r,s&&Array.isArray(r)&&!r.some((e=>e===s))&&(r.push(s),Array.isArray(e.shiftRange))){const[t,i]=e.shiftRange;e.shiftRange=[t+1,i+1]}if(n)o[n].forEach(((e,t)=>{e.data.push(i[t])}));else{const[e]=Object.keys(t.series);o[e].forEach(((e,t)=>{e.data.push(i[t])}))}this.notify(e,"series"),this.notify(e,"rawCategories"),Array.isArray(e.zoomRange)&&this.dispatch("resetZoom"),a&&this.dispatch("initCategory")},addSeries({state:e,initStoreState:t},{data:i,chartType:s,category:n}){const{series:o,categories:a}=t,r=js(e.series,s),l=s||Object.keys(o)[0],d=function(e,t,i){return e[t].some((({label:e})=>e===i.name))}(o,l,i);d||(o[l].push(i),Array.isArray(a)&&n&&a.push(n)),this.dispatch("initThemeState"),this.dispatch("initLegendState"),this.notify(e,"series"),(r||"bullet"===l)&&this.dispatch("initCategory")},addHeatmapSeries({state:e,initStoreState:t},{data:i,category:s}){const{series:n,categories:o}=t,a=function(e,t){return T(e.y,t)}(o,s);a||n.heatmap.push({data:i,yCategory:s}),!a&&s&&(o.y.push(s),this.notify(e,"rawCategories")),this.notify(e,"series"),this.dispatch("initThemeState"),this.dispatch("initLegendState")},addTreemapSeries({state:e,initStoreState:t},{data:i}){const{series:s}=t,n=function(e,t){return e.treemap.some((({label:e})=>e===t.label))}(s,i);n||s.treemap.push(i),this.notify(e,"series"),this.notify(e,"treemapSeries"),this.dispatch("initThemeState"),this.dispatch("initLegendState")},setData({state:e,initStoreState:t},{series:i,categories:s}){t.series=i,_t(i)||(e.rawCategories=Os(i,s)),this.dispatch("initThemeState"),this.dispatch("initLegendState")},addOutlier({state:e,initStoreState:t},{seriesIndex:i,outliers:s}){var n;const{series:o}=t,a=o.boxPlot[i];if(!a)throw new Error("The seriesIndex value is invalid");a.outliers=[...(n=a.outliers,null!=n?n:[]),...s],this.notify(e,"series")}},observe:{updateSeriesData(){this.dispatch("setSeriesData")}},computed:{isLineTypeSeriesZooming:({zoomRange:e,rawCategories:t})=>function(e,t){return!(!t||0===t[0]&&t[1]===e.length-1)}(t,e),viewRange:({zoomRange:e,shiftRange:t})=>e||t}},Ps=Ls;function Es(e,t){const{color:i,points:s,lineWidth:n,fillColor:o,dashSegments:a=[]}=t;s.length&&(e.beginPath(),a&&je(e,a),s.forEach((({x:t,y:i},s)=>{0!==s?e.lineTo(t,i):e.moveTo(t,i)})),e.lineTo(s[0].x,s[0].y),o&&Le(e,o),Pe(e,{lineWidth:n,strokeStyle:i}),e.closePath())}function Ws(e){switch(e){case"triangle":return 3;case"diamond":return 4;case"pentagon":return 5;case"hexagon":return 6}}function zs(e,t){const{x:i,y:s,borderColor:n,borderWidth:o,fillColor:a,iconType:r,size:l}=t,d={x:i,y:s,fillColor:a,borderColor:n,borderWidth:o,size:l};switch(e.beginPath(),r){case"rect":nt(e,{type:"pathRect",x:i-l/2,y:s-l/2,width:l,height:l,stroke:n,lineWidth:o,fill:a});break;case"triangle":case"pentagon":case"diamond":case"hexagon":!function(e,t){const{numberOfSides:i,size:s,x:n,y:o,borderColor:a,borderWidth:r,fillColor:l}=t,d=s/2,c=i%2?Math.PI/180*(10+(i-3)/2)*i:0,h=2*Math.PI/i;e.beginPath();for(let t=0;t<=i;t+=1){const i=t*h+c;e.lineTo(n+d*Math.cos(i),o+d*Math.sin(i))}e.strokeStyle=a,e.lineWidth=r,Le(e,l),e.stroke(),e.closePath()}(e,Object.assign({type:"regularPolygon",numberOfSides:Ws(r)},d));break;case"star":!function(e,t){const{x:i,y:s,borderColor:n,borderWidth:o,size:a,fillColor:r}=t;e.lineWidth=o,e.strokeStyle=n,e.fillStyle=r,e.save(),e.beginPath(),e.translate(i,s),e.moveTo(0,-a);for(let t=0;t<5;t+=1)e.rotate(Math.PI/5),e.lineTo(0,-a/2),e.rotate(Math.PI/5),e.lineTo(0,-a);e.fill(),e.stroke(),e.restore(),e.closePath()}(e,Object.assign(Object.assign({type:"star"},d),{size:l/2}));break;case"cross":!function(e,t){const{x:i,y:s,borderColor:n,borderWidth:o,size:a,fillColor:r}=t,l=a/4,d=a/2,c=[-d,-d,-l,-l,l,l,d,d,l,l,-l,-l],h=[];for(let e=0,t=c.length;e<t;e+=1){const i=9;h.push(c[(i+e)%t])}Es(e,{type:"polygon",lineWidth:o,color:n,points:c.map(((e,t)=>({x:i+e,y:s+h[t]}))),fillColor:r})}(e,Object.assign({type:"cross"},d));break;default:ot(e,{type:"circle",x:i,y:s,radius:l/2,style:[{strokeStyle:n,lineWidth:o}],color:a})}e.stroke(),e.closePath()}const Is=40,Ys=5,Hs=12,Ns=12,Xs=.3;function Fs(e){return e+as.Y}function $s(e,t){const{data:i,showCheckbox:s,align:n,fontSize:o,fontFamily:a,fontWeight:r}=t,l=Te({fontSize:o,fontFamily:a,fontWeight:r}),d=t.color;i.forEach((t=>{const{x:i,y:o,checked:a,active:r,color:c,iconType:h,useScatterChartIcon:u,viewLabel:p}=t,m=o-1+(pt(p,l)-11)/4,g={iconType:h,checked:a,active:r,color:c,showCheckbox:s,align:n,font:l,fontColor:d};s&&function(e,t,i,s){const{active:n,checked:o}=s,a=n?"#bbb":Me("#bbbbbb",Xs);rt(e,{type:"rect",x:t,y:i,width:Hs,height:Hs,color:"#fff",borderColor:a,thickness:1}),o&&function(e,t,i,s){const n="#555555",o=s?n:Me(n,Xs);at(e,{type:"line",x:t+2,y:i+5,x2:t+5,y2:i+8,strokeStyle:o,lineWidth:2}),at(e,{type:"line",x:t+5,y:i+9,x2:t+10,y2:i+3,strokeStyle:o,lineWidth:2})}(e,t,i,n)}(e,i,m,g),u&&"line"!==h?function(e,t,i,s){const{iconType:n,active:o,color:a,showCheckbox:r}=s;zs(e,{type:"scatterSeries",iconType:n,x:t+(r?Hs+Ys:0)+6,y:i+6,borderColor:o?a:Me(a,Xs),size:12,fillColor:"rgba(255, 255, 255, 0)",borderWidth:1.5})}(e,i,m,g):function(e,t,i,s){const{iconType:n,active:o,color:a,showCheckbox:r}=s,l=t+(r?Hs+Ys:0),d=o?a:Me(a,Xs);"rect"===n?rt(e,{type:"rect",x:l,y:i+(Hs-10)/2,width:10,height:10,color:d}):"line"===n?function(e,t,i,s){const n=[2,2,6,6,10,10],o=[8,0,0,8,8,0];n.forEach(((a,r)=>{5!==r&&at(e,{type:"line",x:t+a,y:i+o[r],x2:t+n[r+1],y2:i+o[r+1],lineWidth:2,strokeStyle:s})}))}(e,l,i+2,d):"circle"===n&&ot(e,{type:"circle",x:l+6,y:i+6,radius:6,color:d,style:["default"]})}(e,i,m,g),function(e,t,i,s,n){const{active:o,showCheckbox:a,font:r,fontColor:l}=n,d=o?l:Me(l,Xs);Ie(e,{type:"label",x:t+Ns+Ys+(a?Hs+Ys:0),y:i,text:s,style:["default",{font:r,textBaseline:"top",fillStyle:d}]})}(e,i,o,p,g)}))}const Gs={shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetX:2,shadowOffsetY:2,shadowBlur:6},Vs={whisker:{lineWidth:1},maximum:{lineWidth:1},minimum:{lineWidth:1},median:{lineWidth:1,color:"#ffffff"}},_s=[.5,.3,.1];function Us(e="Arial"){return{fontFamily:e,fontSize:11,fontWeight:400,color:"#333333",useSeriesColor:!1}}const qs={width:8,height:6},Zs={colors:["#00a9ff","#ffb840","#ff5a46","#00bd9f","#785fff","#f28b8c","#989486","#516f7d","#28e6eb","#28695f","#96c85a","#45ba3f","#295ba0","#2a4175","#289399","#66c8d3","#617178","#8a9a9a","#bebebe","#374b5a","#64eba0","#ffe155","#ff9141","#af4beb","#ff73fa","#ff55b2","#2869f5","#3296ff","#8cc3ff","#2828b9","#fa8787","#e13782","#7d5aaa","#643c91","#d25f5f","#fabe6e","#c3a9eb","#b9c8f5","#73a0cd","#0f5a8c"],startColor:"#ffe98a",endColor:"#d74177",lineWidth:2,dashSegments:[],borderWidth:0,borderColor:"#ffffff",select:{dot:{radius:3,borderWidth:5},areaOpacity:.3,restSeries:{areaOpacity:.06}},hover:{dot:{radius:3,borderWidth:5}},dot:{radius:3},areaOpacity:.3};function Ks(e="Arial"){return{fontSize:11,fontFamily:e,fontWeight:700,color:"#bbbbbb"}}function Js(e,t="Arial"){var i,s;const n=Ks(t),o=function(e="Arial"){return{fontSize:11,fontFamily:e,fontWeight:"normal",color:"#333333"}}(t),a=!!(null===(i=e)||void 0===i?void 0:i.radar),r=!!(null===(s=e)||void 0===s?void 0:s.gauge);return{chart:{fontFamily:t,backgroundColor:"#ffffff"},noData:{fontSize:18,fontFamily:t,fontWeight:"normal",color:"#333333"},title:{fontSize:18,fontFamily:t,fontWeight:100,color:"#333333"},yAxis:{title:Object.assign({},n),label:Object.assign({},o),width:1,color:"#333333"},xAxis:{title:Object.assign({},n),label:Object.assign({},o),width:1,color:"#333333"},verticalAxis:{label:Object.assign(Object.assign({},o),{textBubble:{visible:a,backgroundColor:a?"#f3f3f3":"rgba(0, 0, 0, 0)",borderRadius:7,paddingX:7,paddingY:2,borderColor:"rgba(0, 0, 0, 0)",borderWidth:1}})},circularAxis:{title:Object.assign({},n),label:Object.assign({},o),lineWidth:1,strokeStyle:r?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.05)",dotColor:"rgba(0, 0, 0, 0.5)",tick:{lineWidth:1,strokeStyle:"rgba(0, 0, 0, 0.5)"}},legend:{label:{color:"#333333",fontSize:11,fontWeight:"normal",fontFamily:t}},tooltip:{background:"rgba(85, 85, 85, 0.95)",borderColor:"rgba(255, 255, 255, 0)",borderWidth:0,borderRadius:3,borderStyle:"solid",body:{fontSize:12,fontFamily:`${t}, sans-serif`,fontWeight:"normal",color:"#ffffff"},header:{fontSize:13,fontFamily:`${t}, sans-serif`,fontWeight:"bold",color:"#ffffff"}},plot:{lineColor:"rgba(0, 0, 0, 0.05)",backgroundColor:"rgba(255, 255, 255, 0)"},exportMenu:{button:Object.assign(Object.assign({},Qs(5,"#f4f4f4")),{backgroundColor:"#f4f4f4",xIcon:{color:"#555555",lineWidth:2},dotIcon:{color:"#555555",width:2,height:2,gap:2}}),panel:Object.assign(Object.assign({},Qs(0,"#bab9ba")),{header:Object.assign(Object.assign({},o),{backgroundColor:"#f4f4f4"}),body:Object.assign(Object.assign({},o),{backgroundColor:"#ffffff"})})}}}function Qs(e,t,i=1){return{borderWidth:i,borderRadius:e,borderColor:t}}function en(e=!1,t=7,i=5,s=1,n="#ffffff"){return{visible:e,paddingX:i,paddingY:s,borderRadius:t,backgroundColor:n,shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffsetY:2,shadowBlur:4}}function tn(e){const t=Us(e);return{lineWidth:Zs.lineWidth,dashSegments:Zs.dashSegments,select:{dot:Zs.select.dot},hover:{dot:Zs.hover.dot},dot:Zs.dot,dataLabels:Object.assign(Object.assign({},t),{textBubble:Object.assign(Object.assign({},en()),{arrow:Object.assign({visible:!1,direction:"bottom"},qs)})})}}function sn(e){const t=Us(e);return{startColor:Zs.startColor,endColor:Zs.endColor,borderWidth:0,borderColor:"#ffffff",hover:{borderWidth:4,borderColor:"#ffffff"},select:{borderWidth:4,borderColor:"#ffffff"},dataLabels:Object.assign(Object.assign({},t),{color:"#ffffff",textBubble:Object.assign({},en(!1,1,5,1,"rgba(255, 255, 255, 0.5)"))})}}function nn(e){const t=Us(e);return{areaOpacity:1,hover:Object.assign(Object.assign({},Gs),{borderWidth:4,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.05}}),select:Object.assign(Object.assign({},Gs),{borderWidth:4,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.2},restSeries:{areaOpacity:.2},areaOpacity:1}),connector:{color:"rgba(51, 85, 139, 0.3)",lineWidth:1,dashSegments:[]},dataLabels:Object.assign(Object.assign({},t),{textBubble:Object.assign(Object.assign({},en(!1,1,4,3)),{arrow:Object.assign({visible:!1},qs)}),stackTotal:Object.assign(Object.assign({},t),{textBubble:Object.assign(Object.assign({},en(!0,1,4,3)),{arrow:Object.assign({visible:!0},qs)})})})}}const on="rgba(255, 255, 255, 0)",an={line:e=>Object.assign({},tn(e)),area:e=>{const t=tn(e);return Object.assign(Object.assign({},t),{select:Object.assign(Object.assign({},t.select),{areaOpacity:.3,restSeries:Zs.select.restSeries}),areaOpacity:.3})},treemap:e=>sn(e),heatmap:e=>sn(e),scatter:()=>({size:12,borderWidth:1.5,fillColor:on,select:{fillColor:"rgba(255, 255, 255, 1)",borderWidth:2.5,size:12},hover:{fillColor:"rgba(255, 255, 255, 1)",borderWidth:2.5,size:12}}),bubble:()=>({borderWidth:0,borderColor:on,select:{},hover:{shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:2,shadowOffsetY:2,lineWidth:2}}),radar:()=>({areaOpacity:.3,hover:{dot:{radius:4,borderWidth:5}},select:{dot:{radius:4,borderWidth:5},restSeries:{areaOpacity:.05},areaOpacity:.3},dot:{radius:3}}),bar:e=>Object.assign({},nn(e)),column:e=>Object.assign({},nn(e)),bullet:e=>{const t=Us(e);return{areaOpacity:1,barWidthRatios:{rangeRatio:1,bulletRatio:.5,markerRatio:.8},markerLineWidth:1,borderWidth:0,borderColor:"rgba(255, 255, 255, 0)",hover:Object.assign(Object.assign({},Gs),{borderWidth:4,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.05}}),select:Object.assign(Object.assign({},Gs),{borderWidth:4,borderColor:"#ffffff",groupedRect:{color:"#000000",opacity:.2},restSeries:{areaOpacity:.2},areaOpacity:1}),dataLabels:Object.assign(Object.assign({},t),{textBubble:Object.assign(Object.assign({},en()),{arrow:Object.assign({visible:!1},qs)}),marker:Object.assign(Object.assign({},t),{fontSize:9,useSeriesColor:!0,textBubble:Object.assign(Object.assign({},en(!0)),{backgroundColor:"rgba(255, 255, 255, 0.8)",shadowColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,arrow:Object.assign({visible:!1},qs)})})})}},boxPlot:()=>({areaOpacity:1,barWidthRatios:{barRatio:1,minMaxBarRatio:.5},markerLineWidth:1,dot:{color:"#ffffff",radius:4,borderWidth:2,useSeriesColor:!1},rect:{borderWidth:0},line:Object.assign({},Vs),hover:Object.assign(Object.assign({},Gs),{rect:{borderWidth:4,borderColor:"#ffffff"},dot:{radius:4,borderWidth:0,useSeriesColor:!0},line:Object.assign({},Vs)}),select:Object.assign(Object.assign({},Gs),{rect:{borderWidth:4,borderColor:"#ffffff"},dot:{radius:4,borderWidth:0,useSeriesColor:!0},line:Object.assign({},Vs),restSeries:{areaOpacity:.2},areaOpacity:1})}),pie:(e,{hasOuterAnchor:t=!1,hasOuterAnchorPieSeriesName:i=!1},s=!1)=>{const n=Us(e);return{areaOpacity:1,strokeStyle:s?"#ffffff":"rgba(255, 255, 255, 0)",lineWidth:s?1:0,hover:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0},select:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,restSeries:{areaOpacity:.3},areaOpacity:1},dataLabels:{fontFamily:e,fontSize:16,fontWeight:600,color:t?"#333333":"#ffffff",useSeriesColor:t,textBubble:Object.assign({},en(!1,0)),callout:{lineWidth:1,useSeriesColor:!0,lineColor:"#e9e9e9"},pieSeriesName:Object.assign(Object.assign({},n),{useSeriesColor:i,color:i?"#333333":"#ffffff",textBubble:Object.assign({},en(!1,0))})}}},radialBar:e=>({areaOpacity:1,strokeStyle:"rgba(255, 255, 255, 0)",lineWidth:0,hover:{lineWidth:3,strokeStyle:"#fff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,groupedSector:{color:"#000000",opacity:.05}},select:{lineWidth:3,strokeStyle:"#fff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,restSeries:{areaOpacity:.3},areaOpacity:1,groupedSector:{color:"#000000",opacity:.2}},dataLabels:{fontFamily:e,fontSize:11,fontWeight:400,color:"#333333",useSeriesColor:!1,textBubble:Object.assign({},en(!1,0))}}),gauge:e=>({areaOpacity:1,hover:{clockHand:{baseLine:5},pin:{radius:5,borderWidth:5},solid:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0}},select:{clockHand:{baseLine:5},pin:{radius:6,borderWidth:4},solid:{lineWidth:3,strokeStyle:"#ffffff",shadowColor:"#cccccc",shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,restSeries:{areaOpacity:.3},areaOpacity:1},areaOpacity:1,restSeries:{areaOpacity:.3}},clockHand:{baseLine:4},pin:{radius:5,borderWidth:5},solid:{lineWidth:0,backgroundSolid:{color:"rgba(0, 0, 0, 0.1)"}},dataLabels:{fontFamily:e,fontSize:11,fontWeight:400,color:"#333333",useSeriesColor:!1,textBubble:Object.assign(Object.assign({},en(!0,4,4,3)),{shadowColor:"rgba(0, 0, 0, 0)",shadowOffsetY:0,shadowBlur:0,borderColor:"#ccc",borderWidth:1})}})};function rn(e,t,i,s=!1){return"pie"===t?an[t](e,i,s):T(["bubble","radar","boxPlot"],t)?an[t]():an[t](e)}function ln(e,t,i){const{index:s,seriesIndex:n,chartType:o}=e;return S(s)&&("grouped"===t||S(n))&&(b(o)||o===i)}function dn(e,t){const{index:i,seriesIndex:s,chartType:n}=e;return S(i)&&S(s)&&(b(n)||n===t)}function cn(e){return Object.keys(e).reduce(((t,i)=>!e[i].data.length&&t),!0)}function hn(e){return e.data.reduce(((e,{active:t,label:i})=>Object.assign(Object.assign({},e),{[i]:t})),{})}function un(e,t){var i,s,n;return!(t.gauge||t.treemap&&!(null===(i=e.series)||void 0===i?void 0:i.useColorValue)||!b(null===(s=e.legend)||void 0===s?void 0:s.visible)&&!(null===(n=e.legend)||void 0===n?void 0:n.visible))}function pn(e){var t,i;return!!b(null===(t=e.legend)||void 0===t?void 0:t.showCheckbox)||!!(null===(i=e.legend)||void 0===i?void 0:i.showCheckbox)}function mn(e){let t="spectrum";return function(e){return T(["bubble","scatter"],e)}(e)?t="circle":function(e){return T(["bar","column","area","pie","boxPlot","bullet","radialBar"],e)}(e)?t="rect":function(e){return T(["line","radar"],e)}(e)&&(t="line"),t}function gn(e){var t,i;return null!=(i=null===(t=e.legend)||void 0===t?void 0:t.align)?i:"right"}function vn(e){const{verticalAlign:t,chart:i,itemHeight:s,initialWidth:n,circleLegendVisible:o}=e,a=100+(o?150:0);return t?{width:i.width-2*as.X,height:s}:{width:n,height:i.height-a}}function fn(e){var t,i;const{legendOptions:s,font:n,checkboxVisible:o}=e,a=null===(i=null===(t=s)||void 0===t?void 0:t.item)||void 0===i?void 0:i.width;if(b(a))return;const r=o?Hs+Ys:0,l=Ns+Ys,d=ut("...",n),c=ut("W",n),h=Math.floor((a-d-r-l)/c);return h>0?h:0}function bn(e,t,i){var s,n;const{checkboxVisible:o,useSpectrumLegend:a,font:r,legendOptions:l}=e;let d=t;const c=null===(n=null===(s=l)||void 0===s?void 0:s.item)||void 0===n?void 0:n.width,h=function(e,t,i,s){return(i?0:(t?Hs+Ys:0)+Ns+Ys)+ut(e,s)}(d,o,a,r);return S(c)&&S(i)&&c<h&&(d=`${t.slice(0,i)}...`),{viewLabel:d,width:null!=c?c:h}}function xn(e,t){const i=Object.values(t).reduce(((e,t)=>t&&t.colors?[...e,...t.colors]:e),[]),s=e.some((e=>e.colorByCategories));return e.map(((e,t)=>{const{colorByCategories:n,colorIndex:o}=e,a=s&&o||t;return Object.assign(Object.assign({},e),{color:n?"#aaa":i[a%i.length]})}))}function yn(e,t,i){var s,n,o,a,r,l,d,c,h;const u=null!=(o=null===(n=null===(s=e)||void 0===s?void 0:s.series)||void 0===n?void 0:n.useColorValue)?o:!!t.heatmap,p=!!(null===(a=t)||void 0===a?void 0:a.scatter),m={checkboxVisible:!u&&pn(e),font:Te(L(Js(t,null===(d=null===(l=null===(r=e)||void 0===r?void 0:r.theme)||void 0===l?void 0:l.chart)||void 0===d?void 0:d.fontFamily).legend.label,Object.assign({},null===(h=null===(c=e.theme)||void 0===c?void 0:c.legend)||void 0===h?void 0:h.label))),useSpectrumLegend:u,legendOptions:e.legend},g=_t(t)?function(e,t){const i=[],s=fn(t);return e.pie.forEach((({data:e})=>{e.forEach((({name:e,parentName:n,visible:o})=>{if(!n){const{width:n,viewLabel:a}=bn(t,e,s);i.push({label:e,type:"pie",checked:null==o||o,viewLabel:a,width:n})}}))})),i}(t,m):function(e,t,i){const s=fn(t);let n=0;return Object.keys(e).flatMap((o=>{const a=e[o].map((({name:e,colorValue:a,visible:r,colorByCategories:l})=>{const d=a||e,c=n,{width:h,viewLabel:u}=bn(t,d,s);return n+=l?i.length:1,{label:d,type:o,colorByCategories:!!l,colorIndex:c,checked:null==r||r,viewLabel:u,width:h}}));return n+=e[o].length-1,a}))}(t,m,i),v=g.map((({label:e,type:t,checked:i,width:s,viewLabel:n,colorByCategories:o,colorIndex:a})=>({label:e,active:!0,checked:i,width:s,iconType:mn(t),chartType:t,rowIndex:0,columnIndex:0,viewLabel:n,colorByCategories:o,colorIndex:a})));return{useSpectrumLegend:u,useScatterChartIcon:p,data:v}}const Sn={name:"legend",state:({options:e,series:t,categories:i})=>({legend:yn(e,t,i),circleLegend:{}}),action:{initLegendState({state:e,initStoreState:t}){he(e.legend,yn(t.options,t.series,t.categories))},setLegendLayout({state:e}){e.legend.useSpectrumLegend?this.dispatch("setSpectrumLegendLayout"):this.dispatch("setNormalLegendLayout")},setSpectrumLegendLayout({state:e}){const{legend:{data:t},series:i,options:s,chart:n,theme:o}=e,a=gn(s),r=un(s,i),l=rs(a),d=t.map((({width:e})=>e)),c=(Fs(o.legend.label.fontSize),function(e,t,i){if(i){const i=N(e);return Math.max(t/4,i)}const s=2*(is.PADDING+ts.PADDING+as.X)+is.POINT_HEIGHT+ts.HEIGHT;return Math.max(...e)+s}(d,n.width,l)),h=function(e,t,i){return i?es+2*ts.PADDING+is.POINT_HEIGHT+is.HEIGHT+as.Y:3*t/4}(0,n.height,l);he(e.legend,{visible:r,align:a,width:c,height:h})},setNormalLegendLayout({state:e,initStoreState:t}){const{legend:{data:i},series:s,options:n,chart:o,theme:a}=e,r=gn(n),l=un(n,s),d=pn(n),c=Math.min(o.width/5,100),h=rs(r),u=_t(t.series),p=!!s.scatter,m=!!s.bubble,g=!!m&&function(e){var t,i,s;return null==(s=null===(i=null===(t=e)||void 0===t?void 0:t.circleLegend)||void 0===i?void 0:i.visible)||s}(n),v=i.map((({width:e})=>e)),f=Fs(a.legend.label.fontSize),{legendWidth:b,legendHeight:x,rowCount:y,columnCount:S}=function(e){if(!e.visible)return{legendWidth:0,legendHeight:0,rowCount:0,columnCount:0};const{chart:t,verticalAlign:i,legendWidths:s}=e,{legendWidth:n,isOverflow:o}=function(e){var t,i;const{options:s,visible:n}=e,o=null===(t=s)||void 0===t?void 0:t.legend;return n?(null===(i=o)||void 0===i?void 0:i.width)?{legendWidth:o.width,isOverflow:!1}:function(e){const{initialWidth:t,legendWidths:i,checkbox:s,verticalAlign:n}=e;let o,a=!1;if(n){const{width:t}=vn(e),s=N(i)+Is*(i.length-1);a=s>t,o=s}else{const e=Math.max(...i);o=(s?Hs+Ys:0)+Ns+Ys+Math.max(e,t)}return{legendWidth:o,isOverflow:a}}(e):{legendWidth:0,isOverflow:!1}}(e),{legendHeight:a,isOverflow:r}=function(e){const{verticalAlign:t,itemHeight:i,legendWidths:s}=e,{height:n}=vn(e);let o,a=!1;if(t)o=n;else{const e=s.length*i;a=n<e,o=a?n:e}return{legendHeight:o,isOverflow:a}}(e),l=i?s.length:1,d=i?Math.ceil(n/t.width):s.length;return o?function(e,t){const{legendWidths:i,itemHeight:s}=e;let n=0,o=0;const{rowCount:a}=i.reduce(((e,i)=>{const s=Is+i;return e.totalWidth+i>t?(e.totalWidth=s,e.rowCount+=1,e.columnCount=1,n=Math.max(n,e.columnCount)):(e.totalWidth+=s,e.columnCount+=1),o=Math.max(o,e.totalWidth),e}),{totalWidth:0,rowCount:1,columnCount:0});return{legendHeight:s*a,rowCount:a,columnCount:n,legendWidth:o}}(e,n/d):r?function(e,t){const{legendWidths:i,itemHeight:s}=e,n=i.length*s,o=Math.ceil(n/t),a=i.length/o;let r=0;return C(0,o).forEach((e=>{r+=Math.max(...i.slice(e*a,(e+1)*a))})),r+=Is*(o-1),{legendWidth:r,legendHeight:a*s+as.Y,columnCount:o,rowCount:a}}(e,a):{legendWidth:n,legendHeight:a,columnCount:l,rowCount:d}}({initialWidth:c,legendWidths:v,options:n,verticalAlign:h,visible:l,checkbox:d,chart:o,itemHeight:f,circleLegendVisible:g});!function(e,t,i,s,n){let o=0,a=0;e.forEach((e=>{e.rowIndex=a,e.columnIndex=o,[a,o]=function(e){const{verticalAlign:t,columnCount:i,rowCount:s,legendCount:n}=e;let{rowIndex:o,columnIndex:a}=e;return t?n/s-1>a?a+=1:(o+=1,a=0):n/i-1>o?o+=1:(a+=1,o=0),[o,a]}({rowCount:t,columnCount:i,verticalAlign:n,legendCount:s,rowIndex:a,columnIndex:o})}))}(i,y,S,v.length,h),he(e.legend,{visible:l,align:r,showCheckbox:d,width:b,height:x}),m&&g&&this.dispatch("updateCircleLegendLayout",{legendWidth:b}),u||cn(s)||this.dispatch("updateLegendColor"),p&&this.dispatch("updateLegendIcon")},updateCircleLegendLayout({state:e},{legendWidth:t}){const i=0===t?150:Math.min(t,150),s=Math.max((i-Ys)/2,0);he(e.circleLegend,{visible:!0,width:i,radius:s})},setLegendActiveState({state:e},{name:t,active:i}){const{data:s}=e.legend,n=s.find((({label:e})=>e===t));n.active=i,this.notify(e,"legend")},setAllLegendActiveState({state:e},t){e.legend.data.forEach((e=>{e.active=t})),this.notify(e,"legend")},setLegendCheckedState({state:e},{name:t,checked:i}){const s=e.legend.data.find((({label:e})=>e===t));s.checked=i,this.notify(e,"legend")},updateLegendColor({state:e}){const{legend:t,series:i}=e,s=xn(t.data,i);he(e.legend,{data:s})},updateLegendIcon({state:e}){const{legend:t,series:i}=e,s=t.data.reduce(((e,t)=>{var s;if("scatter"===t.chartType&&(null===(s=i.scatter)||void 0===s?void 0:s.data)){const s=i.scatter.data.find((({name:e})=>e===t.label)),n=s?s.iconType:t.iconType;return[...e,Object.assign(Object.assign({},t),{iconType:n})]}return[...e,t]}),[]);he(e.legend,{data:s})},updateNestedPieChartLegend({state:e}){const{legend:t,nestedPieSeries:i}=e;he(e.legend,{data:xn(t.data,i)})}},observe:{updateLegendLayout(){this.dispatch("setLegendLayout")}}},wn=Sn;function Mn(e,t,i){var s,n;const{width:o,height:a}=e;return{width:o?t.width:null===(s=i)||void 0===s?void 0:s.width,height:a?t.height:null===(n=i)||void 0===n?void 0:n.height}}const On={name:"options",state:({options:e})=>({originalOptions:E(e),options:e}),action:{setOptions({state:e}){const{width:t,height:i}=e.chart;t<0||i<0||(e.options=function(e,t){var i;const s=null===(i=t.responsive)||void 0===i?void 0:i.rules;return Array.isArray(s)?s.reduce(((t,i)=>i.condition(e)?L(t,i.options):t),t):t}({width:t,height:i},e.originalOptions))},initOptions({initStoreState:e,state:t},{options:i,containerSize:s}){e.options=i,t.originalOptions=E(i);const{usingContainerSize:n,originalOptions:o}=t,a=Mn(n,s,{width:o.chart.width,height:o.chart.height});this.dispatch("setChartSize",a)},updateOptions({state:e,initStoreState:t},{options:i,containerSize:s}){var n,o;t.options=L(t.options,i),e.originalOptions=L(e.originalOptions,i);const{usingContainerSize:a,originalOptions:r}=e,l=Mn(a,s,{width:null===(n=r.chart)||void 0===n?void 0:n.width,height:null===(o=r.chart)||void 0===o?void 0:o.height});this.dispatch("setChartSize",l),this.dispatch("initThemeState")}},observe:{updateOptions(){this.dispatch("setOptions")}}},An=On;function kn(e,t,i){var s,n,o,a,r,l,d,c,h;return{hasOuterAnchor:!!t.pie&&"outer"===(null===(a=null===(o=null===(n=null===(s=e)||void 0===s?void 0:s.series)||void 0===n?void 0:n[i])||void 0===o?void 0:o.dataLabels)||void 0===a?void 0:a.anchor),hasOuterAnchorPieSeriesName:!!t.pie&&"outer"===(null===(h=null===(c=null===(d=null===(l=null===(r=e)||void 0===r?void 0:r.series)||void 0===l?void 0:l[i])||void 0===d?void 0:d.dataLabels)||void 0===c?void 0:c.pieSeriesName)||void 0===h?void 0:h.anchor)}}function Cn(e,t,i){var s,n,o;const a=_t(t),r=function(e,t,i){var s,n;const o=null===(s=e)||void 0===s?void 0:s.theme;return(null===(n=o)||void 0===n?void 0:n.series)?(i?Ut(t):Object.keys(t)).reduce(((e,t)=>(delete e[t],e)),Object.assign({},o.series)):{}}(e,t,a);let l={hasOuterAnchor:Zt(e,t),hasOuterAnchorPieSeriesName:Kt(e,t)};a&&(l=Ut(t).reduce(((i,s)=>Object.assign(Object.assign({},i),{[s]:kn(e,t,s)})),{}));const d=null===(o=null===(n=null===(s=e)||void 0===s?void 0:s.theme)||void 0===n?void 0:n.chart)||void 0===o?void 0:o.fontFamily,c=L(function(e,t,i="Arial",s=!1){const n=Object.keys(e).reduce(((e,s)=>Object.assign(Object.assign({},e),{series:Object.assign(Object.assign({},e.series),{[s]:rn(i,s,t)})})),Js(e,i));if(s){const o=Ut(e);n.series.pie=o.reduce(((e,n)=>Object.assign(Object.assign({},e),{[n]:rn(i,"pie",t[n],s)})),{})}return n}(t,l,d,a),function(e,t,i,s){var n;const o=function(e){var t,i,s;const n=Object.assign({},e.theme);if(!Array.isArray(n.yAxis))return n;const o=Ks(null===(s=null===(i=null===(t=e)||void 0===t?void 0:t.theme)||void 0===i?void 0:i.chart)||void 0===s?void 0:s.fontFamily),a=n.yAxis.map((e=>L({title:Object.assign({},o)},Object.assign({},e))));return Object.assign(Object.assign({},n),{yAxis:a})}(e);if(!(null===(n=o)||void 0===n?void 0:n.series))return Object.assign({},o);const a=Object.assign(Object.assign({},o),{series:{}}),r=Object.keys(t),l=r.length>1;if(s){const e=Ut(t);a.series={pie:e.reduce(((e,t)=>{var s;return Object.assign(Object.assign({},e),{[t]:L(null===(s=o.series)||void 0===s?void 0:s[t],D(i,"colors"))})}),{})}}else a.series=l?Object.assign({},r.reduce(((e,t)=>{var s;return Object.assign(Object.assign({},e),{[t]:L(null===(s=o.series)||void 0===s?void 0:s[t],D(i,"colors"))})}),{})):{[r[0]]:o.series};return a}(e,t,r,a));return t.heatmap||function(e,t,i,s,n){var o,a;let r=0;const l=[...(a=null===(o=i)||void 0===o?void 0:o.colors,null!=a?a:[]),...Zs.colors];(s?Ut(t):Object.keys(t)).forEach(((i,o)=>{var a;const d=t[i]||[],c=d.filter((e=>e.colorByCategories)).length>0;let h;h=s?t.pie[o].data.length:c?d.filter((e=>!e.colorByCategories)).length+n.length:t[i].length;const u=s?e.series.pie:e.series;(null===(a=u[i])||void 0===a?void 0:a.colors)||(u[i]=Object.assign(Object.assign({},u[i]),{colors:l.slice(r,r+h)}),r+=h)}))}(c,t,r,a,i),function(e){["vertical","horizontal"].reduce(((e,t)=>(e[t]||(e[t]={lineColor:e.lineColor}),e)),e.plot)}(c),c}const Tn={name:"theme",state:({options:e,series:t,categories:i})=>({theme:Cn(e,t,i)}),action:{initThemeState({state:e,initStoreState:t}){e.theme=Cn(e.options,t.series,t.categories)}},observe:{updateTheme(){this.dispatch("initThemeState")}}},Rn=Tn;class Dn{constructor(){this.handlers=[]}on(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)}emit(e,...t){var i;null===(i=this.handlers[e])||void 0===i||i.forEach((e=>e(...t)))}}class jn{constructor({store:e,eventBus:t}){this.components=[],this.store=e,this.eventBus=t}add(e,t){const i=new e({store:this.store,eventBus:this.eventBus});i.initialize&&i.initialize(t);let s=(...e)=>{i.render(e[0],e[1]),i.sync(),this.eventBus.emit("needLoop")};this.store.observe(((...e)=>{s(...e)})),s=B(s),this.components.push(i)}remove(e){this.components=this.components.filter((t=>!(t instanceof e)))}clear(){this.components=[],this.eventBus.emit("needDraw")}invoke(e,t){this.components.forEach((i=>{const s=i[e];s&&s.call(i,t)}))}forEach(e){this.components.forEach(e)}}class Bn{constructor(e){this.width=0,this.height=0,this.brushes={},this.chart=e}showUnsupportedCanvasFeatureError(){this.ctx.setLineDash||console.warn("DashSegments option is available from IE11 and above.")}setup(){const{height:e,width:t}=this.chart.store.state.chart;if(!this.canvas){const e=document.createElement("canvas");this.canvas=e,this.chart.el.appendChild(e),e.addEventListener("click",this.chart),e.addEventListener("mousemove",this.chart),e.addEventListener("mousedown",this.chart),e.addEventListener("mouseup",this.chart),e.addEventListener("mouseout",this.chart);const t=e.getContext("2d");t&&(this.ctx=t)}this.setSize(t,e),this.showUnsupportedCanvasFeatureError()}setSize(e,t){this.canvas.style.width=`${e}px`,this.canvas.style.height=`${t}px`;let i=1;"deviceXDPI"in window.screen?i=window.screen.deviceXDPI/window.screen.logicalXDPI:window.hasOwnProperty("devicePixelRatio")&&(i=window.devicePixelRatio),this.width=e*i||0,this.height=t*i||0,this.scaleCanvasRatio(i)}scaleCanvasRatio(e){this.canvas.width=this.width,this.canvas.height=this.height,this.ctx.scale(e,e)}add(e,t){this.brushes[e]=t}addGroups(e){e.forEach((e=>{Object.keys(e).forEach((t=>{this.add(t,e[t])}))}))}paint(e,t){if(!this.brushes[e])throw new Error(`Brush don't exist in painter: ${e}`);this.brushes[e](this.ctx,t)}paintForEach(e){e.forEach((e=>this.paint(e.type,e)))}beforeFrame(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle="transparent",this.ctx.fillRect(0,0,this.width,this.height)}beforeDraw(e,t){this.ctx.save(),this.ctx.translate(e,t)}afterDraw(){this.ctx.restore()}}class Ln{constructor(){this.anims=[],this.state="IDLE",this.requestId=null,this.firstRendering=!0}add({chart:e,duration:t,requester:i,onCompleted:s=(()=>{}),onFrame:n=(t=>{this.firstRendering||e.update(t),this.firstRendering&&(e.initUpdate(t),1===t&&(this.firstRendering=!1))})}){this.anims.length&&this.reset(),"IDLE"===this.state&&(this.anims.push({chart:e,requester:i,duration:t,onFrame:n,onCompleted:s,start:null,current:null,completed:!1}),this.start())}reset(){this.anims.forEach((e=>{e.current=1,e.onFrame(e.current),e.completed=!0})),this.anims=[],this.cancelAnimFrame(),this.state="IDLE",this.requestId=null}start(){this.anims.length&&(this.state="RUNNING",this.runFrame())}runFrame(){this.requestId=window.requestAnimationFrame((e=>{this.runAnims(e)}))}runAnims(e){this.next(e),this.anims.length?this.runFrame():(this.state="IDLE",this.requestId=null)}next(e){this.anims.forEach((t=>{x(t.start)&&(t.start=e),Object.defineProperty(t.chart,"___animId___",{value:e,enumerable:!1,writable:!1,configurable:!0}),t.current=t.duration?Math.min((e-t.start)/t.duration,1):1,t.onFrame(t.current),t.completed=1===t.current})),this.anims.forEach((t=>{t.chart.___animId___===e&&(t.chart.draw(),delete t.chart.___animId___),t.completed&&(this.cancelAnimFrame(),t.onCompleted(),t.chart.eventBus.emit("animationCompleted",t.requester))})),this.anims=this.anims.filter((e=>!e.completed))}cancelAnimFrame(){this.requestId&&window.cancelAnimationFrame(this.requestId)}}const Pn={circle:(e,t,i)=>{const{x:s,y:n}=e,{x:o,y:a,radius:r,detectionSize:l}=t,{x:d,y:c}=i,h=b(l)?10:l;return Math.pow(s-(o+d),2)+Math.pow(n-(a+c),2)<Math.pow(r+h,2)},rect:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a,width:r,height:l}=t,{x:d,y:c}=i;return s>=o+d&&s<=o+d+r&&n>=a+c&&n<=a+c+l},sector:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a,radius:{outer:r,inner:l},degree:{start:d,end:c},drawingStartAngle:h,clockwise:u}=t,{x:p,y:m}=i,g=s-(o+p),v=n-(a+m),f=Math.pow(g,2)+Math.pow(v,2)<Math.pow(r,2),b=Math.pow(g,2)+Math.pow(v,2)>Math.pow(l,2),x=f&&b,y=function(e,t=$e){return(e*Xe/Math.PI-t+Fe)%Fe}(Math.atan2(v,g),h);return x&&Ze(u,d,c,y)},line:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a}=i,{x:r,y:l,x2:d,y2:c,detectionSize:h=3}=t,u=c-l,p=d-r;let m=!1;if(0===u){const e=Math.min(r,d),t=Math.max(r,d);m=s-o>=e&&s-o<=t&&n>=l+a-h&&n<=l+a+h}else if(0===p){const e=Math.min(l,c),t=Math.max(l,c);m=n-a>=e&&n-a<=t&&s>=r+o-h&&s<=r+o+h}else m=u/p*(s-(r+o))==n-(l+a);return m},boxPlot:(e,t,i={x:0,y:0,width:0,height:0})=>["rect","median","minimum","maximum","upperWhisker","lowerWhisker"].some((s=>!!t[s]&&("rect"===s?Pn.rect(e,t[s],i):Pn.line(e,t[s],i)))),clockHand:(e,t,i={x:0,y:0,width:0,height:0})=>{const{x:s,y:n}=e,{x:o,y:a}=i,{x:r,y:l,x2:d,y2:c,detectionSize:h=5}=t,u=c-l,p=d-r;let m=!1;if(0===u){const e=Math.min(r,d),t=Math.max(r,d);m=s-o>=e&&s-o<=t&&n>=l+a-h&&n<=l+a+h}else if(0===p){const e=Math.min(l,c),t=Math.max(l,c);m=n-a>=e&&n-a<=t&&s>=r+o-h&&s<=r+o+h}else{const e=u/p;m=function({slope:e,yIntercept:t,mouseX:i,mouseY:s,modelXPositions:n,compX:o,compY:a,detectionSize:r=0}){const[l,d]=n,c=e*(i-o)+t;return(l>d&&i>=o+d&&i<=o+l||l<d&&i<=o+d&&i>=o+l)&&c-r+a<=s&&s<=c+r+a}({slope:e,yIntercept:l-e*r,mouseX:s,mouseY:n,modelXPositions:[r,d],compX:o,compY:a,detectionSize:h})}return m}};class En{constructor(e){var t,i,s,n;this.___animId___=null,this.painter=new Bn(this),this.eventBus=new Dn,this.enteredComponents=[],this.animationControlFlag={resizing:!1,updating:!1},this.resizeObserver=null,this.debounceResizeEvent=B((()=>{const{offsetWidth:e,offsetHeight:t}=this.containerEl;this.resizeChartSize(e,t)}),100),this.getCheckedLegend=()=>{const{data:e}=this.store.state.legend;return e.filter((e=>e.checked)).map((e=>R(e,"chartType","label","checked")))},this.getOptions=()=>de(this.store.initStoreState.options),this.on=(e,t)=>{this.eventBus.on(e,t)},this.destroy=()=>{this.componentManager.clear(),this.clearResizeEvent(),this.containerEl.innerHTML=""},this.selectSeries=e=>{if(!this.isSelectableSeries())throw new Error(_);this.eventBus.emit("selectSeries",Object.assign(Object.assign({},e),{state:this.store.state}))},this.unselectSeries=()=>{if(!this.isSelectableSeries())throw new Error(_);this.store.dispatch("setAllLegendActiveState",!0),this.eventBus.emit("resetSelectedSeries")},this.resize=e=>{this.resetSeries(),this.dispatchOptionsEvent("updateOptions",{chart:Object.assign({},e)})},this.resetSeries=()=>{this.eventBus.emit("resetHoveredSeries"),this.eventBus.emit("resetSelectedSeries")},this.setResizeEventListeners=(e,t)=>{var i,s,n,o;const{usingContainerSize:a}=this.store.state,{width:r,height:l}=a,d=null===(s=null===(i=t)||void 0===i?void 0:i.chart)||void 0===s?void 0:s.width,c=null===(o=null===(n=t)||void 0===n?void 0:n.chart)||void 0===o?void 0:o.height,h=V(d),u=V(c);this.store.dispatch("setUsingContainerSize",function(e,t,i,s){const{width:n,height:o}=t,a=V(i),r=V(s);return"updateOptions"===e?{width:b(i)||n===a?n:a,height:b(s)||o===r?o:r}:{width:a,height:r}}(e,a,d,c)),(r||l)&&S(d)&&S(c)?this.clearResizeEvent():r||l||!h&&!u||this.setResizeEvent()};const{el:o,options:a,series:r,categories:l,modules:d}=e;this.modules=null!=d?d:[],(b(a.usageStatistics)||a.usageStatistics)&&function(){const e=location.hostname,t=`TOAST UI chart for ${e}: Statistics`,i=window.localStorage.getItem(t);i&&!function(e){return(new Date).getTime()-e>6048e5}(Number(i))||(window.localStorage.setItem(t,String((new Date).getTime())),setTimeout((()=>{"interactive"!==document.readyState&&"complete"!==document.readyState||function(e,t){const i=Object.keys(t).map(((e,i)=>`${i?"&":""}${e}=${t[e]}`)).join(""),s=document.createElement("img");s.src=`https://www.google-analytics.com/collect?${i}`,s.style.display="none",document.body.appendChild(s),document.body.removeChild(s)}(0,{v:1,t:"event",tid:"UA-129983528-2",cid:e,dp:e,dh:"chart",el:"chart",ec:"use"})}),1e3))}(),this.containerEl=o,this.el=this.createChartWrapper(),this.containerEl.appendChild(this.el),this.animator=new Ln,this.store=new ce({series:r,categories:l,options:a}),this.componentManager=new jn({store:this.store,eventBus:this.eventBus}),this.eventBus.on("needLoop",B((()=>{var e,t;let i=this.getAnimationDuration(null===(e=a.chart)||void 0===e?void 0:e.animation);this.animationControlFlag.resizing&&(i=b(a.responsive)?this.getAnimationDuration():this.getAnimationDuration(null===(t=a.responsive)||void 0===t?void 0:t.animation),this.animationControlFlag.resizing=!1),this.eventBus.emit("loopStart"),this.animator.add({onCompleted:()=>{this.eventBus.emit("loopComplete")},chart:this,duration:i,requester:this})}),10)),this.eventBus.on("needSubLoop",(e=>{this.animator.add(Object.assign(Object.assign({},e),{chart:this}))})),this.eventBus.on("needDraw",B((()=>{this.draw()}),10)),this.initialize(),this.store.observe((()=>{this.painter.setup()})),(V(null===(i=null===(t=a)||void 0===t?void 0:t.chart)||void 0===i?void 0:i.width)||V(null===(n=null===(s=a)||void 0===s?void 0:s.chart)||void 0===n?void 0:n.height))&&this.setResizeEvent()}getAnimationDuration(e){const{firstRendering:t}=this.animator,{resizing:i,updating:s}=this.animationControlFlag;let n;return!t&&!i||b(e)?n=500:y(e)?n=e?500:0:S(e.duration)&&(n=e.duration),s&&(n=0),this.animationControlFlag.updating=!1,n}createChartWrapper(){const e=document.createElement("div");return e.classList.add("toastui-chart-wrapper"),e}resizeChartSize(e,t){this.animationControlFlag.resizing=!0;const{usingContainerSize:{width:i,height:s},chart:{width:n,height:o}}=this.store.state;!i&&!s||!e&&!t||e===n&&t===o?this.animationControlFlag.resizing=!1:(this.resetSeries(),this.store.dispatch("setChartSize",{width:i?e:n,height:s?t:o}),this.draw())}setResizeEvent(){const{usingContainerSize:e}=this.store.state;if(e.height&&!this.containerEl.style.height.length||e.width&&!this.containerEl.style.width.length)throw new Error('To use auto layout, the width or height of the container must be specified as a value such as "%" or "vh", "vw".');"undefined"==typeof ResizeObserver?window.addEventListener("resize",this.debounceResizeEvent):(this.resizeObserver=new ResizeObserver((e=>{e.forEach((()=>{this.debounceResizeEvent()}))})),this.resizeObserver.observe(this.containerEl))}clearResizeEvent(){this.resizeObserver?(this.resizeObserver.unobserve(this.containerEl),this.resizeObserver.disconnect(),this.resizeObserver=null):window.removeEventListener("resize",this.debounceResizeEvent)}handleCanvasMouseEvent(e,t){const i=[];this.componentManager.forEach((s=>{if("mousemove"===e){const e=this.enteredComponents.some((e=>e===s));!function(e,t){const{x:i,y:s,width:n,height:o}=e;return t.x>=i&&t.x<=i+n&&t.y>=s&&t.y<=s+o}(s.rect,t)?e&&s.onMouseoutComponent&&s.onMouseoutComponent():(i.push(s),!e&&s.onMouseenterComponent&&s.onMouseenterComponent())}else"mouseout"===e&&s.onMouseoutComponent&&s.onMouseoutComponent()})),this.enteredComponents=i}handleResponderEvent(e,t){const i=e.type,s=`on${i[0].toUpperCase()+i.substring(1)}`,n=[];this.componentManager.forEach((i=>{if(!i[s])return;if(!Pn.rect(t,i.rect))return;const o=(i.responders||[]).filter((e=>Pn[e.type](t,e,i.rect)));o.length&&n.push({component:i,detected:o}),i[s]({mousePosition:t,responders:o},e)})),this.handleEventForAllResponders&&this.handleEventForAllResponders(e,n,s,t)}handleEvent(e){const{clientX:t,clientY:i,type:s}=e,n=this.painter.ctx.canvas,{width:o,height:a,left:r,top:l}=n.getBoundingClientRect(),d={x:(t-r)/(o/n.offsetWidth),y:(i-l)/(a/n.offsetHeight)};"mousemove"!==s&&"mouseout"!==s||this.handleCanvasMouseEvent(s,d),this.handleResponderEvent(e,d)}initStore(){[me,An,Rn,Ps,wn,ys,As,...this.modules].forEach((e=>this.store.setModule(e)))}initialize(){this.initStore(),this.store.dispatch("initChartSize",this.containerEl)}draw(){this.painter.beforeFrame(),this.componentManager.forEach((e=>{e.isShow&&(this.painter.beforeDraw(e.rect.x,e.rect.y),e.beforeDraw&&e.beforeDraw(this.painter),e.draw(this.painter),this.painter.afterDraw())}))}update(e){this.componentManager.invoke("update",e)}initUpdate(e){this.componentManager.invoke("initUpdate",e)}isSelectableSeries(){var e;return null===(e=this.store.initStoreState.options.series)||void 0===e?void 0:e.selectable}setTooltipOffset(e){const{x:t,y:i}=e;this.store.dispatch("updateOptions",{options:{tooltip:{offsetX:t,offsetY:i}}})}dispatchOptionsEvent(e,t){this.setResizeEventListeners(e,t);const{offsetWidth:i,offsetHeight:s}=this.containerEl;this.store.dispatch(e,{options:t,containerSize:{width:i,height:s}})}}function Wn(e,t=!1){const i={min:Math.min(...e),max:Math.max(...e)};if(1===e.length){const[s]=e;t?(i.min=s,i.max=s):s>0?i.min=0:i.max=0===s?10:0}else 0===i.min&&0===i.max?i.max=10:i.min===i.max&&(i.min-=i.min/10,i.max+=i.max/10);return i}function zn(e,t,i){var s,n,o,a;const r={min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER};return{min:Math.min(t[i].min,(n=null===(s=e[i])||void 0===s?void 0:s.min,null!=n?n:r.min)),max:Math.max(t[i].max,(a=null===(o=e[i])||void 0===o?void 0:o.max,null!=a?a:r.max))}}const In={name:"dataRange",state:()=>({dataRange:{}}),action:{setDataRange({state:e,initStoreState:t}){const{series:i,disabledSeries:s,stackSeries:n,categories:o,options:a}=e,r={},l=ni({series:i,options:a,categories:o}),{labelAxisName:d,valueAxisName:c}=ri(l,i);Object.keys(i).forEach((e=>{var l,h;r[e]={};let u=i[e].data.flatMap((({data:e,name:t})=>s.includes(t)?[]:e));const p=F(u);if(ji(t.series)){const t=!!(null===(l=a.xAxis)||void 0===l?void 0:l.date),{yAxisValues:i,xAxisValues:s}=function(e,t,i){const s=e.filter((e=>!x(e))).map((e=>Ti(e)));return{xAxisValues:t.map((e=>Number(i?new Date(e):e))),yAxisValues:s}}(u,o,t);u=i,r[e][d]=Wn([...s],!0)}else i[e].data.length?Ss(p)?u=u.reduce(((e,t)=>x(t)?e:Array.isArray(t)?[...e,...t]:[...t]),[]):n&&(null===(h=n[e])||void 0===h?void 0:h.stack)?u=n[e].dataRangeValues:"boxPlot"===e?u=function(e,t){return e[t].data.flatMap((({data:e,outliers:t=[]})=>[...(null!=e?e:[]).flatMap((e=>e)),...(null!=t?t:[]).flatMap((e=>e))]))}(i,e):"bullet"===e&&(u=function(e,t){return e[t].data.flatMap((({data:e,markers:t,ranges:i})=>[e,...(null!=t?t:[]).flatMap((e=>e)),...(null!=i?i:[]).flatMap((e=>e))]))}(i,e)):u=[];T(["bar","column","radar","bullet"],e)&&u.push(0),function({options:e,seriesName:t,values:i,valueAxisName:s,seriesDataRange:n}){var o;let a;if(T([Bt.X,Bt.CIRCULAR,Bt.VERTICAL],s))a=[s];else{const i=e,{secondaryYAxis:n}=hi(i);a=ci(i)&&(null===(o=n)||void 0===o?void 0:o.chartType)?[n.chartType===t?"secondaryYAxis":"yAxis"]:pi(i,s)}a.forEach((e=>{n[t][e]=Wn([...new Set(i)])}))}({options:a,seriesName:e,values:u,valueAxisName:c,seriesDataRange:r})}));const h=function(e){return Object.values(e).reduce(((e,t)=>(t.xAxis&&(e.xAxis=zn(e,t,"xAxis")),t.yAxis&&(e.yAxis=zn(e,t,"yAxis")),t.secondaryYAxis&&(e.secondaryYAxis=zn(e,t,"secondaryYAxis")),t.circularAxis&&(e.circularAxis=zn(e,t,"circularAxis")),t.verticalAxis&&(e.verticalAxis=zn(e,t,"verticalAxis")),e)),{})}(r);he(e.dataRange,h)}},observe:{updateDataRange(){this.dispatch("setDataRange")}}},Yn=In,Hn=[1,2,5,10];function Nn(e){const t=0===e?1:Math.log(Math.abs(e))/Math.LN10;return Math.pow(10,Math.floor(t))}function Xn(e,t){const i=1/Math.min(Nn(e),Nn(t));return Math.ceil(e*i/(t*i))}function Fn(e){return S(e)}function $n(e,t){const i=Fn(t.stepSize)?e.stepSize:function(e){const t=Nn(e);return function(e){let t=0;for(let i=0,s=Hn.length;i<s&&(t=Hn[i],!(e<=(t+(Hn[i+1]||t))/2));i+=1);return t}(e/t)*t}(e.stepSize),s=function(e,t){let{min:i,max:s}=e;const n=Math.min(Nn(s),Nn(t)),o=n>1?1:1/n,a=t*o;return s=Math.ceil(s*o/a)*a/o,i=i>t?Math.floor(i*o/a)*a/o:i<0?-Math.ceil(Math.abs(i)*o/a)*a/o:0,{min:i,max:s}}(e.limit,i),n=Xn(Math.abs(s.max-s.min),i);return{limit:{min:s.min,max:s.max},stepSize:i,stepCount:n}}function Gn(e,t){var i,s,n,o,a,r;return{max:(s=null===(i=t)||void 0===i?void 0:i.max,null!=s?s:e.max),min:(o=null===(n=t)||void 0===n?void 0:n.min,null!=o?o:e.min),stepSize:(r=null===(a=t)||void 0===a?void 0:a.stepSize,null!=r?r:"auto")}}function Vn(e){const{dataRange:t,scaleOption:i,offsetSize:s,minStepSize:n,useSpectrumLegend:o}=e,a=Gn(t,i),r=function(e,t,i=1){const{min:s,max:n}=e,o=Math.abs(n-s),a=o/t;let r=Math.ceil(t/88),l=a*(t/r);return Fn(e.stepSize)?(l=e.stepSize,r=o/l):S(i)&&l<i&&(l=i,r=o/l),{limit:{min:s,max:n},stepSize:l,stepCount:r}}(a,s,n),l=$n(r,a),d=o?null:function(e,{min:t,max:i},s){var n,o;const a=e.limit,r=S(null===(n=s)||void 0===n?void 0:n.min),l=S(null===(o=s)||void 0===o?void 0:o.max),d=!r&&a.min===t&&0!==a.min,c=!l&&a.max===i&&0!==a.max;return d||c?{min:d,max:c}:null}(l,a,i);if(d){const{stepSize:e,limit:t}=l;l.limit=function({min:e,max:t},i,s){return{min:s.min?e-i:e,max:s.max?t+i:t}}(t,e,d)}return l}const _n={year:31536e6,month:26784e5,week:6048e5,date:864e5,hour:36e5,minute:6e4,second:1e3};const Un=["year","month","week","date","hour","minute","second"];function qn(e){var t;return!("percent"!==(null===(t=e)||void 0===t?void 0:t.type))}function Zn(e){return!Array.isArray(e)}function Kn(e){return j(e,["series","stack"])||j(e,["series","column","stack"])||j(e,["series","area","stack"])}function Jn(e){const t=e.length,i=e.map((({rawData:e})=>e.length)),s=Math.max(...i),n=[];for(let i=0;i<s;i+=1){const s=[];for(let n=0;n<t;n+=1)s.push(e[n].rawData[i]);n[i]={values:s,sum:N(s),total:{positive:N(s.filter((e=>e>=0))),negative:N(s.filter((e=>e<0)))}}}return n}function Qn(e){if(!e)return;const t={type:"normal",connector:!1};return function(e){return O(e)}(e)?Object.assign(Object.assign({},t),e):t}function eo(e){const t=e.map((({total:e})=>e.positive));return[...e.map((({total:e})=>e.negative)),...t]}function to(e){if(!Zn(e))return e;let t=[];return Zn(e)&&Object.keys(e).forEach((i=>{t=[...t,...e[i]]})),t}function io(e,t,i){const{hasPositive:s,hasNegative:n}=function(e){return{hasNegative:e.map((({total:e})=>e.negative)).some((e=>e<0)),hasPositive:e.map((({total:e})=>e.positive)).some((e=>e>=0))}}(e);if("percent"===t){if(i)return"divergingPercentStack";if(n&&s)return"dualPercentStack";if(!n&&s)return"percentStack";if(n&&!s)return"minusPercentStack"}}function so(e,t){const i={};return Object.keys(e).forEach((e=>{const s=e,n=Kn(t);n?(i[s]||(i[s]={}),i[s].stack=Qn(n)):"radialBar"===e&&(i[e]={stack:!0})})),i}const no={name:"stackSeriesData",state:({series:e,options:t})=>({stackSeries:so(e,t)}),action:{setStackSeriesData({state:e}){const{series:t,stackSeries:i,options:s}=e,n=Kn(s),o={};Object.keys(t).forEach((a=>{var r,l;const d=t[a],{data:c,seriesCount:h,seriesGroupCount:u}=d,p="radialBar"===a;n?(i[a]||(i[a]={}),i[a].stack=Qn(n)):p||(i[a]=null,delete i[a]);const{stack:m}=i[a]||{},g=!!(null===(r=s.series)||void 0===r?void 0:r.diverging);if(m){const t=c.some((e=>e.hasOwnProperty("stackGroup")))?function(e){const t={};return[...new Set(e.map((({stackGroup:e})=>e)))].forEach((i=>{const s=e.filter((({stackGroup:e})=>i===e));t[i]=Jn(s)})),t}(c):Jn(c),i=null!=(l=m.type)?l:"normal",s=function(e){let t=[];if(Array.isArray(e))t=[0,...eo(e)];else for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t=[0,...t,...eo(e[i])]);return t}(t);o[a]={data:c,seriesCount:h,seriesGroupCount:u,stackData:t,dataRangeValues:s,scaleType:io(to(t),i,g)},e.stackSeries[a].stackData=t}he(e.stackSeries,o)}))}},observe:{updateStackSeriesData(){this.dispatch("setStackSeriesData")}}},oo=no;function ao(e,t,i,s){var n,o;const{dataRange:a,layout:r,series:l,options:d}=e,c=e.categories,h=e.rawCategories,{labelSizeKey:u}=li(t),p=f(null===(n=d.xAxis)||void 0===n?void 0:n.date),m={dataRange:a[s],offsetSize:Math.max(r.plot[u],1),scaleOption:i[s],rawCategoriesSize:h.length};let g;return a[s]&&(g=p?function(e){const{dataRange:t,rawCategoriesSize:i,scaleOption:s}=e,n=function(e,t,i){var s,n;const o=function({max:e,min:t},i){const s=e-t,n=Un.length-1;let o;return s?Un.every(((e,t)=>{const a=_n[e],r=Math.floor(s/a);let l;return r&&(l=t<n&&r<2&&r<i?t+1:t,o=Un[l]),!f(l)})):o="second",o}(e,t),a=null!==(n=null===(s=i)||void 0===s?void 0:s.stepSize)&&void 0!==n?n:_n[o],r=Gn(e,i),l=xt(Number(new Date(r.min)),a);return{divisionNumber:a,minDate:l,limit:{min:0,max:xt(Number(new Date(r.max)),a)-l}}}(t,i,s),{minDate:o,divisionNumber:a,limit:r}=n;return function(e,t,i){const{limit:s,stepSize:n}=e,{min:o,max:a}=s;return Object.assign(Object.assign({},e),{stepSize:bt(n,i),limit:{min:bt(ft(o,t),i),max:bt(ft(a,t),i)}})}(Vn(Object.assign(Object.assign({},D(e,"scaleOption")),{dataRange:r,minStepSize:1})),o,a)}(m):Vn(m)),l.line&&c&&!(null===(o=d.xAxis)||void 0===o?void 0:o.pointOnColumn)&&(g=function(e,t,i){const s=Ci(t,Bt.X),n=i.map((e=>Number(s?new Date(e):e))),{limit:o,stepSize:a}=e,r=Math.min(...n),l=Math.max(...n),d=Object.assign({},o),c=l-r;let h=0,u=1;return c&&(o.min<r&&(d.min+=a,h=(d.min-r)/c,u-=h),o.max>l&&(d.max-=a,u-=(l-d.max)/c)),{limit:d,stepCount:Xn(Math.abs(d.max-d.min),a),stepSize:a,positionRatio:h,sizeRatio:u}}(g,d,c)),g}const ro={name:"scale",state:()=>({scale:{}}),action:{setScale({state:e,initStoreState:t}){const{series:i,options:s,categories:n}=e,o=ni({series:i,options:s,categories:n}),{labelAxisName:a,valueAxisName:r}=ri(o,i),l=function(e,t,i){var s,n,o,a,r,l;const d={};if(ai(t))d[i]=null===(n=null===(s=e)||void 0===s?void 0:s[i])||void 0===n?void 0:n.scale;else{const{yAxis:t,secondaryYAxis:i}=hi(e);d.xAxis=null===(a=null===(o=e)||void 0===o?void 0:o.xAxis)||void 0===a?void 0:a.scale,d.yAxis=null===(r=t)||void 0===r?void 0:r.scale,i&&(d.secondaryYAxis=null===(l=i)||void 0===l?void 0:l.scale)}return d}(s,i,r),d=ji(t.series),c={};pi(s,r).forEach((t=>{c[t]=function(e,t,i,s,n){const{dataRange:o,layout:a,series:r,stackSeries:l}=e,{valueSizeKey:d}=li(t);let c;if(function(e){return!!e&&Object.keys(e).some((t=>qn(e[t].stack)))}(l))Object.keys(r).forEach((e=>{var t;t=l[e].scaleType,c="minusPercentStack"===t?{limit:{min:-100,max:0},stepSize:25,stepCount:5}:"dualPercentStack"===t||"divergingPercentStack"===t?{limit:{min:-100,max:100},stepSize:25,stepCount:9}:{limit:{min:0,max:100},stepSize:25,stepCount:5}}));else if(n){const e={dataRange:o[s],offsetSize:Math.max(a.plot[d],1),scaleOption:i[s]};c=Vn(e)}else c=Vn({dataRange:o[s],offsetSize:Math.max(a.plot[d],1),scaleOption:i[s]});return c}(e,o,l,t,d)})),d&&(c[a]=ao(e,o,l,a)),e.scale=c}},observe:{updateScale(){this.dispatch("setScale")}}},lo=ro;function co(e,t){return e.some((({id:e})=>!b(e)&&!b(t.id)&&e===t.id))}function ho(e,t,i=!1){return i?Number(new Date(e)):w(e)?function(e,t){return t.findIndex((t=>t===String(e)))}(e,t):e}const uo={name:"plot",state:({options:e})=>{var t,i,s;return{plot:{visible:(s=null===(i=null===(t=e)||void 0===t?void 0:t.plot)||void 0===i?void 0:i.visible,null==s||s),lines:[],bands:[]}}},action:{setPlot({state:e}){var t,i,s,n,o,a,r,l;const{series:d,options:c}=e;if(!d.area&&!d.line)return;const h=e.rawCategories,u=c,p=function(e,t,i=[]){return i.map((({value:i,color:s,opacity:n})=>({value:ho(i,e,t),color:Ae(s,n)})))}(h,!!(null===(i=null===(t=c)||void 0===t?void 0:t.xAxis)||void 0===i?void 0:i.date),null===(n=null===(s=u)||void 0===s?void 0:s.plot)||void 0===n?void 0:n.lines),m=function(e,t,i=[]){return i.flatMap((({range:i,mergeOverlappingRanges:s=!1,color:n,opacity:o})=>{const a=Ae(n,o),r=(Ss(i[0])?i:[i]).map((i=>({range:i.map((i=>ho(i,e,t))),color:a})));return s?function(e){const t=e.reduce(((e,{range:t})=>{const[i,s]=e,[n,o]=t;return[Math.min(i,n),Math.max(s,o)]}),[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER]);return{range:t,color:e[0].color}}(r):r}))}(h,!!(null===(a=null===(o=c)||void 0===o?void 0:o.xAxis)||void 0===a?void 0:a.date),null===(l=null===(r=u)||void 0===r?void 0:r.plot)||void 0===l?void 0:l.bands);he(e.plot,{lines:p,bands:m})},addPlotLine({state:e},{data:t}){var i,s,n;const o=null!=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.lines)?n:[];co(o,t)||this.dispatch("updateOptions",{options:{plot:{lines:[...o,t]}}})},addPlotBand({state:e},{data:t}){var i,s,n;const o=null!=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands)?n:[];co(o,t)||this.dispatch("updateOptions",{options:{plot:{bands:[...o,t]}}})},removePlotLine({state:e},{id:t}){var i,s,n;const o=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.lines,null!=n?n:[]).filter((({id:e})=>e!==t));this.dispatch("updateOptions",{options:{plot:{lines:o}}})},removePlotBand({state:e},{id:t}){var i,s,n;const o=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands,null!=n?n:[]).filter((({id:e})=>e!==t));this.dispatch("updateOptions",{options:{plot:{bands:o}}})}},observe:{updatePlot(){this.dispatch("setPlot")}}},po=uo;function mo(e,t){return`<span class="toastui-chart-series-name">\n    <i class="toastui-chart-icon" style="background: ${t}"></i>\n    <span class="toastui-chart-name">${e}</span>\n  </span>`}function go(e,t){return`<div class="toastui-chart-tooltip-series">\n    <span class="toastui-chart-series-name">${e}</span>\n    <span class="toastui-chart-series-value">${t}</span>\n  </div>`}const vo={default:function(e,{header:t,body:i},s){const{borderColor:n,borderWidth:o,background:a,borderRadius:r,borderStyle:l}=s;return`<div class="toastui-chart-tooltip" style="border: ${o}px ${l} ${n};border-radius: ${r}px;background: ${a};">${t}${i}</div>`},defaultHeader:function({category:e},t){return e?`<div class="toastui-chart-tooltip-category" style="${Re(t.header)}">\n        ${e}\n      </div>`:""},defaultBody:function({data:e},t){return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Re(t.body)}">\n      ${e.map((({label:e,color:t,formattedValue:i})=>`<div class="toastui-chart-tooltip-series">\n                ${mo(e,t)}\n                <span class="toastui-chart-series-value">${i}</span>\n              </div>`)).join("")}\n    </div>`},boxPlot:function({data:e},t){const i=e.reduce(((e,t,i)=>i?(e.category===t.category&&e.label===t.label&&(e.value=[...e.value,...t.value]),e):t),{});return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Re(t.body)}">\n      ${[i].map((({label:e,color:t,value:i})=>`<div class="toastui-chart-tooltip-series">\n              ${mo(e,t)}\n            </div>\n            <div>\n          ${i.map((({title:e,formattedValue:t})=>go(e,t))).join("")}\n            </div>`)).join("")}\n    </div>`},bullet:function({data:e},t){return e.length>1?function(e,t){const i=e.map((({value:e})=>e[0])),[s,n,o]=["Actual","Range","Marker"].map((e=>function(e,t){return e.filter((({title:e})=>e===t)).sort(((e,t)=>Ss(e.value)&&Ss(t.value)?e.value[0]-t.value[0]:S(e.value)&&S(t.value)?e.value-t.value:0)).map((({formattedValue:e,color:t})=>function(e,t){return`<div class="toastui-chart-tooltip-series">\n    <i class="toastui-chart-icon" style="background: ${e}"></i>\n    <span class="toastui-chart-series-value">${t}</span>\n  </div>`}(t,e))).join("")}(i,e)));return`<div class="toastui-chart-tooltip-category" style="${Re(t.header)}">\n      ${e[0].label}\n    </div>\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Re(t.body)}">\n      ${s?'<div class="toastui-chart-tooltip-title">Actual</div>':""} ${s}\n      ${n?'<div class="toastui-chart-tooltip-title">Ranges</div>':""} ${n}\n      ${o?'<div class="toastui-chart-tooltip-title">Markers</div>':""} ${o}\n    </div>`}(e,t):function(e,t){return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Re(t.body)}">\n      ${e.map((({label:e,color:t,value:i})=>`<div class="toastui-chart-tooltip-series">${mo(e,t)}</div>\n            ${i.map((({title:e,formattedValue:t})=>go(e,t))).join("")}`)).join("")}\n    </div>`}(e,t)},pie:function({data:e},t){return`\n    <div class="toastui-chart-tooltip-series-wrapper" style="${Re(t.body)}">\n      ${e.map((({label:e,color:t,formattedValue:i,percentValue:s})=>`<div class="toastui-chart-tooltip-series">\n          ${mo(e,t)}\n          <span class="toastui-chart-series-value">${qt(s)}&nbsp;&nbsp;(${i})</span>\n        </div>`)).join("")}\n    </div>`},heatmap:function({data:e},t){return`${e.map((({label:e,color:i,formattedValue:s})=>`<div class="toastui-chart-tooltip-category" style="${Re(t.header)}">\n          ${e}\n        </div>\n        <div class="toastui-chart-tooltip-series-wrapper" style="${Re(t.body)}">\n          <div class="toastui-chart-tooltip-series">\n            ${mo(s,i)}\n          </div>\n        </div>`)).join("")}`}};function fo(e,t){return e.querySelectorAll(t)}const bo=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),xo=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g"),yo=["script","iframe","textarea","form","button","select","input","meta","style","link","title","embed","object"],So=/href|src|background/gi,wo=/((java|vb|live)script|x):/gi,Mo=/^on\S+/;class Oo extends jt{constructor(){super(...arguments),this.tooltipInfoModels={},this.onSeriesPointHovered=({models:e,name:t})=>{var i;this.tooltipInfoModels[t]=(null===(i=e)||void 0===i?void 0:i.length)?[...e]:[],this.getTooltipInfoModels().length?this.renderTooltip():this.removeTooltip()}}isTooltipContainerOverflow(e,t){const{width:i,height:s}=this.tooltipContainerEl.getBoundingClientRect(),{x:n,y:o,width:a,height:r}=this.rect;return{overflowX:e>n+a||e+i>n+a,overflowY:t>o+r||t+s>o+r}}getPositionInRect(e){const{target:t}=e,i=this.rect.x+e.x,s=this.rect.y+e.y;let n=i+t.radius+t.width+this.offsetX,o=s+this.offsetY;const{overflowX:a,overflowY:r}=this.isTooltipContainerOverflow(n,o),{width:l,height:d}=this.tooltipContainerEl.getBoundingClientRect();return a&&(n=i-(l+t.radius+this.offsetX)>0?i-(l+t.radius+this.offsetX):i+this.offsetX),r&&(o=s+t.height-(d+this.offsetY)>0?s+t.height-(d+this.offsetY):o),{x:n,y:o}}setTooltipPosition(e){const{x:t,y:i}=this.getPositionInRect(e);this.tooltipContainerEl.style.transform=Ce(t,i)}getTooltipInfoModels(){return Object.values(this.tooltipInfoModels).flatMap((e=>e))}renderTooltip(){const e=this.getTooltipInfoModels().reduce(((e,t)=>{const{data:i,x:s,y:n,radius:o,width:a,height:r}=t;return e.x=e.x?(e.x+s)/2:s,e.y=e.y?(e.y+n)/2:n,S(o)&&(e.target.radius=o),a&&(e.target.width=a),r&&(e.target.height=r),e.data.push(Object.assign(Object.assign({},i),{value:Array.isArray(i.value)?i.value.map((e=>Object.assign(Object.assign({},e),{formattedValue:this.getFormattedValue(e.value,i)}))):i.value,formattedValue:this.getFormattedValue(i.value,i)})),!e.category&&i.category&&(e.category=i.category),i.templateType&&(e.templateType=i.templateType),e}),{type:"tooltip",x:0,y:0,data:[],target:{radius:0,width:0,height:0}});var t;this.tooltipContainerEl.innerHTML=function(e){const t=document.createElement("div");return w(e)?(e=e.replace(/<!--[\s\S]*?-->/g,""),t.innerHTML=e):t.appendChild(e),function(e){fo(e,yo.join(",")).forEach((e=>{!function(e){e.parentNode&&e.parentNode.removeChild(e)}(e)}))}(t),function(e){fo(e,"*").forEach((e=>{const{attributes:t}=e;!function(e,t){t.forEach((({name:t})=>{Mo.test(t)&&(e[t]=null),e.getAttribute(t)&&e.removeAttribute(t)}))}(e,function(e){let t=[];try{t=Array.prototype.slice.call(e)}catch(i){!function(e,t,i=null){for(let s=0,n=e.length;s<n&&!1!==t.call(i,e[s],s,e);s+=1);}(e,(function(e){t.push(e)}))}return t}(t).filter((e=>{const{name:t,value:i}=e,s=t.match(bo),n=t.match(xo),o=s&&(a=i,t.match(So)&&a.match(wo));var a;return!s&&!n||o})))}))}(t),t.innerHTML}(this.templateFunc(e,{header:vo.defaultHeader(e,this.theme),body:(t=e.templateType,vo[t||"defaultBody"])(e,this.theme)},this.theme)),this.setTooltipPosition(e)}initialize({chartEl:e}){this.type="tooltip",this.name="tooltip",this.chartEl=e,this.tooltipContainerEl=document.createElement("div"),this.tooltipContainerEl.classList.add("toastui-chart-tooltip-container");const{width:t,height:i,top:s,left:n}=this.chartEl.getBoundingClientRect();this.tooltipContainerEl.style.transform=Ce(n+t/2,s+i/2),this.chartEl.appendChild(this.tooltipContainerEl),this.eventBus.on("seriesPointHovered",this.onSeriesPointHovered)}removeTooltip(){this.tooltipContainerEl.innerHTML=""}setTooltipTransition(e){var t;const i=null===(t=e.tooltip)||void 0===t?void 0:t.transition;y(i)&&i?this.tooltipContainerEl.style.transition="transform 0.2s ease":w(i)&&(this.tooltipContainerEl.style.transition=i)}render({layout:e,options:t,theme:i}){var s,n,o,a,r,l,d,c,h,u,p;this.setTooltipTransition(t),this.rect=e.plot,this.theme=i.tooltip,this.templateFunc=null!=(o=null===(n=null===(s=t)||void 0===s?void 0:s.tooltip)||void 0===n?void 0:n.template)?o:vo.default,this.offsetX=null!=(l=null===(r=null===(a=t)||void 0===a?void 0:a.tooltip)||void 0===r?void 0:r.offsetX)?l:10,this.offsetY=null!=(h=null===(c=null===(d=t)||void 0===d?void 0:d.tooltip)||void 0===c?void 0:c.offsetY)?h:0,this.formatter=null===(p=null===(u=t)||void 0===u?void 0:u.tooltip)||void 0===p?void 0:p.formatter}getFormattedValue(e,t){return this.formatter?this.formatter(e,t):function(e){let t="";return t=Ss(e)?`${e[0]} ~ ${e[1]}`:O(e)&&!Array.isArray(e)?`(${e.x}, ${e.y})`+(function(e){return e.hasOwnProperty("r")}(e)?`, r: ${e.r}`:""):String(e),t}(e)}}function Ao({axisData:e,offsetSize:t,value:i,startIndex:s=0}){const n=function(e,t=0){return~~e?e-t:e}(i,s),o=Rt(e,t,i,n);return o>0?Math.min(t,o):0}function ko(e,t){return e?t.xAxis:t.yAxis}class Co extends jt{constructor(){super(...arguments),this.models={plot:[],line:[],band:[]},this.startIndex=0}initialize(){this.type="plot"}getPlotAxisSize(e){return{offsetSize:e?this.rect.width:this.rect.height,anchorSize:e?this.rect.height:this.rect.width}}renderLines(e,t,i=[]){return i.map((({value:i,color:s})=>{const{offsetSize:n}=this.getPlotAxisSize(!0),o=Ao({axisData:ko(!0,e),offsetSize:n,value:i,categories:t,startIndex:this.startIndex});return this.makeLineModel(!0,o,{color:s})}))}renderBands(e,t,i=[]){const{offsetSize:s,anchorSize:n}=this.getPlotAxisSize(!0);return i.map((({range:i,color:o})=>{const[a,r]=i.map((i=>Ao({axisData:ko(!0,e),offsetSize:s,value:i,categories:t,startIndex:this.startIndex})));return{type:"rect",x:Mt(a),y:Mt(0),width:r-a,height:n,color:o}}))}renderPlotLineModels(e,t,i={}){var s,n,o;const{size:a,startPosition:r,axes:l}=i,{lineColor:d,lineWidth:c,dashSegments:h}=this.theme[t?"vertical":"horizontal"],u=(null===(o=t?null===(s=l)||void 0===s?void 0:s.xAxis:null===(n=l)||void 0===n?void 0:n.yAxis)||void 0===o?void 0:o.tickInterval)||1;return e.filter(((e,t)=>!(t%u))).map((e=>this.makeLineModel(t,e,{color:d,lineWidth:c,dashSegments:h},null!=a?a:this.rect.width,null!=r?r:0)))}renderPlotsForCenterYAxis(e){const{xAxisHalfSize:t,secondStartX:i,yAxisHeight:s}=e.centerYAxis,n=e.xAxis.tickCount,o=[...this.renderPlotLineModels(wt(t,n),!0),...this.renderPlotLineModels(wt(t,n,i),!0)],a=wt(s,e.yAxis.tickCount);return[...o,...this.renderPlotLineModels(a,!1,{size:t}),...this.renderPlotLineModels(a,!1,{size:t,startPosition:i})]}renderPlots(e,t){return e.centerYAxis?this.renderPlotsForCenterYAxis(e):[...this.renderPlotLineModels(this.getHorizontalTickPixelPositions(e),!1,{axes:e}),...this.renderPlotLineModels(this.getVerticalTickPixelPositions(e,t),!0,{axes:e})]}getVerticalTickPixelPositions(e,t){var i,s,n,o,a,r,l;const{offsetSize:d}=this.getPlotAxisSize(!0),c=ko(!0,e);if(null===(i=c)||void 0===i?void 0:i.labelRange){const e=null!=(o=null===(n=null===(s=t)||void 0===s?void 0:s.xAxis)||void 0===n?void 0:n.sizeRatio)?o:1,i=d*(null!=(l=null===(r=null===(a=t)||void 0===a?void 0:a.xAxis)||void 0===r?void 0:r.positionRatio)?l:0);return wt(d*e,c.tickCount,i)}return wt(d,c.tickCount)}getHorizontalTickPixelPositions(e){const{offsetSize:t}=this.getPlotAxisSize(!1);return wt(t,ko(!1,e).tickCount)}renderPlotBackgroundRect(){return Object.assign(Object.assign({type:"rect",x:0,y:0},R(this.rect,"width","height")),{color:this.theme.backgroundColor})}render(e){var t,i,s;const{layout:n,axes:o,plot:a,zoomRange:r,theme:l,scale:d}=e;if(!a)return;this.rect=n.plot,this.startIndex=null!=(i=null===(t=r)||void 0===t?void 0:t[0])?i:0,this.theme=l.plot;const c=null!=(s=e.categories)?s:[],{lines:h,bands:u,visible:p}=a;this.models.line=this.renderLines(o,c,h),this.models.band=this.renderBands(o,c,u),p&&(this.models.plot=[this.renderPlotBackgroundRect(),...this.renderPlots(o,d)])}makeLineModel(e,t,{color:i,dashSegments:s=[],lineWidth:n=1},o,a=0){const r=Mt(e?t:a),l=Mt(e?0:t);return{type:"line",x:r,y:l,x2:r+(e?0:null!=o?o:this.rect.width),y2:l+(e?this.rect.height:0),strokeStyle:i,lineWidth:n,dashSegments:s}}beforeDraw(e){e.ctx.strokeStyle="rgba(0, 0, 0, 0.05)",e.ctx.lineWidth=1}}function To({models:e,comparisonModel:t,name:i,eventDetectType:s}){switch(i){case"heatmap":case"gauge":return Po(e,t);case"bullet":return"grouped"===s?Wo(e,t):Po(e,t);case"radar":case"bubble":case"scatter":case"area":case"line":return function(e,t){var i;let s=!1;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e.length===t.length&&(s=e.reduce(((e,i,s)=>e&&i.seriesIndex===t[s].seriesIndex&&i.index===t[s].index),!0)),s}(e,t);case"pie":return Eo(e,t);case"column":case"bar":return"grouped"===s?Wo(e,t):Eo(e,t);case"boxPlot":return"grouped"===s?Eo(e,t):function(e,t){var i,s,n,o,a;let r=!1;if(e.length&&(null===(i=t)||void 0===i?void 0:i.length)){const{type:i,data:l}=e[0];r=i===t[0].type&&(null===(s=l)||void 0===s?void 0:s.label)===(null===(n=t[0].data)||void 0===n?void 0:n.label)&&(null===(o=l)||void 0===o?void 0:o.category)===(null===(a=t[0].data)||void 0===a?void 0:a.category)}return r}(e,t);case"treemap":return o=t,(n=e).length&&(null===(a=o)||void 0===a?void 0:a.length)&&n[0].label===o[0].label;default:return!1}var n,o,a}function Ro(e,t,i){let s=1/0,n=[];return e.forEach((e=>{const{x:o,y:a,radius:r}=e,l=Ct({x:o+i.x,y:a+i.y},t);s>l?(s=l,n=[e]):s===l&&(n.length&&n[0].radius>r?n=[e]:n.push(e))})),n}function Do(e,t,i,s=!0){const{pointOnColumn:n,tickDistance:o,rectResponderCount:a}=t,{width:r,height:l}=e,d=n?[]:[0,a-1],c=o/2;return C(0,a).map((e=>{const t=d.includes(e)?c:o;let a=0;return 0!==e&&(a+=n?o*e:c+o*(e-1)),{type:"rect",y:s?0:a,height:s?l:t,x:s?a:0,width:s?t:r,index:e,label:i[e]}}))}function jo(e,t){const{width:i,height:s}=t;let n=0;return e.sort(((e,t)=>e.x-t.x)).reduce(((t,o,a)=>{const{x:r,label:l}=o,d=e[a+1],c=d?(d.x+r)/2:i,h={type:"rect",x:n,y:0,width:c-n,height:s,label:l,index:a};return n=c,[...t,h]}),[])}function Bo(e,t){const i=t.reduce(((e,t)=>{const{index:i,seriesIndex:s}=t;return e[s]||(e[s]=[]),e[s][i]=t,e}),[]);return e.reduce(((e,t)=>{const{seriesIndex:s,index:n}=t,o=i[s][n],{category:a}=o;return a?(e[a]||(e[a]=[]),e[a].push(Object.assign(Object.assign({},t),{data:o})),e):e}),{})}function Lo(e){return e.reduce(((e,t)=>!e.length||t.depth>e[0].depth?[t]:e),[])}function Po(e,t){var i;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e[0].name===t[0].name}function Eo(e,t){var i;let s=!1;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e.length===t.length&&(s=e.reduce(((e,i,s)=>{var n,o,a,r;return e&&(null===(n=i.data)||void 0===n?void 0:n.label)===(null===(o=t[s].data)||void 0===o?void 0:o.label)&&(null===(a=i.data)||void 0===a?void 0:a.category)===(null===(r=t[s].data)||void 0===r?void 0:r.category)}),!0)),s}function Wo(e,t){var i;return e.length&&(null===(i=t)||void 0===i?void 0:i.length)&&e[0].index===t[0].index}function zo(e,t){const{type:i,value:s,direction:n,name:o,theme:a}=e,r=function(e){return T(["left","right"],e)}(n),l=r?function(e,t){const{anchor:i,offsetX:s=0,offsetY:n=0}=t,{direction:o,plot:{x:a=0,y:r=0}}=e,l=function(e,t){const{x:i,y:s,width:n,height:o,direction:a}=e,r=s+o/2;let l,d="center";if("right"===a)switch(t){case"start":d="left",l=i;break;case"end":d="right",l=i+n;break;case"center":d="center",l=i+n/2;break;default:d="left",l=i+n}else switch(t){case"start":d="right",l=i+n;break;case"end":d="left",l=i;break;case"center":d="center",l=i+n/2;break;default:d="right",l=i}return{x:l,y:r,textAlign:d,textBaseline:"middle"}}(e,i);let{x:d,y:c,textAlign:h}=l;if("auto"===i){const i=function(e,t,i){const{width:s,value:n,direction:o,plot:a,theme:r}=e,{formatter:l}=t,d=De(r),c=ut(w(n)?n:l(n),d);let{x:h,textAlign:u}=i;return("left"===o&&h-c<0||h+c>a.size)&&(h=e.x+s,u="right","left"===o&&s>=c&&(h=e.x,u="left")),{x:h,textAlign:u}}(e,t,{x:d,textAlign:h});d=i.x,h=i.textAlign}return c+=n,"left"===o?d-=s:d+=s,"right"===h?d-=10:"left"===h&&(d+=10),d-=a,c-=r,{x:d,y:c,textAlign:h,textBaseline:l.textBaseline}}(e,t):function(e,t){const{anchor:i,offsetX:s=0,offsetY:n=0}=t,{direction:o,plot:{x:a=0,y:r=0}}=e,l=function(e,t){const{x:i,y:s,width:n,height:o,direction:a}=e,r=i+n/2;let l="middle",d=0;if("top"===a)switch(t){case"end":l="top",d=s;break;case"start":l="bottom",d=s+o;break;case"center":l="middle",d=s+o/2;break;default:l="bottom",d=s}else switch(t){case"end":l="bottom",d=s+o;break;case"start":l="top",d=s;break;case"center":l="middle",d=s+o/2;break;default:l="top",d=s+o}return{x:r,y:d,textAlign:"center",textBaseline:l}}(e,i);let{x:d,y:c,textBaseline:h}=l;if("auto"===i){const t=function(e,t,i){const{height:s,direction:n,plot:o,theme:a,value:r}=e,l=De(a),d=o.size,c=pt(`${r}`,l);let{y:h,textBaseline:u}=i;return(!("bottom"===n)&&h-c<0||h+c>d)&&(h=e.y,u="top",h+c>d&&(h=e.y,u="bottom"),"bottom"===n&&(h=e.y+s,u="bottom")),{y:h,textBaseline:u}}(e,0,l);c=t.y,h=t.textBaseline}return d+=s,"top"===o?c+=n:"bottom"===o&&(c-=n),"bottom"===h?c-=5:"top"===h&&(c+=5),d-=a,c-=r,{x:d,y:c,textAlign:l.textAlign,textBaseline:h}}(e,t),d="stackTotal"===i?t.stackTotal.formatter:t.formatter;return Object.assign(Object.assign({type:i},l),{text:w(s)?s:d(s),name:o,seriesColor:e.color,theme:a})}function Io(e,t){var i,s,n,o,a;return(null===(n=null===(s=null===(i=e)||void 0===i?void 0:i.series)||void 0===s?void 0:s[t])||void 0===n?void 0:n.dataLabels)||(null===(a=null===(o=e)||void 0===o?void 0:o.series)||void 0===a?void 0:a.dataLabels)||{}}function Yo(e){var t;return e.anchor===(null===(t=e.pieSeriesName)||void 0===t?void 0:t.anchor)}function Ho(e){var t;return"outer"===e.anchor||"outer"!==(null===(t=e.pieSeriesName)||void 0===t?void 0:t.anchor)}function No(e){var t;return"outer"!==e.anchor||"outer"===(null===(t=e.pieSeriesName)||void 0===t?void 0:t.anchor)}function Xo(e,t){if("outer"!==t)return null;const{x:i,y:s}=Ue(Ve("outer",Object.assign(Object.assign({},e),{radius:Object.assign(Object.assign({},e.radius),{outer:e.radius.outer+20})}))),{x:n,y:o}=Ue(Ve("outer",Object.assign({},e))),{callout:a}=e.theme;return{x:i,y:s,x2:n,y2:o,theme:Object.assign(Object.assign({},a),{lineColor:a.useSeriesColor?e.color:a.lineColor})}}class Fo extends jt{constructor(){super(...arguments),this.models={rect:[],series:[],dot:[]},this.activatedResponders=[],this.eventDetectType="nearest",this.yAxisName="yAxis",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{const{index:t,seriesIndex:i}=e;if(!dn(e,"line"))return;const s=this.getResponderCategoryByIndex(t);if(!s)throw new Error(U);const n=this.tooltipCircleMap[s][i];if(!n)throw new Error(U);const o=this.getResponderSeriesWithTheme([n],"select");this.eventBus.emit("renderSelectedSeries",{models:o,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{var t;const{index:i,seriesIndex:s}=e;if(!ln(e,this.eventDetectType,"line"))return;const n=this.getResponderCategoryByIndex(i);if(!n)return;const o="grouped"===this.eventDetectType?this.tooltipCircleMap[n]:[this.tooltipCircleMap[n][s]];(null===(t=o)||void 0===t?void 0:t.length)&&(this.onMousemoveNearType(o),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="line",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels.rect[0].width=this.models.rect[0].width*e}setEventDetectType(e,t){var i,s;(e.area||e.column)&&(this.eventDetectType="grouped"),(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType),e.scatter&&(this.eventDetectType="near")}render(e,t){var i,s,n,o,a,r;const{viewRange:l}=t,{layout:d,series:c,scale:h,axes:u,legend:p,theme:m}=e;if(!c.line)throw new Error(Z(this.name));const g=null!=(i=e.categories)?i:[],v=null!=(s=e.rawCategories)?s:[],f=Object.assign({},e.options);(null===(n=f)||void 0===n?void 0:n.series)&&"line"in f.series&&(f.series=Object.assign(Object.assign({},f.series),f.series.line)),this.setEventDetectType(c,f);const b=u.xAxis,x=null!=(o=f.series)?o:{},y=c.line.data;this.theme=m.series.line,this.rect=d.plot,this.activeSeriesMap=hn(p),this.startIndex=null!=(r=null===(a=l)||void 0===a?void 0:a[0])?r:0,this.selectable=this.getSelectableOption(f),this.yAxisName=ui(f,this.name,"yAxis");const S=this.renderLinePointsModel(y,h,b,x,g),{dotSeriesModel:w,responderModel:M}=this.renderCircleModel(S,x),O=this.makeTooltipData(y,g);this.tooltipCircleMap=Bo(M,O),this.models={rect:[this.renderClipRectAreaModel()],series:S,dot:w},this.drawModels||(this.drawModels=Object.assign(Object.assign({},this.models),{rect:[this.renderClipRectAreaModel(!0)]})),Io(f,this.name).visible&&this.renderDataLabels(this.getDataLabels(S));const A=ji(c);this.responders=this.getResponders({labelAxisData:b,responderModel:M,tooltipDataArr:O,categories:g,rawCategories:v,coordinateType:A})}getResponders({labelAxisData:e,responderModel:t,tooltipDataArr:i,categories:s,rawCategories:n,coordinateType:o}){return"near"===this.eventDetectType?this.makeNearTypeResponderModel(t,i,n):"point"===this.eventDetectType?this.makeNearTypeResponderModel(t,i,n,0):o?jo(this.getRectResponderInfoForCoordinateType(t,n),this.rect):Do(this.rect,e,s)}makeNearTypeResponderModel(e,t,i,s){return e.map(((e,n)=>Object.assign(Object.assign({},e),{data:t[n],detectionSize:s,label:i[e.index]})))}makeTooltipData(e,t){return e.flatMap((({rawData:e,name:i,color:s},n)=>e.map(((e,o)=>x(e)?{}:{label:i,color:s,value:Ti(e),category:t[Di(e,t,o,this.startIndex)],seriesIndex:n,index:o}))))}renderClipRectAreaModel(e){return{type:"clipRectArea",x:0,y:0,width:e?0:this.rect.width,height:this.rect.height}}renderLinePointsModel(e,t,i,s,n){const{spline:o}=s,a=t[this.yAxisName].limit,{lineWidth:r,dashSegments:l}=this.theme;return e.map((({rawData:e,name:t,color:s},d)=>{const c=[],h=this.activeSeriesMap[t];return e.forEach(((e,t)=>{if(x(e))return c.push(null);const s=Ti(e),o=(1-kt(s,a))*this.rect.height,r=Rt(i,this.rect.width,Ri(e),Di(e,n,t,this.startIndex));c.push({x:r,y:o,value:s})})),o&&At(c),{type:"linePoints",points:c,seriesIndex:d,name:t,color:Me(s,h?1:.3),lineWidth:r,dashSegments:l}}))}getRectResponderInfoForCoordinateType(e,t){const i={};return e.filter((({x:e})=>e>=0&&e<=this.rect.width)).reduce(((e,s)=>{const{index:n,x:o}=s;if(!i[o]){const s=t[n];i[o]=!0,e.push({x:o,label:s})}return e}),[])}renderCircleModel(e,t){const i=[],s=[],n=!!t.showDot,{hover:o,dot:a}=this.theme,r=o.dot;return e.forEach((({color:e,name:t,points:o},l)=>{const d=this.activeSeriesMap[t];o.forEach(((o,c)=>{var h,u;if(x(o))return;const{x:p,y:m}=o,g={type:"circle",x:p,y:m,seriesIndex:l,name:t,index:c};n&&i.push(Object.assign(Object.assign({},g),{radius:a.radius,color:Me(e,d?1:.3),style:[{lineWidth:a.borderWidth,strokeStyle:(h=a.borderColor,null!=h?h:e)}]})),s.push(Object.assign(Object.assign({},g),{radius:r.radius,color:(u=r.color,null!=u?u:Me(e,1)),style:["default"]}))}))})),{dotSeriesModel:i,responderModel:s}}getCircleModelsFromRectResponders(e,t){var i,s;if(!e.length||!e[0].label)return[];const n=null!=(s=this.tooltipCircleMap[null===(i=e[0])||void 0===i?void 0:i.label])?s:[];return"grouped"===this.eventDetectType?n:Ro(n,t,this.rect)}onMousemoveNearType(e){this.eventBus.emit("renderHoveredSeries",{models:this.getResponderSeriesWithTheme(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e}onMousemoveNearestType(e,t){const i=this.getCircleModelsFromRectResponders(e,t);this.onMousemoveNearType(i)}onMousemoveGroupedType(e){const t=this.getCircleModelsFromRectResponders(e);this.onMousemoveNearType(t)}onMousemove({responders:e,mousePosition:t}){"nearest"===this.eventDetectType?this.onMousemoveNearestType(e,t):T(["near","point"],this.eventDetectType)?this.onMousemoveNearType(e):this.onMousemoveGroupedType(e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}getDataLabels(e){const t=this.theme.dataLabels;return e.flatMap((({points:e,name:i,color:s})=>e.map((e=>x(e)?{}:Object.assign(Object.assign({type:"point"},e),{name:i,theme:Object.assign(Object.assign({},t),{color:t.useSeriesColor?s:t.color})})))))}getResponderSeriesWithTheme(e,t){const{radius:i,color:s,borderWidth:n,borderColor:o}=this.theme[t].dot;return e.map((e=>{const t=null!=s?s:e.color;return Object.assign(Object.assign({},e),{radius:i,color:t,style:[{lineWidth:n,strokeStyle:null!=o?o:Me(t,.5)}]})}))}onClick({responders:e,mousePosition:t}){if(this.selectable){let i;i="near"===this.eventDetectType?e:this.getCircleModelsFromRectResponders(e,t),this.eventBus.emit("renderSelectedSeries",{models:this.getResponderSeriesWithTheme(i,"select"),name:this.name}),this.eventBus.emit("needDraw")}}getResponderCategoryByIndex(e){var t,i;return null===(i=null===(t=Object.values(this.tooltipCircleMap).flatMap((e=>e)).find((t=>t.index===e)))||void 0===t?void 0:t.data)||void 0===i?void 0:i.category}}class $o extends jt{constructor(){super(...arguments),this.activatedResponders=[],this.seriesColorMap={},this.seriesIconTypeMap={},this.onClickCheckbox=e=>{const{label:t,checked:i}=e[0];this.store.dispatch("setAllLegendActiveState",!0),this.store.dispatch("setLegendCheckedState",{name:t,checked:!i}),i?this.store.dispatch("disableSeries",t):this.store.dispatch("enableSeries",t),this.eventBus.emit("needDraw")},this.onClickLabel=e=>{const{label:t}=e[0];this.eventBus.emit("resetSelectedSeries"),this.activatedResponders.length&&this.activatedResponders[0].label===t?(this.store.dispatch("setAllLegendActiveState",!0),this.activatedResponders=[]):(this.store.dispatch("setAllLegendActiveState",!1),this.store.dispatch("setLegendActiveState",{name:t,active:!0}),this.activatedResponders=e),this.eventBus.emit("needDraw")}}onClick({responders:e}){var t;if(e.length){const{data:i}=e[0];"checkbox"===(null===(t=i)||void 0===t?void 0:t.name)?this.eventBus.emit("clickLegendCheckbox",de(e)):this.eventBus.emit("clickLegendLabel",de(e))}}initialize(){this.type="legend",this.name="legend",this.eventBus.on("clickLegendCheckbox",this.onClickCheckbox),this.eventBus.on("clickLegendLabel",this.onClickLabel)}initColorAndIconTypeMap(e){this.seriesColorMap={},this.seriesIconTypeMap={},e.forEach((({label:e,color:t,iconType:i})=>{this.seriesColorMap[e]=t,this.seriesIconTypeMap[e]=i}))}getXPositionWhenVerticalAlign(e){const{offset:t,rowWidths:i}=e.reduce(((e,t)=>{const{rowIndex:i,columnIndex:s,width:n}=t;return b(e.rowWidths[i])&&(e.rowWidths[i]=0,e.offset[i]=[0]),e.rowWidths[i]+=n+(s?Is:0),e.offset[i][s+1]=e.offset[i][s]+Is+n,e}),{offset:[],rowWidths:[]}),{width:s}=this.rect;return i.forEach(((e,i)=>{const n=(s-e)/2;t[i]=t[i].map((e=>e+n))})),t}getXPositionWhenHorizontalAlign(e){const t=e.reduce(((e,t)=>{const{columnIndex:i,width:s}=t;return b(e[i])&&(e[i]=0),e[i]=Math.max(e[i],s),e}),[]);return e.reduce(((e,i)=>{const{rowIndex:s,columnIndex:n}=i;return b(e[s])&&(e[s]=[0]),e[s][n+1]=e[s][n]+Is+t[n],e}),[])}renderLegendModel(e){const{data:t,showCheckbox:i,align:s,useScatterChartIcon:n}=e,o=rs(s),a=Fs(this.theme.label.fontSize),r=o?this.getXPositionWhenVerticalAlign(t):this.getXPositionWhenHorizontalAlign(t);return[Object.assign({type:"legend",align:s,showCheckbox:i,data:t.map((e=>{var t;const{label:i,iconType:s,rowIndex:o,columnIndex:l}=e;return Object.assign(Object.assign({},e),{iconType:(t=this.seriesIconTypeMap[i],null!=t?t:s),color:this.seriesColorMap[i],x:r[o][l],y:as.Y+a*o,useScatterChartIcon:n})}))},this.theme.label)]}makeCheckboxResponder(e,t){return t?e.map((e=>Object.assign(Object.assign({},e),{type:"rect",x:e.x,y:e.y,width:Hs,height:Hs,data:{name:"checkbox"}}))):[]}makeLabelResponder(e,t){const i=Te(this.theme.label);return e.map((e=>Object.assign(Object.assign({},e),{type:"rect",x:e.x+(t?Hs+Ys:0)+Ns+Ys,y:e.y,width:ut(e.label,i),data:{name:"label"},height:Hs})))}render({layout:e,legend:t,theme:i}){if(this.isShow=t.visible&&!!t.data.length,!this.isShow)return;const{showCheckbox:s,data:n}=t;this.rect=e.legend,this.theme=i.legend,this.initColorAndIconTypeMap(n),this.models=this.renderLegendModel(t);const{data:o}=this.models[0],a=this.makeCheckboxResponder(o,s),r=this.makeLabelResponder(o,s);this.responders=[...a,...r]}}function Go(e,t,i,s){var n;const{type:o}=e,a=[];if("point"===o)a.push(function(e,t,i){const{width:s,height:n}=i,{anchor:o,offsetX:a=0,offsetY:r=0,formatter:l}=t,{name:d,theme:c}=e;let h="middle";"end"===o?h="bottom":"start"===o&&(h="top");const u=e.x+a,p=e.y+r;return{type:"point",x:u<0||u>s?e.x:u,y:p<0||p>n?e.y:p,text:l(e.value,e.data),textAlign:"center",textBaseline:h,name:d,theme:c}}(e,t,i));else if("sector"===o){if("radialBar"===s)a.push(function(e,t){const{formatter:i}=t,s=function(e,t){const{anchor:i}=t,{clockwise:s,degree:{start:n,end:o},radius:{inner:a,outer:r}}=e;let l=n,d=o,c="center",h=(n+o)/2;"start"===i?(c=s?"left":"right",d=l,h=n):"end"===i&&(c=s?"right":"left",l=d,h=o);const{x:u,y:p}=Ue(Ve(i,Object.assign(Object.assign({},e),{degree:{start:l,end:d},radius:{inner:a,outer:r}})));return{x:u,y:p,textAlign:c,textBaseline:"middle",radian:_e(h,0)}}(e,t),{value:n,name:o,theme:a}=e,r=Object.assign(Object.assign({},a),{color:a.useSeriesColor?e.color:a.color});return Object.assign(Object.assign({type:"sector"},s),{text:i(n),name:o,theme:r})}(e,t));else if(a.push(function(e,t){const{formatter:i}=t,s=function(e,t){const i=t.anchor,s=Ue(Ve(i,Object.assign(Object.assign({},e),{radius:Object.assign(Object.assign({},e.radius),{outer:"outer"===i?e.radius.outer+30:e.radius.outer})}))),n=Je(e,i);return Object.assign(Object.assign({},s),{textAlign:n,textBaseline:Yo(t)?"bottom":"middle"})}(e,t),{value:n,name:o,theme:a}=e,r=t.anchor,l=Object.assign(Object.assign({},a),{color:a.useSeriesColor?e.color:a.color});return Object.assign(Object.assign({type:"sector"},s),{text:i(n),name:o,callout:Ho(t)?Xo(e,r):null,theme:l})}(e,t)),null===(n=t.pieSeriesName)||void 0===n?void 0:n.visible){const i=function(e,t){var i;const s=null===(i=t.pieSeriesName)||void 0===i?void 0:i.anchor,n="outer"===s,o=Ue(Ve(s,Object.assign(Object.assign({},e),{radius:Object.assign(Object.assign({},e.radius),{outer:n?e.radius.outer+30:e.radius.outer})}))),a=Je(e,s),r=e.theme.pieSeriesName,l=Object.assign(Object.assign({},r),{color:r.useSeriesColor?e.color:r.color});return Object.assign(Object.assign({type:"pieSeriesName"},o),{text:e.name,callout:No(t)?Xo(e,s):null,textAlign:a,textBaseline:Yo(t)?"top":"middle",theme:l})}(e,t);a.push(i)}}else"line"===o?a.push(function(e,t){const{value:i,textAlign:s,textBaseline:n}=e,{formatter:o}=t;return Object.assign(Object.assign({},e),{x:e.x,y:(e.y+e.y2)/2,textAlign:null!=s?s:"center",textBaseline:null!=n?n:"middle",text:w(i)?i:o(i)})}(e,t)):a.push(zo(e,t));return a}class Vo extends jt{constructor(){super(...arguments),this.dataLabelsMap={},this.renderSeriesDataLabels=e=>{this.appendDataLabels(e),this.models=this.renderLabelModel(),this.drawModels?this.sync():this.drawModels=this.getDrawModelsAppliedOpacity(0)}}initialize(){this.type="dataLabels",this.name="dataLabels",this.eventBus.on("renderDataLabels",this.renderSeriesDataLabels)}initUpdate(e){this.drawModels&&(this.drawModels=this.getDrawModelsAppliedOpacity(e))}render({layout:e,options:t,series:i,nestedPieSeries:s}){this.rect=e.plot,this.options=t,this.isShow=this.visibleDataLabels(i,s)}visibleDataLabels(e,t){var i,s;const n=!!(null===(s=null===(i=this.options.series)||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.visible),o=Object.keys(e).some((e=>{var t,i,s;return!!(null===(s=null===(i=null===(t=this.options.series)||void 0===t?void 0:t[e])||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.visible)})),a=!(!t||!Object.keys(t).some((e=>{var t,i,s;return!!(null===(s=null===(i=null===(t=this.options.series)||void 0===t?void 0:t[e])||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.visible)})));return n||o||a}appendDataLabels({name:e,data:t}){const i=Io(this.options,e),s=!!Kn(this.options),n=[];t.forEach((t=>{var o;const{type:a,value:r}=t,l=function(e,t,i=!1){var s,n,o;const a=function(e,t,i=!1){return"stackTotal"!==t&&T(["center","start","end","auto","outer"],e.anchor)?e.anchor:function(e,t=!1){let i="auto";switch(e){case"point":case"sector":case"treemapSeriesName":i="center";break;case"rect":i=t?"center":"auto";break;case"stackTotal":i="auto"}return i}(t,i)}(e,t,i),{offsetX:r=0,offsetY:l=0}=e,d=A(e.formatter)?e.formatter:e=>String(e)||"",c={anchor:a,offsetX:r,offsetY:l,formatter:d};if(i){const t=e.stackTotal;c.stackTotal={visible:!y(null===(s=t)||void 0===s?void 0:s.visible)||t.visible,formatter:A(null===(n=t)||void 0===n?void 0:n.formatter)?t.formatter:d}}return"sector"===t&&(null===(o=e.pieSeriesName)||void 0===o?void 0:o.visible)&&(c.pieSeriesName=Object.assign({anchor:"center"},e.pieSeriesName)),c}(i,a,s);"stackTotal"===a&&!(null===(o=l.stackTotal)||void 0===o?void 0:o.visible)||b(r)||n.splice(n.length,0,...Go(t,l,this.rect,e))})),this.dataLabelsMap[e]={data:n,options:i}}getDrawModelsAppliedOpacity(e){return Object.keys(this.models).reduce(((t,i)=>Object.assign(Object.assign({},t),{[i]:this.models[i].map((t=>Object.assign(Object.assign({},t),{opacity:e})))})),{series:[],total:[]})}renderLabelModel(){return Object.keys(this.dataLabelsMap).map((e=>{const{data:t}=this.dataLabelsMap[e];return this.makeLabelModel(t)})).reduce(((e,t)=>({series:[...e.series,...t.series],total:[...e.total,...t.total]})),{series:[],total:[]})}makeLabelModel(e){return e.reduce(((e,t)=>{var i;const{type:s,x:n,y:o,text:a,textAlign:r,textBaseline:l,name:d,callout:c,theme:h,radian:u}=t;if(!function(e,t){const{height:i,width:s}=e,{x:n,y:o}=t;return n>=0&&n<=s&&o>=0&&o<=i}(this.rect,{x:n,y:o}))return e;const p="stackTotal"===s?"total":"series";return Object.assign(Object.assign({},e),{[p]:[...(i=e[p],null!=i?i:[]),{type:"dataLabel",dataLabelType:s,text:a,x:n,y:o,textAlign:r,textBaseline:l,opacity:1,name:d,callout:c,theme:h,radian:u}]})}),{series:[],total:[]})}}class _o extends jt{initialize({name:e}){this.type="axisTitle",this.name=e,this.isYAxis=T([Bt.Y,Bt.SECONDARY_Y],e),this.isCircularAxis=this.name===Bt.CIRCULAR}getTitlePosition(e,t){return this.isCircularAxis?[this.rect.width/2+e,this.rect.height/2+t]:this.isYAxis?[this.name===Bt.Y?e:this.rect.width+e,t]:[this.rect.width+e,t]}renderAxisTitle(e,t){const{text:i,offsetX:s,offsetY:n}=e,[o,a]=this.getTitlePosition(s,n),r=Te(this.theme);return[{type:"label",text:i,x:o,y:a,style:["axisTitle",{textAlign:t,fillStyle:this.theme.color,font:r}]}]}getTextAlign(e=!1){return this.name===Bt.Y?e?"center":"left":this.isCircularAxis?"center":"right"}getCircularAxisTitleRect(e,t,i){const{x:s,y:n}=t,{centerX:o,centerY:a,axisSize:r,radius:{outer:l}}=i,{offsetY:d}=e;return{x:o+s-r/2,y:a+n-l/2,width:r,height:this.theme.fontSize+d}}render({axes:e,radialAxes:t,layout:i,theme:s}){var n,o,a;const r=this.isCircularAxis?null===(n=t[this.name])||void 0===n?void 0:n.title:null===(o=e[this.name])||void 0===o?void 0:o.title;this.isShow=!!r,this.isShow&&(this.theme=mi(s,this.name).title,this.rect=i[`${this.name}Title`],this.models=this.renderAxisTitle(r,this.getTextAlign(!!(null===(a=e)||void 0===a?void 0:a.centerYAxis))))}}class Uo extends jt{initialize(){this.type="title",this.name="title"}renderTitle(e){var t,i,s;let n="",o=0,a=0,r="left";w(e)?n=e:(n=e.text,r=null!=(t=e.align)?t:"left",o+=null!=(i=e.offsetX)?i:0,a+=null!=(s=e.offsetY)?s:0);const l=Te(this.theme),d=ut(n,l);return"center"===r?o+=(this.rect.width-d)/2:"right"===r&&(o+=this.rect.width-d),[{type:"label",x:o,y:a,text:n,style:["title",{font:l,fillStyle:this.theme.color}]}]}render({options:e,layout:t,theme:i}){var s;this.isShow=!!(null===(s=e.chart)||void 0===s?void 0:s.title),this.isShow&&(this.theme=i.title,this.rect=t.title,this.models=this.renderTitle(e.chart.title))}}const qo={line:"circle",area:"circle",boxPlot:"boxPlot"};class Zo extends jt{constructor(){super(...arguments),this.models={guideLine:[]},this.isShow=!1,this.renderHoveredSeries=({models:e,name:t,eventDetectType:i})=>{var s,n;const o=this.getSeriesModels(t);this.models[t]=[...e],this.isShow=!!this.getSeriesModels().length;const a=!!(null===(s=o)||void 0===s?void 0:s.length)&&!!e.length&&To({models:e,comparisonModel:o,eventDetectType:i,name:t});(null===(n=o)||void 0===n?void 0:n.length)&&!e.length?this.eventBus.emit("unhoverSeries",de(o)):e.length&&!a&&this.eventBus.emit("hoverSeries",de(e)),this.modelForGuideLine=this.getModelForGuideLine(t),"grouped"===i&&this.renderGroupedModels(t)},this.resetHoveredSeries=()=>{this.models={guideLine:[]}}}getSeriesModels(e){var t;const i=this.models,{guideLine:s}=i,n=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(i,["guideLine"]);return null===(t=e?n[e]:Object.values(n))||void 0===t?void 0:t.flatMap((e=>e))}hasGuideLine(){const[e]=this.getSeriesModels().filter((({type:e})=>"rect"===e));return!b(this.modelForGuideLine)&&b(e)}getModelForGuideLine(e){return this.getSeriesModels().filter((({type:t})=>t===qo[e]))[0]}renderGroupedModels(e){T(Object.keys(qo),e)&&(this.isShow&&this.hasGuideLine()?this.models.guideLine=[this.renderGuideLineModel(this.modelForGuideLine)]:this.models.guideLine=[])}renderGuideLineModel(e){const t=Mt("boxPlot"===e.type&&e.boxPlotDetection?e.boxPlotDetection.x+e.boxPlotDetection.width/2:e.x);return{type:"line",x:t,y:0,x2:t,y2:this.rect.height,strokeStyle:"#ddd",lineWidth:1}}initialize(){this.type="hoveredSeries",this.name="hoveredSeries",this.eventBus.on("renderHoveredSeries",this.renderHoveredSeries),this.eventBus.on("resetHoveredSeries",this.resetHoveredSeries)}render({layout:e}){this.rect=e.plot}}class Ko extends jt{constructor(){super(...arguments),this.models={selectionArea:[]},this.dragStartPosition=null,this.dragStartPoint=null,this.isDragging=!1}initialize(){this.type="rangeSelection"}render(e,t){var i,s;if(!e.selectionRange&&!e.zoomRange)return;this.resetSelectionArea();const{viewRange:n}=t,{layout:o,axes:a,series:r,scale:l}=e,d=e.categories;if(this.rect=o.plot,this.startIndex=null!=(s=null===(i=n)||void 0===i?void 0:i[0])?s:0,ji(r)){const e=this.getRectResponderInfoForCoordinateType(r,l,a.xAxis,d);this.responders=this.makeRectResponderModelForCoordinateType(e,d)}else this.responders=this.makeRectResponderModel(d,a.xAxis)}getRectResponderInfoForCoordinateType(e,t,i,s){const n=[],o={};return Object.keys(e).forEach((t=>{e[t].data.forEach((({rawData:e})=>{e.forEach(((e,t)=>{if(x(e))return;const a=Di(e,s,t,this.startIndex),r=Rt(i,this.rect.width,Ri(e),a),l=r>=0&&r<=this.rect.width;!o[r]&&l&&(o[r]=!0,n.push({x:r,label:s[a]}))}))}))})),n}resetSelectionArea(){this.dragStartPosition=null,this.dragStartPoint=null,this.models.selectionArea=[],this.isDragging=!1}onMousedown({responders:e,mousePosition:t}){e.length&&(this.dragStartPoint=e.find((e=>"selectionArea"===e.data.name)),this.dragStartPosition=t)}onMouseup({responders:e}){var t,i;if(this.isDragging&&this.dragStartPoint&&e.length){const s=[this.dragStartPoint,e[0]].sort(((e,t)=>e.index-t.index)).map((e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.value})),{series:n,options:o}=this.store.state,{series:a}=o;!n.column&&(null===(t=a)||void 0===t?void 0:t.zoomable)&&(this.store.dispatch("zoom",s),this.eventBus.emit("zoom",de(s))),(null===(i=a)||void 0===i?void 0:i.rangeSelectable)&&this.eventBus.emit("rangeSelection",s),this.eventBus.emit("resetHoveredSeries"),this.eventBus.emit("hideTooltip"),setTimeout((()=>{this.eventBus.emit("resetSelectedSeries")}))}this.resetSelectionArea()}makeRectResponderModel(e,t){const i=e.length,{pointOnColumn:s,tickDistance:n}=t,{height:o}=this.rect,a=s?[]:[0,i-1],r=n/2;return C(0,i).map((t=>{const i=a.includes(t);let l=0;return 0!==t&&(l+=s?n*t:r+n*(t-1)),{type:"rect",x:l,y:0,height:o,width:i?r:n,index:t,data:{name:"selectionArea",value:e[t]}}}))}makeRectResponderModelForCoordinateType(e,t){return jo(e,this.rect).map(((e,i)=>Object.assign(Object.assign({},e),{data:{name:"selectionArea",value:t[i]}})))}onMousemove({responders:e,mousePosition:t}){if(e.length){if(this.dragStartPosition&&!this.isDragging){const{x:e}=t,{x:i}=this.dragStartPosition;this.isDragging=Math.abs(i-e)>15}if(this.isDragging){const t=this.dragStartPoint.index,i=e[0].index,[s,n]=[t,i].sort(z),o=this.responders.slice(s,n+1);this.models.selectionArea=[...o.map((e=>Object.assign(Object.assign({},e),{x:e.x,y:0,type:"rect",color:"rgba(0, 0, 0, 0.2)"})))],this.eventBus.emit("needDraw")}}}onMouseoutComponent(){this.resetSelectionArea()}}class Jo extends jt{initialize(){this.type="resetButton",this.name="resetButton"}onClick({responders:e}){e.length&&(this.eventBus.emit("resetZoom"),this.store.dispatch("resetZoom"))}render({options:e,layout:t},i){ps(e)&&(this.rect=t.resetButton,this.isShow=i.isLineTypeSeriesZooming,this.models=this.isShow?[{type:"resetButton",x:0,y:0}]:[],this.responders=this.isShow?[{type:"rect",x:0,y:0,width:qi,height:qi}]:[])}}class Qo extends jt{constructor(){super(...arguments),this.models={},this.seriesModels={},this.activeSeriesNames={},this.isShow=!1,this.renderSelectedSeries=e=>{const{name:t,alias:i}=e,s=this.getSelectedSeriesModelsForRendering(e);this.models[i||t]=To(Object.assign(Object.assign({},e),{models:s,comparisonModel:this.models[i||t]}))?[]:s,this.seriesModels[i||t]=this.getSelectedSeriesModels(e),this.isShow=!!Object.values(this.models).flatMap((e=>e)).length,this.eventBus.emit(this.isShow?"selectSeries":"unselectSeries",de(this.seriesModels)),this.activeSeriesNames[t]=this.getSeriesNames(e.models,t),this.setActiveState()},this.resetSelectedSeries=()=>{this.models={},this.store.dispatch("setAllLegendActiveState",!0)}}getSeriesNames(e,t){const i=[];return T(["line","area","radar","bubble","scatter","bullet","boxPlot"],t)?e.forEach((e=>{const t=e.name;t&&i.push(t)})):T(["bar","column","radialBar"],t)?e.forEach((e=>{var t;const s=null===(t=e.data)||void 0===t?void 0:t.label;s&&i.push(s)})):"pie"===t&&Object.keys(this.models).flatMap((e=>this.models[e])).forEach((e=>{var t,s;const n=(null===(t=e.data)||void 0===t?void 0:t.rootParentName)||(null===(s=e.data)||void 0===s?void 0:s.label);n&&i.push(n)})),i}getSelectedSeriesModelsForRendering(e){const{models:t,eventDetectType:i,name:s}=e;let n=t;return"column"!==s&&"bar"!==s&&"bullet"!==s||"grouped"!==i?"radialBar"===s&&"grouped"===i&&(n=t.filter((e=>!e.data))):n=t.filter((e=>!e.data)),n}getSelectedSeriesModels(e){const{models:t,eventDetectType:i,name:s}=e;let n=t;return"column"!==s&&"bar"!==s&&"bullet"!==s||"grouped"!==i?"radialBar"===s&&"grouped"===i&&(n=t.filter((e=>e.data))):n=t.filter((e=>e.data)),n}setActiveState(){this.isShow?(this.store.dispatch("setAllLegendActiveState",!1),Object.values(this.activeSeriesNames).forEach((e=>{e.forEach((e=>{this.store.dispatch("setLegendActiveState",{name:e,active:!0})}))}))):this.store.dispatch("setAllLegendActiveState",!0),this.eventBus.emit("needDraw")}initialize(){this.type="selectedSeries",this.name="selectedSeries",this.eventBus.on("renderSelectedSeries",this.renderSelectedSeries),this.eventBus.on("resetSelectedSeries",this.resetSelectedSeries)}render({layout:e}){this.rect=e.plot}}class ea extends jt{initialize(){this.type="background",this.name="background"}render({layout:e,theme:t}){const{width:i,height:s}=e.chart;this.theme=t.chart,this.rect={x:0,y:0,width:i,height:s},this.models=[Object.assign(Object.assign({type:"rect"},this.rect),{color:this.theme.backgroundColor})]}}class ta extends jt{initialize(){this.type="noDataText",this.name="noDataText"}getCenterPosition(e,t){const i=ut(e,t),s=pt(e,t);return{x:(this.rect.width-i)/2,y:(this.rect.height-s)/2}}render({layout:e,series:t,options:i,theme:s}){var n,o,a;const r=null!=(a=null===(o=null===(n=i)||void 0===n?void 0:n.lang)||void 0===o?void 0:o.noData)?a:"No data to display",l=s.noData,d=Te(l),c=l.color;this.isShow=cn(t),this.rect=e.plot,this.models=[Object.assign(Object.assign({type:"label"},this.getCenterPosition(r,d)),{text:r,style:[{font:d,fillStyle:c}]})]}}function ia(e,t){const{color:i,lineWidth:s,points:n,dashSegments:o=[]}=t;e.lineCap="round",e.beginPath(),o&&je(e,o);let a=!1;n.forEach(((t,i)=>{var s,o;if(x(t))a=!1;else{if(!a)return e.moveTo(t.x,t.y),void(a=!0);if(t.controlPoint&&(null===(o=null===(s=n[i-1])||void 0===s?void 0:s.controlPoint)||void 0===o?void 0:o.next)){const{x:s,y:o}=n[i-1].controlPoint.next,{controlPoint:a,x:r,y:l}=t;e.bezierCurveTo(s,o,a.prev.x,a.prev.y,r,l)}else e.lineTo(t.x,t.y)}})),Pe(e,{lineWidth:s,strokeStyle:i}),e.closePath(),je(e,[])}function sa(e,t){const{fillColor:i}=t;e.beginPath(),ia(e,t),Le(e,i),e.closePath()}function na(e,t){const{opened:i,x:s,y:n,theme:o}=t,{borderColor:a,backgroundColor:r,borderWidth:l,borderRadius:d,xIcon:c,dotIcon:h}=o,u=s+l,p=n+l,m=qi-2*l;nt(e,{type:"pathRect",x:u,y:p,fill:r,stroke:a,width:m,height:m,radius:d,lineWidth:l}),i?function(e,t,i){const{x:s,y:n,theme:{color:o,lineWidth:a}}=t,r=i/3,l=s+r,d=n+r,c=s+2*r,h=n+2*r;[{x:l,y:d,x2:c,y2:h},{x:l,y:h,x2:c,y2:d}].forEach((t=>{at(e,Object.assign(Object.assign({type:"line"},t),{strokeStyle:o,lineWidth:a}))}))}(e,{x:u,y:p,theme:c},m):function(e,t,i){const{x:s,y:n,theme:{color:o,width:a,height:r,gap:l}}=t,d=(i-(3*r+2*l))/2,c=s+(i-a)/2;[{x:c,y:n+d},{x:c,y:n+d+r+l},{x:c,y:n+d+2*(r+l)}].forEach((t=>{rt(e,Object.assign(Object.assign({type:"rect"},t),{color:o,width:a,height:r}))}))}(e,{x:u,y:p,theme:h},m)}function oa(e,t){const{x:i,y:s}=t;nt(e,{type:"pathRect",x:i,y:s,fill:"#f4f4f4",stroke:"#f4f4f4",width:qi,height:qi,radius:5}),function(e,t){const i=3.4285714285714284,{x:s,y:n}=t,o=s+12,a=n+12,r="#545454";at(e,{type:"line",lineWidth:2,x:o-2,y:a+i,x2:o+2,y2:a+i,strokeStyle:r}),at(e,{type:"line",lineWidth:2,x:o-2,y:a-i,x2:o+2,y2:a-i,strokeStyle:r}),ot(e,{type:"circle",x:o+2,y:a,radius:i,angle:{start:Math.PI/2,end:3*Math.PI/2},color:"transparent",style:[{lineWidth:2,strokeStyle:r}]});const l=o-2,d=a-i;sa(e,{type:"areaPoints",points:[{x:l-3,y:d},{x:l,y:d-3},{x:l,y:d+3}],lineWidth:1,color:r,fillColor:r})}(e,{x:i,y:s})}function aa(e,t){const{x:i,y:s}=t;nt(e,{type:"pathRect",x:i,y:s,fill:"#f4f4f4",stroke:"#f4f4f4",width:qi,height:qi,radius:5}),function(e,t){const{x:i,y:s}=t,n=i+12,o=s+12,a="#545454";ot(e,{type:"circle",x:n,y:o,radius:4.8,angle:{start:0,end:Math.PI/2},color:"transparent",style:[{lineWidth:2,strokeStyle:a}]});const r=n+4.8;sa(e,{type:"areaPoints",points:[{x:r-3,y:o},{x:r+3,y:o},{x:r,y:o+3}],lineWidth:1,color:a,fillColor:a})}(e,{x:i,y:s})}class ra extends En{constructor(e){var t;super({el:e.el,options:e.options,series:{line:e.data.series},categories:null===(t=e.data)||void 0===t?void 0:t.categories,modules:[Yn,lo,Ii,po]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(Fo),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(Lt,{name:"secondaryYAxis"}),this.componentManager.add(Vo),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(_o,{name:"secondaryYAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(Ko),this.componentManager.add(Jo),this.componentManager.add(ta),this.painter.addGroups([t,i,c,d,e,h,o,u])}addData(e,t){var i;(null===(i=this.store.state.options.series)||void 0===i?void 0:i.showDot)&&(this.animationControlFlag.updating=!0),this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{line:i},categories:t})}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function la(e,t,i){var s,n;return[{hasOuterLabel:t.visible&&"outer"===t.anchor,labels:["00.00%"],theme:i},{hasOuterLabel:(null===(s=t.pieSeriesName)||void 0===s?void 0:s.visible)&&"outer"===(null===(n=t.pieSeriesName)||void 0===n?void 0:n.anchor),labels:e,theme:i.pieSeriesName}].reduce(((e,t)=>{const{width:i,height:s}=e,{hasOuterLabel:n,labels:o,theme:a}=t;if(n){const{maxLabelWidth:e,maxLabelHeight:t}=Mi(o,0,De(a));return{width:Math.max(e+30,i),height:Math.max(t+30,s)}}return e}),{width:0,height:0})}class da extends jt{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.alias||this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.alias||this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({seriesIndex:e,name:t})=>{if(!S(e)||!b(t)&&t!==this.alias)return;const i=this.responders[e];if(!i)throw new Error(U);this.eventBus.emit("renderSelectedSeries",{models:this.getResponderModelsWithTheme([i],"select"),name:this.name,alias:this.alias}),this.eventBus.emit("needDraw")},this.showTooltip=({seriesIndex:e,name:t})=>{if(!S(e)||!b(t)&&t!==this.alias)return;const i=[this.responders[e]];i.length&&(this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(i,"hover"),name:this.name,alias:this.alias}),this.activatedResponders=this.makeTooltipResponder(i),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.alias||this.name}),this.eventBus.emit("needDraw"))}}initUpdate(e){if(!this.drawModels)return;let t;const i=this.models.series.findIndex((({clockwise:i,degree:{start:s,end:n},totalAngle:o})=>(t=i?o*e:Fe-o*e,Ze(i,s,n,t))));this.syncEndAngle(i<0?this.models.series.length:i),~i&&(this.drawModels.series[i].degree.end=t)}syncEndAngle(e){if(!(e<1))for(let t=0;t<e;t+=1){const e=this.models.series[t].degree.end;this.drawModels.series[t].degree.end!==e&&(this.drawModels.series[t].degree.end=e)}}initialize(e){var t,i;this.type="series",this.name="pie",this.alias=null!=(i=null===(t=e)||void 0===t?void 0:t.alias)?i:"",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i,s,n;const{layout:o,series:a,legend:r,options:l,nestedPieSeries:d,theme:c}=e,h=null!=(t=e.categories)?t:[];if(!a.pie)throw new Error(Z(this.name));const u=c.series.pie;let p,m;this.theme=this.alias?u[this.alias]:u,this.rect=o.plot,this.activeSeriesMap=hn(r),this.selectable=this.getSelectableOption(l);const g=Io(l,this.alias);if(d){const{data:e}=d[this.alias],t=Object.keys(d),s=t.findIndex((e=>e===this.alias)),n=Y(t),o=la(d[n].data.map((({name:e})=>e)),Io(l,n),this.theme.dataLabels),a=this.getRenderOptionsMap(l,t,o);p=this.renderPieModel(e,a[this.alias],s),m=Vt(e,null===(i=h)||void 0===i?void 0:i[s])}else{const e=null===(s=a.pie)||void 0===s?void 0:s.data,{width:t,height:i}=la(e.map((({name:e})=>e)),g,this.theme.dataLabels),o=this.makeRenderOptions(l,t,i);p=this.renderPieModel(e,o),m=Vt(e,null===(n=h)||void 0===n?void 0:n[0])}if(this.models.series=p,this.drawModels||(this.drawModels={series:this.models.series.map((e=>Object.assign(Object.assign({},e),{degree:Object.assign(Object.assign({},e.degree),{end:e.degree.start})})))}),g.visible){const e=p.map((e=>Object.assign(Object.assign({},e),{value:`${qt(e.percentValue)}`,theme:this.theme.dataLabels})));this.renderDataLabels(e,this.alias)}this.responders=p.map(((e,t)=>Object.assign(Object.assign({},e),{type:"sector",radius:e.radius,seriesIndex:t,data:Object.assign(Object.assign({},m[t]),{percentValue:e.percentValue}),color:Me(e.color,1)})))}getRadiusRangeMap(e,t){return t.reduce(((t,i)=>{var s,n;const o=this.getOptions(e,i).series;return(null===(s=o)||void 0===s?void 0:s.radiusRange)&&(t[i]=null===(n=o)||void 0===n?void 0:n.radiusRange),t}),{})}getRenderOptionsMap(e,t,i){const s=this.initRenderOptionsMap(e,t,i),n=this.getRadiusRangeMap(e,t);return t.forEach(((e,i)=>{const o=Object.values(s).map((({radiusRange:e})=>e));s[e].radiusRange=function({alias:e,renderOptions:t,radiusRangeMap:i,pieIndex:s,radiusRanges:n,totalPieAliasCount:o}){var a,r,l,d,c;const h=Object.keys(i).length,{defaultRadius:u=0}=t;let{inner:p,outer:m}=t.radiusRange;if(!i[e])if(h)s&&n[s-1].outer&&(p=n[s-1].outer),m=(null===(a=n[s+1])||void 0===a?void 0:a.inner)?n[s+1].inner:s===o-1?u:p+(u-(null!=(l=null===(r=n[s-1])||void 0===r?void 0:r.outer)?l:0)-(null!=(c=null===(d=n[s+1])||void 0===d?void 0:d.inner)?c:0))/(o-h);else{const e=u/o;p=s*e,m=(s+1)*e}return{inner:p,outer:m}}({alias:e,renderOptions:s[e],radiusRangeMap:n,pieIndex:i,radiusRanges:o,totalPieAliasCount:t.length})})),s}initRenderOptionsMap(e,t,{width:i,height:s}){return t.reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:this.makeRenderOptions(this.getOptions(e,n),i,s)})),{})}getOptions(e,t){var i;const s=Object.assign({},e);return(null===(i=s)||void 0===i?void 0:i.series)&&t&&(s.series=Object.assign(Object.assign({},s.series),s.series[t])),s}makeRenderOptions(e,t=0,i=0){var s,n,o,a,r,l,d,c,h,u,p,m,g,v;const f=e.series,b=null==(n=null===(s=f)||void 0===s?void 0:s.clockwise)||n,x=null!=(r=null===(a=null===(o=f)||void 0===o?void 0:o.angleRange)||void 0===a?void 0:a.start)?r:0,y=null!=(c=null===(d=null===(l=f)||void 0===l?void 0:l.angleRange)||void 0===d?void 0:d.end)?c:Fe,S=Ft(b,x,y),w=$t(b,x,y),{width:M,height:O}=this.rect,A=Ke(this.rect,w,t,i),k=$(A,null!=(p=null===(u=null===(h=f)||void 0===h?void 0:h.radiusRange)||void 0===u?void 0:u.inner)?p:0),C=$(A,null!=(v=null===(g=null===(m=f)||void 0===m?void 0:m.radiusRange)||void 0===g?void 0:g.outer)?v:this.alias?0:A);return{clockwise:b,cx:M/2,cy:w?Gt(this.rect.height,b):O/2,drawingStartAngle:x-Ge,radiusRange:{inner:k,outer:C},angleRange:{start:x,end:y},totalAngle:S,defaultRadius:A}}renderPieModel(e,t,i){const s=[],n=e.reduce(((e,{data:t})=>e+(null!=t?t:0)),0),{clockwise:o,cx:a,cy:r,drawingStartAngle:l,radiusRange:{inner:d,outer:c},totalAngle:h}=t,u=o?0:Fe,{lineWidth:p,strokeStyle:m}=this.theme;return e.forEach(((t,g)=>{const v=this.alias?this.getAliasSeriesColor(t,e,i):this.getSeriesColor(t),{data:f,name:b}=t;if(f){const e=Math.max(f/n*h,1)*(o?1:-1),t=f/n*100,i=s[s.length-1],x=g&&i?i.degree.end:u,y=o?Math.min(x+e,Fe):Math.max(x+e,0);s.push({type:"sector",name:b,color:v,x:a,y:r,degree:{start:x,end:y},radius:{inner:d,outer:c},value:f,style:[{strokeStyle:m}],lineWidth:p,clockwise:o,drawingStartAngle:l,totalAngle:h,percentValue:t})}})),s}makeTooltipResponder(e){return e.map((e=>Object.assign(Object.assign({},e),Ue(Ve("center",this.models.series[e.seriesIndex])))))}onMousemove({responders:e}){this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(e,"hover"),name:this.alias||this.name}),this.activatedResponders=this.makeTooltipResponder(e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.alias||this.name}),this.eventBus.emit("needDraw")}onClick({responders:e}){this.selectable&&(this.eventBus.emit("renderSelectedSeries",{models:this.getResponderModelsWithTheme(e,"select"),name:this.name,alias:this.alias}),this.eventBus.emit("needDraw"))}getResponderModelsWithTheme(e,t){const i=this.theme[t],s=i.lineWidth,n=this.theme.lineWidth===s?0:.5*s;return e.map((e=>{var t,o;return Object.assign(Object.assign({},e),{color:(o=null===(t=i)||void 0===t?void 0:t.color,null!=o?o:e.color),lineWidth:s,style:[R(i,"strokeStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY")],radius:{inner:Math.max(e.radius.inner-n,0),outer:e.radius.outer+n}})}))}getOpacity(e,t){const{select:i,areaOpacity:s}=this.theme,{areaOpacity:n,restSeries:{areaOpacity:o}}=i;return t?e?n:o:s}getIndexOfGroup(e,t,i){return e.filter((e=>t===e.parentName)).findIndex((e=>i===e.name))}getSeriesColor(e){const{color:t,name:i}=e,s=this.activeSeriesMap[i];return Me(t,this.getOpacity(s,this.hasActiveSeries()))}getAliasSeriesColor(e,t,i){const{color:s,name:n}=e,{select:{color:o}}=this.theme,{rootParentName:a,parentName:r}=e,l=this.getIndexOfGroup(t,r,n),d=this.getAliasSeriesOpacity(a,r,i,l,n);return Me(this.activeSeriesMap[null!=a?a:n]&&null!=o?o:s,d)}getAliasSeriesOpacity(e,t,i,s,n){const o=this.activeSeriesMap[null!=e?e:n],a=this.getOpacity(o,this.hasActiveSeries());return i&&t?function(e,t,i,s=.85){const n=Number((e*Math.pow(s,t)).toFixed(2));return Number(Math.pow(n,i+1).toFixed(2))}(a,i,s):a}hasActiveSeries(){return Object.values(this.activeSeriesMap).some((e=>!e))}}function ca(e,t){const{degree:{start:i,end:s},color:n,style:o,lineWidth:a}=t;if(i===s)return;const r=Math.abs(i-s)===Fe;if(e.beginPath(),o){const t=ke(o,{});Object.keys(t).forEach((i=>{e[i]=t[i]}))}r?function(e,t){const{x:i,y:s,radius:{inner:n,outer:o},clockwise:a}=t;if(e.arc(i,s,o,0,2*Math.PI,!a),n){const{x:t,y:o}=qe(i,s,n,0),r=n?t:i,l=n?o:s;e.moveTo(r,l),e.arc(i,s,n,0,2*Math.PI,a)}}(e,t):function(e,t){const{x:i,y:s,radius:{inner:n,outer:o},degree:{start:a,end:r},clockwise:l,drawingStartAngle:d}=t;if(n<0||o<0)return;const c=_e(a,d),h=_e(r,d);n||e.moveTo(i,s),e.arc(i,s,o,c,h,!l),n&&e.arc(i,s,n,h,c,l)}(e,t),e.closePath(),Le(e,n),a&&(e.lineWidth=a,e.stroke())}class ha extends En{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{pie:i.series},categories:i.categories})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add($o),this.componentManager.add(da),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,d,e,h,p,o])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{pie:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function ua(e,t){var i,s,n,o,a,r,l,d,c,h;const{categories:u,axisSize:p,axisLayout:m,options:g,theme:v}=e,f=t===Bt.X,b=f?"x":"y",x=Ci(g,t),y=Si(u[b],g,x,t),S=y.length,w=S?p/S:p,M=p/S,O=S+1,A=null!=(n=null===(s=null===(i=g[t])||void 0===i?void 0:i.tick)||void 0===s?void 0:s.interval)?n:1,k=null!=(r=null===(a=null===(o=g[t])||void 0===o?void 0:o.label)||void 0===a?void 0:a.interval)?r:1,C=bi({labels:y,pointOnColumn:!0,tickDistance:w,tickCount:O,tickInterval:A,labelInterval:k},p),T=Oi(t,g),{maxLabelWidth:R,maxLabelHeight:D}=Mi(y,T,Te(v.label)),j={labels:y,viewLabels:C,pointOnColumn:!0,isLabelAxis:f,tickCount:O,tickDistance:w,labelDistance:M,tickInterval:A,labelInterval:k,title:xi(null===(l=g[t])||void 0===l?void 0:l.title),maxLabelWidth:R,maxLabelHeight:D};if(t===Bt.X){const e=null!=(h=null===(c=null===(d=g.xAxis)||void 0===d?void 0:d.label)||void 0===c?void 0:c.margin)?h:0,t=gt(D)+e,i=wi(R,D,p/C.length,fi(g),m),{needRotateLabel:s,rotationHeight:n}=i,o=(s?n:D)+t;return Object.assign(Object.assign(Object.assign({},j),i),{maxHeight:o,offsetY:t})}return j}const pa={name:"axes",state:()=>({axes:{xAxis:{},yAxis:{}}}),action:{setAxesData({state:e}){const{layout:t,theme:i}=e,{width:s,height:n}=t.plot,o=e.categories,a=e.options,r={xAxis:ua({axisSize:s,categories:o,options:a,theme:mi(i,Bt.X),axisLayout:t[Bt.X]},Bt.X),yAxis:ua({axisSize:n,categories:o,options:a,theme:mi(i,Bt.Y)},Bt.Y)};vi(e.axes,r)&&this.notify(e,"layout"),e.axes=r}},computed:{},observe:{updateAxes(){this.dispatch("setAxesData")}}},ma=pa,ga={name:"heatmapSeriesData",state:()=>({heatmapSeries:[]}),action:{setHeatmapSeriesData({state:e,computed:t}){var i,s,n;e.heatmapSeries=(i=e.series,s=e.categories,n=t.viewRange,i.heatmap?i.heatmap.data.map(((e,t)=>{const{yCategory:i,data:o}=e;return Ms(o,n).map(((e,n)=>({colorValue:e,category:{x:s.x[n],y:i},indexes:[n,t]})))})):[])}},observe:{updateTreemapSeriesData(){this.dispatch("setHeatmapSeriesData")}}},va="__TOAST_UI_TREEMAP_ROOT";function fa(e,t,i,s){var n;const o=Y(t),a=s?`${s}_${o}`:`__TOAST_UI_TREEMAP_${o}`,{colorValue:r}=e,l=[{label:e.label,hasChild:!!e.children,id:a,indexes:t,parentId:s||va,depth:i,data:(n=e.data,null!=n?n:0),colorValue:r}];return e.children&&e.children.forEach(((e,s)=>{x(e.data)||l.push(...fa(e,[...t,s],i+1,a))})),l}function ba(e,t){var i;if(!e.treemap)return[];const s=e.treemap.data.filter((e=>!x(e.data))).map(((e,t)=>fa(e,[t],0))).flatMap((e=>e)).sort(((e,t)=>t.depth-e.depth));return function(e){e.forEach((({parentId:t,data:i})=>{t!==va&&(e.find((({id:e})=>e===t)).data+=i)}))}(s),function(e){const t=e.filter((({parentId:e})=>e===va)).reduce(((e,{data:t})=>e+t),0);e.forEach((i=>{const s=i.parentId===va?t:e.find((({id:e})=>e===i.parentId)).data;i.ratio=i.data/s}))}(s),(null===(i=t.series)||void 0===i?void 0:i.useColorValue)&&function(e){e.forEach((t=>{const{id:i,colorValue:s}=t;if(b(s)){const s=e.filter((({parentId:e})=>e===i)),n=s.reduce(((e,t)=>e+(b(t.colorValue)?0:t.colorValue)),0);t.colorValue=n/s.length}}))}(s),s}const xa={name:"treemapSeriesData",state:()=>({treemapSeries:[]}),action:{setTreemapSeriesData({state:e}){e.treemapSeries=ba(e.series,e.options)}},observe:{updateTreemapSeriesData(){this.dispatch("setTreemapSeriesData")}}},ya={name:"colorValueScale",state:()=>({treemapZoomId:{prev:va,cur:va},colorValueScale:{}}),action:{setColorValueScale({state:e}){const{layout:t,treemapSeries:i,legend:s,heatmapSeries:n}=e;if(!s.useSpectrumLegend)return;const o=(null!=i?i:n.flatMap((e=>e))).reduce(((e,{colorValue:t})=>t?[...e,t]:e),[]),a=Wn([...new Set(o)]),r=rs(s.align)?t.plot.width/2:t.plot.height;he(e.colorValueScale,Vn({dataRange:a,offsetSize:r,useSpectrumLegend:!0,scaleOption:{}}))},setTreemapZoomId({state:e},t){e.treemapZoomId.prev=e.treemapZoomId.cur,e.treemapZoomId.cur=t},zoomBack({state:e}){var t,i;const{treemapSeries:s,treemapZoomId:n}=e,{prev:o}=n,a=s.find((({id:e})=>e===o));e.treemapZoomId.prev=null!=(i=null===(t=a)||void 0===t?void 0:t.parentId)?i:va,e.treemapZoomId.cur=o}},observe:{updateColorValueScale(){this.dispatch("setColorValueScale")}},computed:{isTreemapSeriesZooming:({treemapZoomId:e})=>e&&e.cur!==e.prev}},Sa=ya;class wa extends jt{constructor(){super(...arguments),this.labels=[],this.renderSpectrumTooltip=([e])=>{if(e){const{labels:t,align:i}=this,{colorValue:s,color:n}=e,{width:o,height:a}=this.rect;this.models.tooltip=[{type:"spectrumTooltip",width:o,height:a,x:0,y:0,labels:t,align:i,colorRatio:e.colorRatio,color:n,text:String(s),verticalAlign:rs(i)}]}else this.models.tooltip=[]}}initialize(){this.type="spectrumLegend",this.name="spectrumLegend"}makeLabels(e){const{stepCount:t,limit:i,stepSize:s}=e,n=i.min;return C(0,t+1).reduce(((e,t)=>[...e,String(n+s*t)]),[])}renderSpectrumLegendModel(e,t){const{labels:i,align:s}=this,{width:n,height:o}=this.rect;return[{type:"spectrumLegend",width:n,height:o,x:0,y:0,labels:i,align:s,startColor:e,endColor:t,verticalAlign:rs(this.align)}]}render({layout:e,legend:t,colorValueScale:i,theme:s}){var n,o;if(this.rect=e.legend,this.align=t.align,this.isShow=t.visible&&!!t.data.length,!this.isShow)return;this.labels=this.makeLabels(i);const{startColor:a,endColor:r}=(null===(n=s.series)||void 0===n?void 0:n.heatmap)||(null===(o=s.series)||void 0===o?void 0:o.treemap);this.models={legend:this.renderSpectrumLegendModel(a,r),tooltip:[]},this.eventBus.on("renderSpectrumTooltip",this.renderSpectrumTooltip)}}function Ma(e,t){return e.map(((e,i)=>t[i]-e))}function Oa(e,t){if(b(t))return;const i=Math.abs(e.max-e.min);return i&&!x(t)?(t-e.min)/i:0}function Aa(e,t,i){const s=function(e,t,i){const s="#"+xe(e.toString(16),2)+xe(t.toString(16),2)+xe(i.toString(16),2);return!!ye(s)&&s}(...i.map(((i,s)=>i+parseInt(String(t[s]*e),10))));return w(s)?s:""}class ka extends jt{constructor(){super(...arguments),this.activatedResponders=[],this.onMouseoutComponent=()=>{this.emitMouseEvent([])},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{var s;if(!S(e)||!S(t))return;const n=t*(null===(s=i.series.heatmap)||void 0===s?void 0:s[0].data.length)+e,o=this.responders[n];if(!o)throw new Error(U);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([o],"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({index:e,seriesIndex:t,state:i})=>{var s;if(!S(e)||!S(t))return;const n=t*(null===(s=i.series.heatmap)||void 0===s?void 0:s[0].data.length)+e,o=this.responders[n];o&&this.emitMouseEvent([o])}}initialize(){this.type="series",this.name="heatmap",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){const{layout:t,heatmapSeries:i,axes:s,theme:n,colorValueScale:o,options:a}=e;if(!i)throw new Error(Z(this.name));this.theme=n.series.heatmap,this.selectable=this.getSelectableOption(a),this.rect=t.plot;const r={height:s.yAxis.tickDistance,width:s.xAxis.tickDistance};this.models={series:this.renderHeatmapSeries(i,r,o)},Io(a,this.name).visible&&this.renderDataLabels(this.makeDataLabels()),this.responders=this.makeHeatmapSeriesResponder()}makeDataLabels(){const e=this.theme.dataLabels;return this.models.series.reduce(((t,i)=>x(i.colorValue)?t:[...t,Object.assign(Object.assign({},i),{type:"treemapSeriesName",value:i.colorValue,direction:"left",plot:{x:0,y:0,size:0},theme:Object.assign(Object.assign({},e),{color:e.useSeriesColor?i.color:e.color})})]),[])}makeHeatmapSeriesResponder(){return this.models.series.reduce(((e,t)=>x(t.colorValue)?e:[...e,Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t),{label:t.name,value:t.colorValue,templateType:"heatmap"}),thickness:4,style:["shadow"]})]),[])}renderHeatmapSeries(e,t,i){const{startColor:s,endColor:n,borderColor:o,borderWidth:a}=this.theme,r=we(s),l=Ma(r,we(n)),{height:d,width:c}=t;return e.flatMap((e=>e.flatMap((e=>{const{indexes:t,colorValue:s,category:n}=e,h=`${n.x}, ${n.y}`,[u,p]=t,m=Oa(i.limit,s),g=x(s)?"rgba(0, 0, 0, 0)":Aa(m,l,r);return{type:"rect",name:h,width:c-2*a,height:d-2*a,x:c*u+a,y:d*p+a,colorValue:s,colorRatio:m,color:g,thickness:a,borderColor:o}}))))}getRespondersWithTheme(e,t){return e.map((e=>L(e,Object.assign(Object.assign({},this.theme[t]),{style:["shadow"]}))))}onClick({responders:e}){this.selectable&&(this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(e,"select"),name:this.name}),this.eventBus.emit("needDraw"))}onMousemove({responders:e}){this.activatedResponders=e,this.emitMouseEvent(e)}emitMouseEvent(e){this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.eventBus.emit("seriesPointHovered",{models:e,name:this.name}),this.eventBus.emit("renderSpectrumTooltip",e),this.eventBus.emit("needDraw")}}function Ca(e,t){return e.map(((e,i)=>({data:e,yCategory:t.y[i]})))}class Ta extends En{constructor(e){super({el:e.el,categories:e.data.categories,options:e.options,series:{heatmap:Ca(e.data.series,e.data.categories)},modules:[ga,Sa,ma]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(wa),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(ka),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,i,d,e,h,o,a])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e,t){this.resetSeries(),this.store.dispatch("addHeatmapSeries",Object.assign({data:e},t))}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{heatmap:Ca(i,t)},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class Ra extends jt{constructor(){super(...arguments),this.models={rect:[],series:[],dot:[]},this.activatedResponders=[],this.eventDetectType="nearest",this.isStackChart=!1,this.isRangeChart=!1,this.isSplineChart=!1,this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{const{index:t,seriesIndex:i}=e;if(!dn(e,"area"))return;const s=this.getResponderCategoryByIndex(t);if(!s)throw new Error(U);const n=this.tooltipCircleMap[s][i];if(!n)throw new Error(U);const o=this.getResponderSeriesWithTheme([n],"select");this.eventBus.emit("renderSelectedSeries",{models:o,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i}=e;if(!ln(e,this.eventDetectType,"area"))return;const s=this.getResponderCategoryByIndex(t);if(!s)return;const n="grouped"===this.eventDetectType?this.tooltipCircleMap[s]:[this.tooltipCircleMap[s][i]];n.length&&(this.onMousemoveNearType(n),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="area",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels&&(this.drawModels.rect[0].width=this.models.rect[0].width*e)}getBaseYPosition(e){const t=e.min>=0?e.min:Math.min(e.max,0),i=this.rect.height/(e.max-e.min);return(e.max-t)*i}getStackValue(e,t,i){const{type:s}=e.stack,{values:n,sum:o}=e.stackData[i],a=N(n.slice(0,t+1));return"percent"===s?100*a/o:a}setEventDetectType(e,t){var i,s;(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType),(e.line||this.isStackChart)&&(this.eventDetectType="grouped")}getAreaOptions(e){var t;const i=Object.assign({},e);return(null===(t=i.series)||void 0===t?void 0:t.area)&&(i.series=Object.assign(Object.assign({},i.series),i.series.area)),i}render(e,t){var i,s,n,o,a,r,l,d;const{viewRange:c}=t,{layout:h,series:u,scale:p,axes:m,legend:g,stackSeries:v,theme:f}=e;if(!u.area)throw new Error(Z(this.name));let b;const x=this.getAreaOptions(e.options),y=e.categories,S=null!=(i=e.rawCategories)?i:[];this.theme=f.series.area,this.rect=h.plot,this.activeSeriesMap=hn(g),this.startIndex=null!=(n=null===(s=c)||void 0===s?void 0:s[0])?n:0,this.selectable=this.getSelectableOption(x),this.isSplineChart=null!=(a=null===(o=x.series)||void 0===o?void 0:o.spline)&&a;const{limit:w}=p[ui(x,this.name,"yAxis")],{tickDistance:M,pointOnColumn:O,tickCount:A}=m.xAxis,k=u.area.data;this.baseYPosition=this.getBaseYPosition(w),(null===(r=v)||void 0===r?void 0:r.area)?(this.isStackChart=!0,b=v.area):ws(null===(l=F(k))||void 0===l?void 0:l.data)&&(this.isRangeChart=!0),this.setEventDetectType(u,x);const C={pointOnColumn:O,options:x.series||{},tickDistance:M,tickCount:A,areaStackSeries:b};this.linePointsModel=this.renderLinePointsModel(k,w,C);const T=this.renderAreaPointsModel(),R=!!(null===(d=x.series)||void 0===d?void 0:d.showDot),{dotSeriesModel:D,responderModel:j}=this.renderCircleModel(R),B=this.makeTooltipData(k,S);this.models=E({rect:[this.renderClipRectAreaModel()],series:[...this.linePointsModel,...T],dot:D}),this.drawModels||(this.drawModels=Object.assign(Object.assign({},this.models),{rect:[this.renderClipRectAreaModel(!0)]})),Io(x,this.name).visible&&this.renderDataLabels(this.getDataLabels(T)),this.tooltipCircleMap=Bo(j,B),this.responders=this.getResponders(j,B,y,S,m.xAxis)}getResponders(e,t,i,s,n){return"near"===this.eventDetectType?this.makeNearTypeResponderModel(e,t,s):"point"===this.eventDetectType?this.makeNearTypeResponderModel(e,t,s,0):Do(this.rect,n,i)}makeNearTypeResponderModel(e,t,i,s){const n=t.length;return e.map(((e,o)=>Object.assign(Object.assign({},e),{data:t[o%n],detectionSize:s,label:i[e.index]})))}renderClipRectAreaModel(e){return{type:"clipRectArea",x:0,y:0,width:e?0:this.rect.width,height:this.rect.height}}makeTooltipData(e,t){return e.flatMap((({rawData:e,name:i,color:s},n)=>{const o=[];return e.forEach(((e,a)=>{if(!x(e)){const r=this.isRangeChart?`${e[0]} ~ ${e[1]}`:e;o.push({label:i,color:s,value:r,category:t[a],seriesIndex:n,index:a})}})),o}))}getLinePointModelValue(e,t){return this.isRangeChart?t?e[0]:e[1]:e}getLinePointModel(e,t,i,s){const{pointOnColumn:n,tickDistance:o,pairModel:a,areaStackSeries:r}=s,{rawData:l,name:d,color:c}=e,h=this.activeSeriesMap[d],u=[],p=Me(c,h?1:.06),{lineWidth:m,dashSegments:g}=this.theme;return l.forEach(((e,s)=>{if(x(e))return void u.push(null);const l=this.getLinePointModelValue(e,a),d=kt(this.isStackChart?this.getStackValue(r,t,s):l,i),c=o*(s-this.startIndex)+(n?o/2:0),h=(1-d)*this.rect.height;u.push({x:c,y:h,value:l})})),a&&u.reverse(),this.isSplineChart&&At(u),{type:"linePoints",lineWidth:m,dashSegments:g,color:p,points:u,seriesIndex:t,name:d}}renderLinePointsModel(e,t,i){const s=e.map(((e,s)=>this.getLinePointModel(e,s,t,i)));if(this.isRangeChart){const n=L(i,{pairModel:!0}),o=e.map(((e,i)=>this.getLinePointModel(e,i,t,n)));s.push(...o)}return s}getCombinedPoints(e,t){return[...e>=0?this.linePointsModel[e].points:[],...[...this.linePointsModel[t].points].reverse()]}renderRangeAreaSeries(e){const t=[];return e.forEach((e=>{let i=[];const{points:s}=e;s.slice(0,s.length/2+1).forEach(((n,o)=>{const a=o===s.length/2-1,r=x(n);if(r||i.push(n),i.length&&(a||r)){const n=i.map(((e,t)=>{const n=s.length/2+o-i.length+t+(!r&&a?1:0);return s[n]})).reverse();t.push(Object.assign(Object.assign({},e),{type:"areaPoints",lineWidth:0,color:"rgba(0, 0, 0, 0)",fillColor:this.getAreaOpacity(e.name,e.color),points:[...i,...n]})),i=[]}}))})),t}renderAreaSeries(e){const t=[],i=[];return e.forEach((e=>{let s=[];const n=[...i],{points:o}=e;o.forEach(((a,r)=>{const l=r===o.length-1,d=x(a);if(x(a)||s.push(a),s.length&&(d||l)){const o=s.map(((e,t)=>{const o=r-s.length+t+(!d&&l?1:0),a=b(n[o])?this.baseYPosition:n[o];return this.isStackChart&&(i[o]=e.y),{x:e.x,y:a}})).reverse();this.isStackChart&&this.isSplineChart&&At(o),t.push(Object.assign(Object.assign({},e),{type:"areaPoints",lineWidth:0,color:"rgba(0, 0, 0, 0)",fillColor:this.getAreaOpacity(e.name,e.color),points:[...s,...o]})),s=[]}}))})),t}getCombinedLinePointsModel(){if(!this.isRangeChart)return this.linePointsModel;const e=this.linePointsModel.length/2;return C(0,e).reduce(((t,i)=>{const s=i,n=e+i,o=this.getCombinedPoints(s,n);return[...t,Object.assign(Object.assign({},this.linePointsModel[i]),{points:o})]}),[])}getAreaOpacity(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return Me(t,Object.values(this.activeSeriesMap).some((e=>!e))?n?i.areaOpacity:i.restSeries.areaOpacity:s)}renderAreaPointsModel(){const e=this.getCombinedLinePointsModel();return this.isRangeChart?this.renderRangeAreaSeries(e):this.renderAreaSeries(e)}renderCircleModel(e){const t=[],i=[],{dot:s}=this.theme;return this.linePointsModel.forEach((({points:n,color:o,seriesIndex:a,name:r},l)=>{const d=this.isRangeChart&&l>=this.linePointsModel.length/2,c=this.activeSeriesMap[r];n.forEach(((l,h)=>{var u;if(x(l))return;const p=Object.assign(Object.assign({type:"circle"},l),{seriesIndex:a,name:r,index:d?n.length-h-1:h});e&&t.push(Object.assign(Object.assign({},p),{radius:s.radius,color:Me(o,c?1:.3),style:[{lineWidth:s.borderWidth,strokeStyle:(u=s.borderColor,null!=u?u:o)}]})),i.push(...this.getResponderSeriesWithTheme([p],"hover",o))}))})),{dotSeriesModel:t,responderModel:i}}getPairCircleModel(e){const t=[];return e.forEach((e=>{const{seriesIndex:i,y:s,data:n}=e,{category:o}=n,a=this.tooltipCircleMap[o].find((e=>e.seriesIndex===i&&e.y!==s));t.push(a)})),t}getCircleModelsFromRectResponders(e,t){var i;if(!e.length||!e[0].label)return[];const s=null!=(i=this.tooltipCircleMap[e[0].label])?i:[];return"grouped"===this.eventDetectType?s:Ro(s,t,this.rect)}onMousemoveGroupedType(e){const t=this.getCircleModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=this.isRangeChart?t.slice(0,t.length/2):t}onMousemoveNearestType(e,t){const i=this.getCircleModelsFromRectResponders(e,t);this.onMousemoveNearType(i)}onMousemoveNearType(e){let t=[];this.isRangeChart&&(t=this.getPairCircleModel(e));const i=[...e,...t];this.eventBus.emit("renderHoveredSeries",{models:i,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e}onMousemove({responders:e,mousePosition:t}){"nearest"===this.eventDetectType?this.onMousemoveNearestType(e,t):["near","point"].includes(this.eventDetectType)?this.onMousemoveNearType(e):this.onMousemoveGroupedType(e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}getDataLabels(e){const t=this.theme.dataLabels;return e.flatMap((({points:e,name:i,fillColor:s})=>e.map((e=>x(e)?{}:Object.assign(Object.assign({type:"point"},e),{name:i,theme:Object.assign(Object.assign({},t),{color:t.useSeriesColor?Me(s,1):t.color})})))))}getResponderSeriesWithTheme(e,t,i){const{radius:s,color:n,borderWidth:o,borderColor:a}=this.theme[t].dot;return e.map((e=>{var t;const r=null!=(t=null!=n?n:e.color)?t:i;return Object.assign(Object.assign({},e),{radius:s,color:r,style:[{lineWidth:o,strokeStyle:null!=a?a:Me(r,.5)}]})}))}onClick({responders:e,mousePosition:t}){if(this.selectable){let i;i="near"===this.eventDetectType?e:this.getCircleModelsFromRectResponders(e,t),this.eventBus.emit("renderSelectedSeries",{models:this.getResponderSeriesWithTheme(i,"select"),name:this.name}),this.eventBus.emit("needDraw")}}getResponderCategoryByIndex(e){var t,i;return null===(i=null===(t=Object.values(this.tooltipCircleMap).flatMap((e=>e)).find((t=>t.index===e)))||void 0===t?void 0:t.data)||void 0===i?void 0:i.category}}class Da extends En{constructor(e){super({el:e.el,options:e.options,series:{area:e.data.series},categories:e.data.categories,modules:[oo,Yn,lo,Ii,po]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(Ra),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(Lt,{name:"secondaryYAxis"}),this.componentManager.add(Vo),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(_o,{name:"secondaryYAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(Jo),this.componentManager.add(Ko),this.componentManager.add(ta),this.painter.addGroups([t,i,c,d,e,h,o,u])}addData(e,t){this.resetSeries(),this.animationControlFlag.updating=!0,this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{area:i},categories:t})}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class ja extends jt{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.getModelsForSelectInfo=e=>{const{index:t,seriesIndex:i,state:s}=e;if(!S(t)||!S(i)||!dn(e,"scatter"))return;const{name:n}=s.series.scatter.data[i];return[this.responders.filter((({name:e})=>e===n))[t]]},this.selectSeries=e=>{const t=this.getModelsForSelectInfo(e);if(!t)return;const i=this.getClosestModel(t);if(!t.length)throw new Error(U);this.eventBus.emit("renderSelectedSeries",{models:this.getResponderAppliedTheme(i,"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const t=this.getModelsForSelectInfo(e);t&&(this.eventBus.emit("renderHoveredSeries",{models:t,name:this.name}),this.activatedResponders=t,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="scatter",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels.series.forEach(((t,i)=>{t.size=this.models.series[i].size*e}))}render(e){var t,i;const{layout:s,series:n,scale:o,legend:a,options:r,theme:l,axes:d}=e;if(!n.scatter)throw new Error(Z(this.name));const c=n.scatter.data;this.theme=l.series.scatter,this.rect=s.plot,this.activeSeriesMap=hn(a),this.selectable=this.getSelectableOption(r);const h=null!=(i=null===(t=d.xAxis)||void 0===t?void 0:t.labelRange)?i:o.xAxis.limit,u=this.renderScatterPointsModel(c,h,o[ui(r,this.name,"yAxis")].limit),p=this.makeTooltipModel(c);this.models.series=u,this.drawModels||(this.drawModels=E(this.models)),this.responders=u.map(((e,t)=>Object.assign(Object.assign({},e),{type:"circle",detectionSize:0,radius:this.theme.size/2,color:e.fillColor,style:[{strokeStyle:e.borderColor,lineWidth:e.borderWidth}],data:p[t]})))}renderScatterPointsModel(e,t,i){return e.flatMap((({data:e,name:s,color:n,iconType:o},a)=>{const r=[],l=Me(n,this.activeSeriesMap[s]?1:.3);return e.forEach(((e,n)=>{const d=Ri(e),c=w(d)?Number(new Date(d)):Number(d),h=Ti(e),u=kt(c,t),p=kt(h,i),m=u*this.rect.width,g=(1-p)*this.rect.height;r.push(Object.assign({x:m,y:g,type:"scatterSeries",iconType:o,seriesIndex:a,name:s,borderColor:l,index:n},R(this.theme,"borderWidth","size","fillColor")))})),r}))}makeTooltipModel(e){return[...e].flatMap((({data:e,name:t,color:i})=>{const s=[];return e.forEach((e=>{const n={x:Ri(e),y:Ti(e)};s.push({label:t,color:i,value:n})})),s}))}getClosestModel(e){if(!e.length)return[];const t=this.models.series.find((({index:t,seriesIndex:i})=>S(t)&&S(i)&&t===e[0].index&&i===e[0].seriesIndex));return t?[t]:[]}getResponderAppliedTheme(e,t){const{fillColor:i,size:s}=this.theme[t];return e.map((e=>L(e,Object.assign(Object.assign({},this.theme[t]),{color:i,radius:s/2}))))}onMousemove({responders:e,mousePosition:t}){const i=Ro(e,t,this.rect);let s=this.getClosestModel(i);s=this.getResponderAppliedTheme(s,"hover"),this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name}),this.activatedResponders=i,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e,mousePosition:t}){if(this.selectable){const i=Ro(e,t,this.rect);let s=this.getClosestModel(i);s=this.getResponderAppliedTheme(s,"select"),this.eventBus.emit("renderSelectedSeries",{models:s,name:this.name}),this.eventBus.emit("needDraw")}}}class Ba extends En{constructor(e){super({el:e.el,options:e.options,series:e.data.series,modules:[Yn,lo,Ii,po]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(Fo),this.componentManager.add(ja),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(Lt,{name:"secondaryYAxis"}),this.componentManager.add(Vo),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(_o,{name:"secondaryYAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(Ko),this.componentManager.add(ta),this.painter.addGroups([t,i,c,d,e,h,o,u,l])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,chartType:t})}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",e)}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class La extends En{constructor(e){super({el:e.el,options:e.options,series:e.data.series,categories:e.data.categories,modules:[oo,Yn,lo,Ii,po]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(Ra),this.componentManager.add(Fo),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(Lt,{name:"secondaryYAxis"}),this.componentManager.add(Vo),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(_o,{name:"secondaryYAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(Ko),this.componentManager.add(Jo),this.componentManager.add(ta),this.painter.addGroups([t,i,c,d,e,h,o,u])}addData(e,t,i){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t,chartType:i})}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",e)}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Pa(e,t,i){return e<0?function(e,t,i){let s=e;return s>=i?0:(i<0&&(s=Math.min(e-i,0)),e<t&&(s-=e-t),s)}(e,t,i):function(e,t,i){let s=e;return t>0&&(s=Math.max(e-t,0)),e>i&&(s-=e-i),s}(e,t,i)}function Ea(e,t,i=!1){const s=e[t];return e.reduce(((e,n,o)=>(i?o<=t:o<t)&&n*s>=0?e+n:e),0)}var Wa;!function(e){e[e.POSITIVE=0]="POSITIVE",e[e.NEGATIVE=1]="NEGATIVE",e[e.BOTH=2]="BOTH"}(Wa||(Wa={}));function za(e){return!!(e%2)}class Ia extends jt{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.isBar=!0,this.valueAxis="xAxis",this.labelAxis="yAxis",this.anchorSizeKey="height",this.offsetSizeKey="width",this.basePosition=0,this.leftBasePosition=0,this.rightBasePosition=0,this.isRangeData=!1,this.offsetKey="x",this.eventDetectType="point",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{const{index:t,seriesIndex:i}=e;if(!dn(e,"column"))return;const s=this.tooltipRectMap[i][t];if(!s)throw new Error(U);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([s],"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i}=e;if(!ln(e,this.eventDetectType,"column"))return;const s="grouped"===this.eventDetectType?this.getGroupedRect([this.responders[t]],"hover"):this.getRespondersWithTheme([this.tooltipRectMap[t][i]],"hover");s.length&&(this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders="grouped"===this.eventDetectType?this.tooltipRectMap[t]:s,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize({name:e,stackChart:t}){this.initializeFields(e),t||(this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent))}initializeFields(e){this.type="series",this.name=e,this.isBar="bar"===e,this.offsetKey=this.isBar?"x":"y",this.valueAxis=this.isBar?"xAxis":"yAxis",this.labelAxis=this.isBar?"yAxis":"xAxis",this.anchorSizeKey=this.isBar?"height":"width",this.offsetSizeKey=this.isBar?"width":"height"}initUpdate(e){this.drawModels&&(this.isRangeData?this.initUpdateRangeData(e):(this.initUpdateClipRect(e),this.initUpdateConnector(e)))}initUpdateRangeData(e){const{series:t}=this.drawModels;this.drawModels.clipRect=this.models.clipRect;const i=this.models.series;t.forEach(((t,s)=>{const n=i[s];0===e&&(t[this.offsetSizeKey]=0);const o=t[this.offsetSizeKey]+(n[this.offsetSizeKey]-t[this.offsetSizeKey])*e;t[this.offsetSizeKey]=o,this.isBar||(t[this.offsetKey]=n[this.offsetKey]+n[this.offsetSizeKey]-o)}))}initUpdateClipRect(e){const{clipRect:t}=this.drawModels;if(!t)return;const i=t[0],s=this.offsetSizeKey,n=this.models.clipRect[0],o=i[s]+(n[s]-i[s])*e;i[s]=o,i[this.offsetKey]=Math.max(this.basePosition-o*this.basePosition/n[s],0)}initUpdateConnector(e){const{connector:t}=this.drawModels;if(!t)return;const i=this.models.connector;t.forEach(((t,s)=>{const n=Oe(i[s].strokeStyle)*e;t.strokeStyle=Me(t.strokeStyle,n)}))}setEventDetectType(e,t){var i,s;e.line&&(this.eventDetectType="grouped"),(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType)}getOptions(e){var t;const i=Object.assign({},e);return(null===(t=i)||void 0===t?void 0:t.series)&&i.series.column&&(i.series=Object.assign(Object.assign({},i.series),i.series.column)),i}render(e,t){var i,s;const{layout:n,series:o,axes:a,stackSeries:r,legend:l,theme:d,scale:c}=e;if(this.isShow=!(r&&r[this.name]),!this.isShow)return;const h=null!=(i=e.categories)?i:[],u=this.getOptions(e.options);this.setEventDetectType(o,u),this.theme=d.series[this.name],this.rect=n.plot,this.activeSeriesMap=hn(l),this.selectable=this.getSelectableOption(u),this.valueAxis=ui(u,this.name,this.isBar?"xAxis":"yAxis");const p=o[this.name].data.map((e=>Object.assign(Object.assign({},e),{data:Ms(e.data,t.viewRange)})));a.centerYAxis&&(this.valueAxis="centerYAxis");const{tickDistance:m}=a[this.labelAxis],g=!!(null===(s=u.series)||void 0===s?void 0:s.diverging),{limit:v,stepSize:f}=this.getScaleData(c),b=St(v,f),{min:x,max:y}=di(b);this.basePosition=this.getBasePosition(a[this.valueAxis]);let S=this.getOffsetSize();const{centerYAxis:w}=a;if(g){const[e,t]=this.getDivergingBasePosition(w);this.basePosition=this.getOffsetSize()/2,this.leftBasePosition=e,this.rightBasePosition=t,S=this.getOffsetSizeWithDiverging(w)}const M={min:x,max:y,tickDistance:m,diverging:g,ratio:this.getValueRatio(x,y,S),hasNegativeValue:H(b),seriesDirection:this.getSeriesDirection(b),defaultPadding:Be(m)},O=this.renderSeriesModel(p,M),A=this.makeTooltipData(p,M,h),k=this.renderClipRectAreaModel();if(this.models={clipRect:[k],series:O},this.drawModels||(this.drawModels={clipRect:[this.initClipRect(k)],series:P(O)}),Io(u,this.name).visible){const e=O.reduce(((e,t)=>Ss(t.value)?[...e,...this.makeDataLabelRangeData(t)]:[...e,this.makeDataLabel(t,w)]),[]);this.renderDataLabels(e)}this.tooltipRectMap=this.makeTooltipRectMap(O,A),this.responders=this.getBoxSeriesResponders(O,A,a,h)}getScaleData(e){return e["centerYAxis"===this.valueAxis?"xAxis":this.valueAxis]}getBoxSeriesResponders(e,t,i,s){const n=this.renderHoveredSeriesModel(e);return"grouped"===this.eventDetectType?Do(this.rect,this.isBar?i.yAxis:i.xAxis,s,!this.isBar):n.map(((e,i)=>Object.assign(Object.assign({},e),{data:t[i]})))}makeTooltipRectMap(e,t){return e.reduce(((e,i,s)=>{const n=i.index,o=Object.assign(Object.assign({},i),{data:t[s]});return e[n]||(e[n]=[]),e[n].push(o),e}),[])}renderClipRectAreaModel(){return{type:"clipRectArea",x:0,y:0,width:this.rect.width,height:this.rect.height}}initClipRect(e){return{type:"clipRectArea",width:this.isBar?0:e.width,height:this.isBar?e.height:0,x:this.isBar?0:e.x,y:this.isBar?e.y:0}}renderSeriesModel(e,t){const{tickDistance:i,diverging:s}=t,n=e.length,o=s&&2===e.length,a=this.getColumnWidth(t,n,o),r=[],l=(i-a*(o?1:n))/2;return e.forEach((({data:e,color:n,name:o,colorByCategories:d},c)=>{const h=(s?0:c)*a+l,u=s&&za(c),p=d?n.length:1;this.isRangeData=ws(e),e.forEach(((e,s)=>{const l=h+s*i,c=this.makeBarLength(e,t),m=this.getSeriesColor(o,d?n[s%p]:n);if(S(c)){const i=this.getStartPosition(c,e,t,u);r.push(Object.assign(Object.assign({type:"rect",color:m,value:e},this.getAdjustedRect(l,i,c,a)),{name:o,index:s}))}}))})),r}renderHoveredSeriesModel(e){return e.map((e=>this.makeHoveredSeriesModel(e)))}makeHoveredSeriesModel(e){const{x:t,y:i,width:s,height:n,color:o,index:a}=e;return{type:"rect",color:Me(o,1),x:t,y:i,width:s,height:n,index:a}}getRectModelsFromRectResponders(e){var t;return e.length&&null!=(t=this.tooltipRectMap[e[0].index])?t:[]}getGroupedRect(e,t){const i=this.getRectModelsFromRectResponders(e),{color:s,opacity:n}=this.theme[t].groupedRect;return i.length?e.map((e=>Object.assign(Object.assign({},e),{color:Me(s,n)}))):[]}onMousemoveGroupedType(e){const t=this.getRectModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:this.getGroupedRect(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}onMousemove({responders:e}){"grouped"===this.eventDetectType?this.onMousemoveGroupedType(e):(this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}makeTooltipData(e,t,i){const s=[];return e.forEach((({data:e,name:n,color:o,colorByCategories:a})=>{e.forEach(((e,r)=>{x(e)||S(this.makeBarLength(e,t))&&s.push({label:n,color:a?o[r]:o,value:this.getTooltipValue(e),category:i.length?i[r]:""})}))})),s}getTooltipValue(e){return Ss(e)?`${e[0]} ~ ${e[1]}`:e}getBasePosition({labels:e,tickCount:t,zeroPosition:i}){const s=this.isBar?e:[...e].reverse(),n=wt(this.getOffsetSize(),t),o=this.getSeriesDirection(s);return i||this.getTickPositionIfNotZero(n,o)}getDivergingBasePosition(e){let t,i;return e?(t=e.xAxisHalfSize,i=e.secondStartX):t=i=this.getOffsetSize()/2,[t,i]}getOffsetSize(){return this.rect[this.offsetSizeKey]}getValueRatio(e,t,i){return i/(t-e)}makeBarLength(e,t){if(x(e))return null;const{min:i,max:s,ratio:n}=t,o=function(e,t,i){if(Ss(e)){let[s,n]=e;return s<t&&(s=t),n>i&&(n=i),n-s}return Pa(e,t,i)}(e,i,s);return Math.max(this.getBarLength(o,n),2)}getBarLength(e,t){return e<0?Math.abs(e)*t:e*t}getStartPositionWithRangeValue(e,t,i){const{min:s,ratio:n}=i;let[o]=e;o<s&&(o=s);const a=(o-s)*n;return this.isBar?a:this.getOffsetSize()-a-t}getStartPosition(e,t,i,s){const{diverging:n,seriesDirection:o}=i;let a;return a=Ss(t)?this.getStartPositionWithRangeValue(t,e,i):n?s?this.getStartPosOnLeftBottomSide(e,n):this.getStartPosOnRightTopSide(e,n):o===Wa.POSITIVE?this.getStartPosOnRightTopSide(e):o===Wa.NEGATIVE||t<0?this.getStartPosOnLeftBottomSide(e):this.getStartPosOnRightTopSide(e),a}getStartPosOnRightTopSide(e,t=!1){let i;return i=t?this.isBar?this.rightBasePosition:this.rightBasePosition-e:this.isBar?this.basePosition:this.basePosition-e,i}getStartPosOnLeftBottomSide(e,t=!1){let i;return i=t?this.isBar?this.leftBasePosition-e:this.leftBasePosition:this.isBar?this.basePosition-e:this.basePosition,i}getAdjustedRect(e,t,i,s){return{x:this.isBar?t:e,y:this.isBar?e:t,width:this.isBar?i:s,height:this.isBar?s:i}}getColumnWidth(e,t,i=!1){const{tickDistance:s,defaultPadding:n}=e;t=i?1:t;const o=this.theme.barWidth;return o?$(s,o):(s-2*n)/t}getSeriesDirection(e){let t=Wa.BOTH;return e.every((e=>Number(e)>=0))?t=Wa.POSITIVE:X(e)&&(t=Wa.NEGATIVE),t}getTickPositionIfNotZero(e,t){if(!e.length)return 0;const i=Number(I(e)),s=Number(Y(e));return t===Wa.POSITIVE?this.isBar?i:s:t===Wa.NEGATIVE?this.isBar?s:i:0}makeDataLabel(e,t){const{dataLabels:i}=this.theme;return Object.assign(Object.assign({},e),{direction:this.getDataLabelDirection(e,t),plot:{x:0,y:0,size:this.getOffsetSize()},theme:Object.assign(Object.assign({},D(i,"stackTotal")),{color:i.useSeriesColor?e.color:i.color})})}makeDataLabelRangeData(e){const{dataLabels:t}=this.theme;return e.value.reduce(((i,s,n)=>[...i,Object.assign(Object.assign({},e),{value:s,direction:this.getDataLabelRangeDataDirection(n%2==0),plot:{x:0,y:0,size:this.getOffsetSize()},theme:Object.assign(Object.assign({},D(t,"stackTotal")),{color:t.useSeriesColor?e.color:t.color})})]),[])}getDataLabelRangeDataDirection(e){let t;return t=this.isBar?e?"left":"right":e?"bottom":"top",t}getDataLabelDirection(e,t){let i;if(this.isBar){const s=t?this.leftBasePosition:this.basePosition;i=e.x<s?"left":"right"}else i=e.y>=this.basePosition?"bottom":"top";return i}getOffsetSizeWithDiverging(e){return e?e.xAxisHalfSize:this.getOffsetSize()/2}onClick({responders:e}){if(this.selectable){let t;t="grouped"===this.eventDetectType?[...this.getGroupedRect(e,"select"),...this.getRectModelsFromRectResponders(e)]:this.getRespondersWithTheme(e,"select"),this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}getRespondersWithTheme(e,t){const{color:i,borderColor:s,borderWidth:n,shadowBlur:o,shadowColor:a,shadowOffsetX:r,shadowOffsetY:l}=this.theme[t];return e.map((e=>Object.assign(Object.assign({},e),{color:null!=i?i:e.color,thickness:n,borderColor:s,style:[{shadowBlur:o,shadowColor:a,shadowOffsetX:r,shadowOffsetY:l}]})))}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return Me(t,Object.values(this.activeSeriesMap).some((e=>!e))?n?i.areaOpacity:i.restSeries.areaOpacity:s)}}class Ya extends Ia{constructor(){super(...arguments),this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{stackSeries:s}=i,n=s[this.name],{name:o}=n.data[t],a=this.tooltipRectMap[e].find((({name:e})=>e===o));if(!a)throw new Error(U);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([a],"select"),name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}initialize({name:e,stackChart:t}){this.initializeFields(e),t&&(this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent))}render(e,t){var i,s;const{layout:n,series:o,axes:a,stackSeries:r,legend:l,theme:d,scale:c}=e,{viewRange:h}=t;if(this.isShow=!!r[this.name],!this.isShow)return;const u=null!=(i=e.categories)?i:[],p=this.getOptions(e.options);this.setEventDetectType(o,p),this.theme=d.series[this.name],this.rect=n.plot,this.activeSeriesMap=hn(l),this.selectable=this.getSelectableOption(p);const m=function(e,t){if(!t)return e;const i=Array.isArray(e.stackData)?Ms(e.stackData,t):Object.assign({},Object.keys(e.stackData).reduce(((i,s)=>Object.assign(Object.assign({},i),{[s]:Ms(e.stackData[s],t)})),{})),s=e.data.map((e=>Object.assign(Object.assign({},e),{data:Ms(e.data,t)})));return Object.assign(Object.assign({},e),{data:s,stackData:i})}(r[this.name],h),{tickDistance:g}=a[this.labelAxis],v=!!(null===(s=p.series)||void 0===s?void 0:s.diverging),{limit:f,stepSize:b}=this.getScaleData(c),x=St(f,b),{min:y,max:S}=di(x),{stack:w,scaleType:M}=m;this.basePosition=this.getBasePosition(a[this.valueAxis]);let O=this.getOffsetSize();const{centerYAxis:A}=a;if(v){const[e,t]=this.getDivergingBasePosition(A);this.basePosition=this.getOffsetSize()/2,this.leftBasePosition=e,this.rightBasePosition=t,O=this.getOffsetSizeWithDiverging(A)}const k={stack:w,scaleType:M,tickDistance:g,min:y,max:S,diverging:v,hasNegativeValue:H(x),seriesDirection:this.getSeriesDirection(x),defaultPadding:Be(g),offsetSize:O,centerYAxis:A},{series:C,connector:T}=this.renderStackSeriesModel(m,k),R=this.renderClipRectAreaModel(),D=this.getTooltipData(m,u);if(this.models={clipRect:[R],series:C,connector:T},this.drawModels||(this.drawModels={clipRect:[this.initClipRect(R)],series:P(C),connector:P(T)}),Io(p,this.name).visible){const e=this.getDataLabels(C,k),t=this.getTotalDataLabels(m,k);this.renderDataLabels([...e,...t])}this.tooltipRectMap=this.makeTooltipRectMap(C,D),this.responders=this.getBoxSeriesResponders(C,D,a,u)}renderStackSeriesModel(e,t){const{stackData:i}=e;return Zn(i)?this.makeStackGroupSeriesModel(e,t):this.makeStackSeriesModel(i,t,e.data)}makeStackSeriesModel(e,t,i,s=1,n=0){const o=[],a=this.getStackColumnWidth(t,s),{diverging:r}=t,l=r&&za(n);return e.forEach((({values:e,total:r},d)=>{const c=this.getSeriesPosition(t,a,d,n,s),h=this.getStackValueRatio(r,t);e.forEach(((s,n)=>{const{barLength:r,dataPosition:u}=this.getStackRectInfo(e,n,h,t,l),{name:p,colorByCategories:m,color:g}=i[n],v=this.activeSeriesMap[p],f=g.length||1,b=Me(m?g[d%f]:g,v?1:.2);o.push(Object.assign(Object.assign({type:"rect",color:b,name:p,value:s},this.getAdjustedRect(c,u,null!=r?r:0,a)),{index:d}))}))})),{series:o,connector:this.makeConnectorSeriesModel(e,t,s,n)}}makeStackGroupSeriesModel(e,t){const{stack:i}=t,s=e.stackData,n=e.data,o=Object.keys(s);let a=[],r=[];return o.forEach(((e,l)=>{const d=n.filter((({stackGroup:t})=>t===e)),{series:c,connector:h}=this.makeStackSeriesModel(s[e],t,d,o.length,l);a=[...a,...c],i.connector&&(r=[...r,...h])})),{series:a,connector:r}}makeConnectorSeriesModel(e,t,i=1,s=0){const{diverging:n,stack:{connector:o}}=t;if(!o)return[];const a=this.getStackColumnWidth(t,i),r=n&&za(s),l=[];return e.forEach((({values:e,total:n},o)=>{const d=this.getSeriesPosition(t,a,o,s,i),c=[],h=this.getStackValueRatio(n,t);e.forEach(((i,s)=>{const{barLength:n,dataPosition:o}=this.getStackRectInfo(e,s,h,t,r),{x:l,y:u}=this.getAdjustedRect(d,o,n,a),p=!r&&this.isBar?l+n:l,m=r&&!this.isBar?u+n:u;c.push({x:p,y:m})})),l.push(c)})),this.makeConnectorModel(l,o,a)}getTooltipData(e,t){const i=e.data,{stackData:s}=e,n=i.map((({color:e})=>e));return Zn(s)?this.makeGroupStackTooltipData(i,s,t):this.makeStackTooltipData(i,s,n,t)}makeGroupStackTooltipData(e,t,i){return Object.keys(t).flatMap((s=>{const n=e.filter((({stackGroup:e})=>e===s)),o=n.map((({color:e})=>e));return this.makeStackTooltipData(n,t[s],o,i)}))}makeStackTooltipData(e,t,i,s){const n=[];return t.forEach((({values:t},o)=>{t.forEach(((t,a)=>{n.push({label:e[a].name,color:i[a],value:t,category:s.length?s[o]:""})}))})),n}makeConnectorModel(e,t,i){if(!t||!e.length)return[];const{color:s,lineWidth:n,dashSegments:o}=this.theme.connector,a=[],r=e.length,l=e[0].length;for(let t=0;t<l;t+=1){const l=[];for(let i=0;i<r;i+=1)l.push(e[i][t]);l.forEach(((e,t)=>{const{x:r,y:d}=e;if(t<l.length-1){const{x:e,y:c}=l[t+1];a.push({type:"line",x:this.isBar?r:r+i,y:this.isBar?d+i:d,x2:e,y2:c,dashSegments:o,strokeStyle:s,lineWidth:n})}}))}return a}getStackValueRatio(e,t){const{stack:{type:i},scaleType:s,min:n,max:o,offsetSize:a}=t;return"percent"===i?a/function(e,t){const{positive:i,negative:s}=e;let n=i+Math.abs(s);return T(["dualPercentStack","divergingPercentStack"],t)&&(n*=2),n}(e,s):this.getValueRatio(n,o,a)}getStackBarLength(e,t,i,s){const n=function(e,t,i){const{stack:s,min:n,max:o}=i;return qn(s)?e[t]:function(e,t,i,s){const n=Ea(e,t,!1),o=Ea(e,t,!0);if(function(e,t,i,s){const n=e[t],o=Ea(e,t,!1),a=n>=0,r=n<0;return a&&o>=s||r&&o<=i||0===t&&a&&n<i||0===t&&r&&n>s}(e,t,i,s))return null;if(0===t)return Pa(e[t],i,s);if(n<i&&o>s)return s-i;let a=e[t];return o>s?a=s-n:o<i?a=i-n:n<i?a=o-i:n>s&&(a=o-s),a}(e,t,n,o)}(e,t,s);return S(n)?this.getBarLength(n,i):null}getStackColumnWidth(e,t){const{tickDistance:i,diverging:s,defaultPadding:n}=e,o=s?1:t,a=this.theme.barWidth;return a?$(i,a):(i-2*n)/o}getSeriesPosition(e,t,i,s,n){const{tickDistance:o,diverging:a}=e;return i*o+(o-t*(a?1:n))/2+t*(a?0:s)}getStackStartPosition(e,t,i,s,n){const{stack:o,diverging:a,seriesDirection:r}=s;let l;return l=a?n?this.calcStartPosOnLeftBottomSide(e,t,s,i):this.calcStartPosOnRightTopSide(e,t,s,i):qn(o)?this.calcStartPositionWithPercent(e,t,i):r===Wa.POSITIVE?this.calcStartPosOnRightTopSide(e,t,s,i):r===Wa.NEGATIVE?this.calcStartPosOnLeftBottomSide(e,t,s,i):this.calcStartPositionWithStack(e,t,s,i),l}calcStartPosOnLeftBottomSide(e,t,i,s){const{min:n,max:o,diverging:a}=i,r=a?this.leftBasePosition:this.basePosition,l=Ea(e,t,!1),d=Ea(e,t,!0),c=d<n,h=this.isBar?d:l,u=o<0?Math.min(h-o,0):h;let p;return p=this.isBar?c?0:r-Math.abs(u)*s:r+Math.abs(u)*s,p}calcStartPosOnRightTopSide(e,t,i,s){const{min:n,max:o,diverging:a}=i,r=a?this.rightBasePosition:this.basePosition,l=Ea(e,t,!1),d=Ea(e,t,!0),c=d>o,h=this.isBar?l:d,u=(n>0?Math.max(h-n,0):h)*s;let p;return p=this.isBar?r+u:c?0:r-u,p}calcStartPositionWithStack(e,t,i,s){return e[t]<0?this.calcStartPosOnLeftBottomSide(e,t,i,s):this.calcStartPosOnRightTopSide(e,t,i,s)}calcStartPositionWithPercent(e,t,i){const s=this.basePosition,n=Ea(e,t,this.isBar?e[t]<0:e[t]>0);return this.isBar?n*i+s:s-n*i}getStackRectInfo(e,t,i,s,n){return{barLength:this.getStackBarLength(e,t,i,s),dataPosition:this.getStackStartPosition(e,t,i,s,n)}}getDataLabels(e,t){return e.map((e=>this.makeDataLabel(e,t.centerYAxis)))}getTotalDataLabels(e,t){const{stackData:i,stack:s}=e;return qn(s)?[]:Zn(i)?this.makeGroupTotalDataLabels(e,t):this.makeTotalDataLabels(i,t)}makeGroupTotalDataLabels(e,t){let i=[];const s=e.stackData,n=Object.keys(s);return n.forEach(((e,o)=>{const a=this.makeTotalDataLabels(s[e],t,n.length,o);i=[...i,...a]})),i}makeTotalDataLabels(e,t,i=1,s=0){const n=[],{min:o,max:a,seriesDirection:r,diverging:l,centerYAxis:d}=t,c=this.getStackColumnWidth(t,i);return e.forEach(((e,h)=>{const{total:u}=e,p=this.getSeriesPosition(t,c,h,s,i),m=this.getStackValueRatio(u,t),g=function(e){let t=["positive","negative"];return e===Wa.POSITIVE?t=["positive"]:e===Wa.NEGATIVE&&(t=["negative"]),t}(r);g.forEach((e=>{const i=u[e];if(!i)return;const r=this.makeBarLength(i,{min:o,max:a,ratio:m}),h=this.getStartPosition(r,i,t,l&&za(s)),g=Object.assign({type:"stackTotal",value:i,name:`totalLabel-${e}`,theme:this.theme.dataLabels.stackTotal},this.getAdjustedRect(p,h,r,c));n.push(this.makeTotalDataLabel(g,d))}))})),n}makeTotalDataLabel(e,t){return Object.assign(Object.assign({},e),{direction:this.getDataLabelDirection(e,t),plot:{x:0,y:0,size:this.getOffsetSize()}})}onMousemoveGroupedType(e){const t=this.getRectModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:[...t,...this.getGroupedRect(e,"hover")],name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}}class Ha extends jt{constructor(){super(...arguments),this.models=[]}initialize(){this.type="zeroAxis",this.name="zeroAxis"}render({layout:e,axes:t,series:i,options:s}){this.rect=e.plot;const n=ni({series:i,options:s}),o=n?"xAxis":"yAxis",{zeroPosition:a}=t[o];S(a)&&(this.models=this.renderZeroModel(a,n))}renderZeroModel(e,t){const i=Mt(0),s=Mt(e);let n;return n=t?{type:"line",x:s,y:i,x2:s,y2:Mt(this.rect.height),strokeStyle:"rgba(0, 0, 0, 0.5)"}:{type:"line",x:i,y:s,x2:Mt(this.rect.width),y2:s,strokeStyle:"rgba(0, 0, 0, 0.5)"},[n]}}class Na extends jt{constructor(){super(...arguments),this.models={label:[],tick:[],axisLine:[]}}initialize({name:e}){this.type="axis",this.name=e,this.yAxisComponent=e===Bt.Y}render({layout:e,axes:t,theme:i}){const{centerYAxis:s}=t;if(!s)return;this.theme=mi(i,this.name),this.rect=e[this.name],"yAxis"===this.name&&(this.rect=Object.assign(Object.assign({},this.rect),{x:s.x}));const{viewLabels:n,tickCount:o,tickInterval:a,needRotateLabel:r,radian:l,offsetY:d}=t[this.name],c={tickInterval:a,centerYAxis:s,needRotateLabel:r,radian:l,offsetY:d,relativePositions:wt(this.axisSize(s),o)},h=this.yAxisComponent?"y":"x",u=this.yAxisComponent?"x":"y";this.models.label=this.renderLabelModels(n,h,u,c),this.models.tick=this.renderTickModels(h,u,c),this.models.axisLine=this.renderAxisLineModel(s),this.drawModels||(this.drawModels={tick:[],label:[],axisLine:this.models.axisLine},["tick","label"].forEach((e=>{this.drawModels[e]=this.models[e].map((e=>{const t=Object.assign({},e);return this.yAxisComponent?t.y=0:t.x=0,t}))})))}renderAxisLineModel({xAxisHalfSize:e,secondStartX:t}){const i=Mt(0),s=Mt(this.rect.width);let n;if(this.yAxisComponent){const e=Mt(this.rect.height);n=[{type:"line",x:s,y:i,x2:s,y2:e},{type:"line",x:i,y:i,x2:i,y2:e}]}else n=[{type:"line",x:i,y:i,x2:Mt(e),y2:i},{type:"line",x:Mt(t),y:i,x2:s,y2:i}];return n}renderTickModels(e,t,i){const s=this.yAxisComponent?Mt(this.rect.width):Mt(0),{tickInterval:n,centerYAxis:{secondStartX:o},relativePositions:a}=i;return a.reduce(((i,a,r)=>{if(r%n)return i;const l={type:"tick",isYAxis:this.yAxisComponent,tickSize:this.yAxisComponent?-5:5,[e]:Mt(a),[t]:s},d=Object.assign({},l);return this.yAxisComponent?(d[t]=Mt(0),d.tickSize=5):d[e]=Mt(a+o),[...i,l,d]}),[])}renderLabelModels(e,t,i,s){const{centerYAxis:{secondStartX:n,yAxisLabelAnchorPoint:o},offsetY:a,needRotateLabel:r,radian:l}=s,d=this.theme.label,c=Te(d);let h,u,p;this.yAxisComponent?(h=Mt(o),u="center",p=e):(h=a,p=[...e].reverse(),u=r?"left":"center");const m=["default",{textAlign:u,font:c,fillStyle:d.color}];return p.reduce(((s,{text:o,offsetPos:a},r)=>{const d={type:"label",text:o,style:m,[t]:Mt(a)+(this.yAxisComponent?0:n),[i]:h,radian:l},c=[d];if(!this.yAxisComponent){const i=Object.assign(Object.assign({},d),{text:e[r].text,[t]:Mt(d[t]-n)});c.push(i)}return[...s,...c]}),[])}axisSize(e){let t;return t=this.yAxisComponent?this.rect.height:e.xAxisHalfSize,t}beforeDraw(e){e.ctx.strokeStyle="rgba(0, 0, 0, 0.5)",e.ctx.lineWidth=1}}class Xa extends En{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{bar:i.series},categories:i.categories,modules:[oo,Yn,lo,Ii,po]})}initialize(){var s;super.initialize();const n=!!(null===(s=this.store.initStoreState.options.series)||void 0===s?void 0:s.stack);this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(Ia,{name:"bar",stackChart:n}),this.componentManager.add(Ya,{name:"bar",stackChart:n}),this.componentManager.add(Ha),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(Lt,{name:"secondaryYAxis"}),this.componentManager.add(Na,{name:"yAxis"}),this.componentManager.add(Na,{name:"xAxis"}),this.componentManager.add(_o,{name:"secondaryYAxis"}),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,i,d,e,h,o])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{bar:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class Fa extends En{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{column:i.series},categories:i.categories,modules:[oo,Yn,lo,Ii,po]})}initialize(){var s;super.initialize();const n=!!(null===(s=this.store.initStoreState.options.series)||void 0===s?void 0:s.stack);this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(Ya,{name:"column",stackChart:n}),this.componentManager.add(Ia,{name:"column",stackChart:n}),this.componentManager.add(Ha),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.componentManager.add(Ko),this.painter.addGroups([t,i,d,e,h,o])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{column:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function $a(e,t){return e.find((({component:e})=>e.name===t&&"point"===e.eventDetectType))}class Ga extends En{constructor({el:e,options:t,data:{series:i,categories:s}}){super({el:e,options:t,series:i,categories:s,modules:[oo,Yn,lo,Ii,po]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(Ya,{name:"column"}),this.componentManager.add(Ia,{name:"column"}),this.componentManager.add(Fo),this.componentManager.add(Ha),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(Lt,{name:"secondaryYAxis"}),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(_o,{name:"secondaryYAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(Ko),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,i,d,e,h,o,c])}handleEventForAllResponders(e,t,i,s){var n;f($a(n=t,"column"))&&f($a(n,"line"))&&t.find((({component:e})=>"column"===e.name)).component[i]({mousePosition:s,responders:[]},e)}addData(e,t,i){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t,chartType:i})}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",e)}addPlotLine(e){this.store.dispatch("addPlotLine",{data:e})}removePlotLine(e){this.store.dispatch("removePlotLine",{id:e})}addPlotBand(e){this.store.dispatch("addPlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removePlotBand",{id:e})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Va(e){return e.reduce(((e,t)=>{const i=t.data.filter((e=>!x(e)));return Math.max(e,...i.map((({r:e})=>e)))}),0)}class _a extends jt{constructor(){super(...arguments),this.models={series:[]},this.activatedResponders=[],this.maxRadius=-1,this.maxValue=-1,this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.bubble.data[e],n=this.responders.filter((({name:e})=>e===s))[t];if(!n)throw new Error(U);const o=this.getResponderAppliedTheme([n],"select");this.eventBus.emit("renderSelectedSeries",{models:o,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i,state:s}=e;if(!S(t)||!S(i))return;const{name:n}=s.series.bubble.data[i],o=[this.responders.filter((({name:e})=>e===n))[t]];o.length&&(this.eventBus.emit("renderHoveredSeries",{models:o,name:this.name}),this.activatedResponders=o,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="bubble",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){this.drawModels.series.forEach(((t,i)=>{t.radius=this.models.series[i].radius*e}))}render(e){const{layout:t,series:i,scale:s,axes:n,circleLegend:o,legend:a,options:r,theme:l}=e,{plot:d}=t;if(!i.bubble)throw new Error(Z(this.name));const{xAxis:c,yAxis:h}=n,u=i.bubble.data;this.theme=l.series.bubble,this.rect=d,this.activeSeriesMap=hn(a),this.selectable=this.getSelectableOption(r);const p=this.rect.width/c.tickCount,m=this.rect.height/h.tickCount;this.maxRadius=o.radius?o.radius:Math.min(p,m),this.maxValue=Va(u);const g=this.renderBubblePointsModel(u,s),v=this.makeTooltipModel(u);this.models.series=g,this.drawModels||(this.drawModels=E(this.models)),this.responders=g.map(((e,t)=>Object.assign(Object.assign({},e),{type:"circle",detectionSize:0,radius:e.radius+1,color:Me(e.color,.85),data:v[t],index:t})))}renderBubblePointsModel(e,t){const i=t.xAxis.limit,s=t.yAxis.limit,{borderWidth:n,borderColor:o}=this.theme;return e.flatMap((({data:e,name:t,color:a},r)=>{const l=[],d=Me(a,this.activeSeriesMap[t]?.8:.1);return e.filter((e=>!x(e))).forEach((e=>{const a=Ri(e),c=w(a)?Number(new Date(a)):Number(a),h=Ti(e),u=kt(c,i),p=kt(h,s),m=u*this.rect.width,g=(1-p)*this.rect.height,v=Math.max(.5,e.r/this.maxValue*this.maxRadius);l.push({x:m,y:g,type:"circle",radius:v,color:d,style:["default"],seriesIndex:r,name:t,borderWidth:n,borderColor:o})})),l}))}makeTooltipModel(e){return[...e].flatMap((({data:e,name:t,color:i})=>{const s=[];return e.filter((e=>!x(e))).forEach((e=>{const{r:n,label:o}=e;s.push({label:`${t}/${o}`,color:i,value:{x:Ri(e),y:Ti(e),r:n}})})),s}))}getResponderAppliedTheme(e,t){return e.map((e=>L(e,this.theme[t])))}onMousemove({responders:e,mousePosition:t}){const i=Ro(e,t,this.rect),s=this.getResponderAppliedTheme(i,"hover");this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name}),this.activatedResponders=i,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e,mousePosition:t}){if(this.selectable){const i=Ro(e,t,this.rect),s=this.getResponderAppliedTheme(i,"select");this.eventBus.emit("renderSelectedSeries",{models:s,name:this.name}),this.eventBus.emit("needDraw")}}}class Ua extends jt{constructor(){super(...arguments),this.models={circleLegend:[]}}initialize(){this.type="circleLegend"}render({layout:e,series:t,circleLegend:i}){if(!t.bubble)throw new Error("circleLegend is only possible when bubble series is present");if(this.isShow=i.visible,!this.isShow)return;const s=t.bubble.data;this.rect=e.circleLegend,this.renderCircleLegend(s,i)}renderCircleLegend(e,t){const i=Va(e),{radius:s}=t;this.models.circleLegend=[{type:"circleLegend",radius:s,value:i,x:s,y:this.rect.height-s}]}}function qa(e,t){const{x:i,y:s,radius:n,value:o}=t;[1,.5,.25].forEach(((t,a)=>{const r=t*n,l=s+(a?(1-t)*n:0);ot(e,{type:"circle",x:i,y:l,radius:r,color:"#fff",seriesIndex:0,style:["default",{strokeStyle:"#888",lineWidth:1}]}),Ie(e,{type:"label",x:i,y:l-r,text:String(o*t),style:["default",{textAlign:"center",textBaseline:"bottom"}]})}))}class Za extends En{constructor(e){super({el:e.el,options:e.options,series:{bubble:e.data.series},modules:[Yn,lo,Ii,po]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(_a),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(Ua),this.componentManager.add(ta),this.painter.addGroups([t,i,m,d,e,h])}addData(e){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){this.resetSeries(),this.store.dispatch("setData",{series:{bubble:e.series}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Ka(e){return e.map((e=>{const t={};return Object.assign(Object.assign({},e),{data:e.data.filter((e=>!x(e))).reduce(((e,i)=>{const s=`${Ri(i)}-${Ti(i)}`;return t[s]?e:(t[s]=!0,[...e,i])}),[])})}))}class Ja extends En{constructor(e){var t;super({el:e.el,options:e.options,series:{scatter:Ka(e.data.series)},categories:null===(t=e.data)||void 0===t?void 0:t.categories,modules:[Yn,lo,Ii,po]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(ja),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,i,d,e,h,l])}addData(e){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{scatter:i},categories:t})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Qa(e,t,i){return{width:e?t:i,height:e?i:t}}function er(e,t,i){return e*t+(t-i)/2}class tr extends jt{constructor(){super(...arguments),this.models={range:[],bullet:[],marker:[]},this.activatedResponders=[],this.eventDetectType="point",this.vertical=!1,this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({seriesIndex:e,state:t})=>{var i;if(!S(e))return;const{name:s}=null===(i=t.series.bullet)||void 0===i?void 0:i[e],n=this.filterBulletResponder(this.responders).filter((({name:e})=>e===s));if(!n)throw new Error(U);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(n,"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({seriesIndex:e,state:t})=>{var i;if(!S(e))return;const{name:s}=null===(i=t.series.bullet)||void 0===i?void 0:i[e],n=this.filterBulletResponder(this.responders).filter((({name:e})=>e===s));n.length&&this.onMousemove({responders:n})}}initialize(){this.type="series",this.name="bullet",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){if(!this.drawModels)return;const{clipRect:t}=this.drawModels;if(!t)return;const i=this.vertical?"y":"x",s=this.vertical?"height":"width",n=t[0],o=this.models.clipRect[0],a=n[s]+(o[s]-n[s])*e;n[s]=a,n[i]=Math.max(this.basePosition-a*this.basePosition/o[s],0)}render(e){var t,i;const{layout:s,axes:n,series:o,scale:a,legend:r,options:l,theme:d,categories:c}=e;if(!o.bullet)throw new Error(Z(this.name));this.setEventDetectType(o,l),this.theme=d.series.bullet,this.rect=s.plot,this.activeSeriesMap=hn(r),this.selectable=this.getSelectableOption(l),this.vertical=!!(null===(i=null===(t=l)||void 0===t?void 0:t.series)||void 0===i?void 0:i.vertical);const h=ni({series:o,options:l}),{labelAxisName:u,valueAxisName:p}=ri(h,o),{valueSizeKey:m}=li(h),{tickDistance:g}=n[u],{zeroPosition:v}=n[p],{min:f,max:b}=a[p].limit,x=o.bullet.data;this.basePosition=null!=v?v:0;const y=Object.assign({ratio:this.rect[m]/(b-f),tickDistance:g,zeroPosition:v},this.getBulletBarWidths(g)),S=this.renderRanges(x,y),w=this.renderBullet(x,y),M=this.renderMarkers(x,y),O=this.renderClipRectArea();this.models.clipRect=[O],this.models.range=S,this.models.bullet=w,this.models.marker=M,this.drawModels||(this.drawModels={clipRect:[this.makeInitialClipRectModel(O)],range:P(S),bullet:P(w),marker:P(M)});const A={range:S,bullet:w,marker:M},k=this.makeTooltipModel(A);this.tooltipRectMap=this.makeTooltipRectMap(A,k),this.responders=this.getBulletSeriesResponders(A,k,n,c),Io(l,this.name).visible&&this.renderDataLabels(this.getDataLabels([...S,...w,...M],this.vertical,this.rect[m]))}renderClipRectArea(){return{type:"clipRectArea",x:0,y:0,width:this.rect.width,height:this.rect.height}}makeInitialClipRectModel(e){return{type:"clipRectArea",width:this.vertical?e.width:0,height:this.vertical?0:e.height,x:this.vertical?e.x:0,y:this.vertical?0:e.y}}getDataLabels(e,t,i){const{dataLabels:s}=this.theme,n=D(s,"marker"),{useSeriesColor:o,color:a}=n,{marker:r}=s;return e.filter((e=>"line"===e.type||"range"!==e.modelType)).map((e=>{var s;if("line"===e.type)return Object.assign(Object.assign({},e),{x:t?(e.x+e.x2)/2:e.x,theme:Object.assign(Object.assign({},r),{color:r.useSeriesColor?e.strokeStyle:r.color})});const l=S(e.value)&&(null===(s=e)||void 0===s?void 0:s.value)<0;let d=t?"top":"right";return l&&(d=t?"bottom":"left"),Object.assign(Object.assign({},e),{direction:d,plot:{x:0,y:0,size:i},theme:Object.assign(Object.assign({},n),{color:o?e.color:a})})}))}setEventDetectType(e,t){var i,s;(null===(s=null===(i=t)||void 0===i?void 0:i.series)||void 0===s?void 0:s.eventDetectType)&&(this.eventDetectType=t.series.eventDetectType)}getBulletSeriesResponders(e,t,i,s){return"grouped"===this.eventDetectType?Do(this.rect,this.vertical?i.xAxis:i.yAxis,s,this.vertical):function(e,t){const{range:i,marker:s,bullet:n}=e,{range:o,marker:a,bullet:r}=t;return[...i.map(((e,t)=>Object.assign(Object.assign({},e),{data:o[t]}))),...n.map(((e,t)=>Object.assign(Object.assign({},e),{data:r[t]}))),...s.map(((e,t)=>Object.assign(Object.assign({},e),{detectionSize:5,data:a[t]})))]}(e,t)}makeTooltipRectMap(e,t){const i={};return Object.keys(e).forEach((s=>{e[s].forEach(((e,n)=>{const o=e.name;i[o]||(i[o]=[]);const a=Object.assign(Object.assign({},e),{data:t[s][n]});i[o].push(a)}))})),i}getBulletSeriesModelsFromRectResponders(e){var t;return e.length&&null!=(t=this.tooltipRectMap[e[0].label])?t:[]}getGroupedRect(e,t){const i=this.getBulletSeriesModelsFromRectResponders(e),{color:s,opacity:n}=this.theme[t].groupedRect;return i.length?e.map((e=>Object.assign(Object.assign({},e),{color:Me(s,n)}))):[]}onMousemoveGroupedType(e){const t=this.getBulletSeriesModelsFromRectResponders(e);this.eventBus.emit("renderHoveredSeries",{models:[...this.getGroupedRect(e,"hover"),...this.getRespondersWithTheme(t,"hover")],name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}onMousemove({responders:e}){"grouped"===this.eventDetectType?this.onMousemoveGroupedType(e):(this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.activatedResponders=e.length?[e[e.length-1]]:[]),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e}){if(this.selectable){const t="grouped"===this.eventDetectType?[...this.getGroupedRect(e,"select"),...this.getRespondersWithTheme(this.getBulletSeriesModelsFromRectResponders(e),"select")]:this.getRespondersWithTheme(e,"select");this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}filterBulletResponder(e){return e.filter((e=>{var t;return"bullet"===(null===(t=e)||void 0===t?void 0:t.modelType)}))}renderRanges(e,{tickDistance:t,ratio:i,zeroPosition:s,rangeWidth:n}){const o=[];return e.forEach((({ranges:e,color:a,name:r},l)=>{(null!=e?e:[]).forEach(((e,d)=>{if(!x(e)){const[c,h]=e,u=(h-c)*i,p=er(l,t,n);o.push(Object.assign(Object.assign({type:"rect",name:r,color:this.getRangeColor(Me(a,this.getSeriesOpacity(r)),d,r),x:this.vertical?p:c*i+s,y:this.vertical?s-h*i:p},Qa(this.vertical,n,u)),{modelType:"range",seriesColor:a,tooltipColor:this.getRangeColor(a,d,r,!0),value:e}))}}))})),o}renderBullet(e,{tickDistance:t,ratio:i,zeroPosition:s,bulletWidth:n}){const{borderColor:o,borderWidth:a}=this.theme;return e.reduce(((e,{data:r,color:l,name:d},c)=>{if(x(r))return[...e];const h=Math.max(Math.abs(r*i),2),u=er(c,t,n),p=this.vertical?u:s-(r<0?h:0),m=this.vertical?s-h+(r<0?h:0):u,g=Object.assign({type:"rect",name:d,color:Me(l,this.getSeriesOpacity(d)),x:p,y:m,thickness:a,borderColor:o,modelType:"bullet",seriesColor:l,tooltipColor:l,value:r},Qa(this.vertical,n,h));return[...e,g]}),[])}renderMarkers(e,{tickDistance:t,ratio:i,zeroPosition:s,markerWidth:n}){const{markerLineWidth:o}=this.theme,a=[];return e.forEach((({markers:e,color:r,name:l},d)=>{const c=er(d,t,n);(null!=e?e:[]).forEach((e=>{if(!x(e)){const t=e*i,d=this.vertical?c:t+s,h=this.vertical?s-t:c;a.push({type:"line",name:l,x:d,y:h,x2:this.vertical?d+n:d,y2:this.vertical?h:h+n,strokeStyle:Me(r,this.getSeriesOpacity(l)),lineWidth:o,seriesColor:r,tooltipColor:r,value:e})}}))})),a}makeTooltipModel(e){const{range:t,bullet:i,marker:s}=e;return{range:this.makeTooltipData(t,"Range"),bullet:this.makeTooltipData(i,"Actual"),marker:this.makeTooltipData(s,"Marker")}}makeTooltipData(e,t){return e.map((e=>{const{name:i,seriesColor:s,tooltipColor:n,value:o}=e;return{label:i,color:Me(s,1),value:[{title:t,value:o,color:n}],templateType:"bullet"}}))}getBulletBarWidths(e){const{barWidth:t,barWidthRatios:i}=this.theme,{rangeRatio:s,bulletRatio:n,markerRatio:o}=i,a=t?$(e,t):.6*e;return{rangeWidth:a*s,bulletWidth:a*n,markerWidth:a*o}}getRangeColor(e,t,i,s=!1){const{rangeColors:n}=this.theme,o=Array.isArray(n)&&n[t];return Me(o?n[t]:e,(o?Oe(n[t]):_s[t])*this.getSeriesOpacity(i,s))}getSeriesOpacity(e,t=!1){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e],o=Object.values(this.activeSeriesMap).some((e=>!e)),a=t?s:i.restSeries.areaOpacity,r=n?i.areaOpacity:a;return o?r:s}getRespondersWithTheme(e,t){const{color:i,borderColor:s,borderWidth:n}=this.theme[t];return this.filterBulletResponder(e).map((e=>Object.assign(Object.assign({},e),{color:null!=i?i:e.tooltipColor,thickness:n,borderColor:s,style:[Object.assign({},R(this.theme[t],"shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY"))]})))}}class ir extends En{constructor({el:e,options:t,data:{series:i}}){super({el:e,options:t,series:{bullet:i},modules:[Yn,lo,Ii,po]}),this.hideTooltip=()=>{this.eventBus.emit("hideTooltip")}}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(tr),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,i,d,e,h,o])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){this.resetSeries(),this.store.dispatch("setData",{series:{bullet:e.series}})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}}function sr(e,t,i){var s,n;const o=null===(s=e.pie)||void 0===s?void 0:s[t].data.find((({name:e})=>e===i));return(null===(n=o)||void 0===n?void 0:n.parentName)?sr(e,t-1,o.parentName):i}const nr={name:"seriesData",state:()=>({nestedPieSeries:{}}),action:{setNestedPieSeriesData({state:e,initStoreState:t}){const{theme:i,disabledSeries:s}=e,n=t.series,o={},a={};n.pie.forEach((({name:e,data:t},r)=>{const{colors:l}=i.series.pie[e],d=[],c=t.map(((e,t)=>{var i;const{parentName:s,name:o}=e,c=s&&r?a[s]:null===(i=l)||void 0===i?void 0:i[t];d.push(c),a[o]=c;const h=s&&r?sr(n,r-1,s):o;return Object.assign(Object.assign({},e),{data:e.data,rootParentName:h,color:c})}));o[e]={data:c.filter((({rootParentName:e})=>!s.includes(e))),colors:d}})),e.nestedPieSeries=o,this.dispatch("updateNestedPieChartLegend")}},observe:{updateNestedPieSeriesData(){this.dispatch("setNestedPieSeriesData")}}},or=nr;class ar extends En{constructor({el:e,options:t,data:{series:i,categories:s}}){super({el:e,options:t,series:{pie:i},categories:s,modules:[or]})}initialize(){var i;super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add($o),(i=this.store.initStoreState.series.pie,null!=i?i:[]).forEach((({name:e})=>{this.componentManager.add(da,{alias:e})})),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,d,e,h,p,o])}addSeries(e,t){this.resetSeries(),this.store.dispatch("addSeries",Object.assign({data:e},t)),this.componentManager.add(da,{alias:e.name})}setData(e){var t;this.componentManager.remove(da),this.resetSeries(),this.store.dispatch("setData",{series:{pie:e.series}}),(t=this.store.initStoreState.series.pie,null!=t?t:[]).forEach((({name:e})=>{this.componentManager.add(da,{alias:e})}))}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign({},e))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class rr extends jt{constructor(){super(...arguments),this.models={area:[],line:[],dot:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.radar.data[t],n=this.responders.filter((({name:e})=>e===s))[e];if(!n)throw new Error(U);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme([n],"select"),name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.radar.data[t],n=[this.responders.filter((({name:e})=>e===s))[e]];n.length&&(this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(n,"hover"),name:this.name}),this.activatedResponders=n,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="radar",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i,s,n,o,a,r,l;const{layout:d,radialAxes:c,series:h,legend:u,options:p,theme:m,scale:g}=e;if(!h.radar)throw new Error(Z(this.name));this.theme=m.series.radar,this.rect=d.plot,this.activeSeriesMap=hn(u),this.selectable=this.getSelectableOption(p);const v=e.categories,{axisSize:f,centerX:b,centerY:x}=c.verticalAxis,{limit:y,stepSize:S}=g.verticalAxis,w=St(y,S),{min:M,max:O}=di(w),A={categories:v,degree:Fe/v.length,centerX:b,centerY:x,showArea:(s=null===(i=null===(t=p)||void 0===t?void 0:t.series)||void 0===i?void 0:i.showArea,null!=s&&s),ratio:f/(O-M)},k=null===(n=h.radar)||void 0===n?void 0:n.data,C=this.makeRadarPointsData(k,A),T=this.renderDotModels(C);this.models.area=(null===(a=null===(o=p)||void 0===o?void 0:o.series)||void 0===a?void 0:a.showArea)?this.renderAreaModels(C):[],this.models.line=this.renderLineModels(C),this.models.dot=(null===(l=null===(r=p)||void 0===r?void 0:r.series)||void 0===l?void 0:l.showDot)?T:[],this.drawModels||(this.drawModels={area:this.initDrawModels("area",b,x),line:this.initDrawModels("line",b,x),dot:this.models.dot.map((e=>Object.assign(Object.assign({},e),{x:b,y:x})))});const R=this.makeTooltipModel(T,v);this.responders=T.map(((e,t)=>Object.assign(Object.assign({},e),{data:R[t],color:Me(e.color,1)})))}initDrawModels(e,t,i){return this.models[e].map((e=>{var s;return Object.assign(Object.assign({},e),{distances:null===(s=e.distances)||void 0===s?void 0:s.map((()=>0)),points:e.points.map((()=>({x:t,y:i})))})}))}makeTooltipModel(e,t){return e.map((({name:e,color:i,value:s,index:n})=>({label:e,color:i,value:s,category:t[n]})))}getRespondersWithTheme(e,t){const{radius:i,borderWidth:s,borderColor:n,color:o}=this.theme[t].dot;return e.map((e=>{const t=null!=o?o:e.color;return Object.assign(Object.assign({},e),{radius:i,color:t,borderColor:null!=n?n:Me(t,.5),borderWidth:s})}))}onClick({responders:e}){this.selectable&&(this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(e,"select"),name:this.name}),this.eventBus.emit("needDraw"))}onMousemove({responders:e}){this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.activatedResponders=e,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}makeRadarPointsData(e,t){const{centerX:i,centerY:s,degree:n,ratio:o,showArea:a}=t;return e.map((({data:e,color:t,name:r})=>{const l=e.reduce(((e,t,a)=>{if(x(t))return{distances:[...e.distances,0],linePoints:[...e.linePoints,null],areaPoints:[...e.areaPoints,{x:i,y:s}]};const r=t*o,l=qe(i,s,r,_e(n*a));return{distances:[...e.distances,r],linePoints:[...e.linePoints,l],areaPoints:[...e.areaPoints,l]}}),{linePoints:[],distances:[],areaPoints:[]});return x(e[0])||x(e[e.length-1])||(l.linePoints.push(l.linePoints[0]),l.areaPoints.push(l.areaPoints[0])),Object.assign(Object.assign({name:r,seriesColor:t,data:e},l),this.getSeriesColor(a,t,r))}))}renderAreaModels(e){return e.map((({distances:e,areaPoints:t,name:i,fillColor:s,seriesColor:n})=>({type:"areaPoints",name:i,distances:e,points:t,fillColor:s,color:Me(n,0),lineWidth:0})))}renderLineModels(e){const{lineWidth:t,dashSegments:i}=this.theme;return e.map((({distances:e,linePoints:s,name:n,lineColor:o})=>({type:"linePoints",lineWidth:null!=t?t:2,name:n,distances:e,points:s,color:o,dashSegments:i})))}renderDotModels(e){const{radius:t,color:i}=this.theme.dot,s=[];return e.forEach((({linePoints:e,lineColor:n,name:o,data:a},r)=>e.slice(0,e.length-1).forEach(((e,l)=>{var d;x(e)||s.push(Object.assign(Object.assign({type:"circle"},e),{radius:t,color:null!=i?i:n,style:[{strokeStyle:"rgba(0, 0, 0, 0)"}],name:o,seriesIndex:r,index:l,value:null===(d=a)||void 0===d?void 0:d[l]}))})))),s}getSeriesColor(e,t,i){const s=this.activeSeriesMap[i],{select:n,areaOpacity:o}=this.theme,a=Object.values(this.activeSeriesMap).some((e=>!e)),r=Me(t,s?1:.2);let l=0;if(e){const e=s?n.areaOpacity:n.restSeries.areaOpacity;l=a?e:o}return{lineColor:r,fillColor:Me(r,l)}}}function lr(e,t){const{limit:{max:i},stepSize:s}=e;return i+(t<Fe?0:s)}function dr(e,t){return e.findIndex((e=>e===t))}class cr extends jt{constructor(){super(...arguments),this.models={plot:[],line:[],band:[]}}initialize(e){var t,i;this.type="plot",this.name=null!=(i=null===(t=e)||void 0===t?void 0:t.name)?i:"radialPlot"}render(e){var t,i,s,n,o,a;const{layout:r,radialAxes:l,options:d,series:c,theme:h,scale:u}=e;this.rect=r.plot,this.circularAxisTheme=h.circularAxis;const p=null!=(t=e.categories)?t:[];if("gauge"===this.name){const e=null!=(n=null===(s=null===(i=d)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands)?n:[],t=!ni({series:c,categories:p}),o=this.makeRenderOptionsOnGauge(t,l.circularAxis,p,u);this.models.band=this.renderBands(e,o,p)}else{const e=!!c.radar,t=null!=(a=null===(o=d.plot)||void 0===o?void 0:o.type)?a:e?"spiderweb":"circle",i=this.makeRenderOptions(l,t,p);this.models.plot=this.renderPlot(i),this.models.line=c.radialBar?this.renderLine(i):[]}}makeRenderOptionsOnGauge(e,t,i,s){const{angle:{total:n,start:o},radius:{outer:a},clockwise:r,centerX:l,centerY:d}=t,{width:c,margin:h}=t.band;return{centerX:l,centerY:d,clockwise:r,totalAngle:n,scaleMaxLimitValue:e?i.length:lr(s.circularAxis,n),startAngle:o,outerRadius:a,bandWidth:c,bandMargin:h,hasCategoryAxis:e}}makeRenderOptions(e,t,i=[]){const{centerX:s,centerY:n,radius:{ranges:o,inner:a,outer:r}}=e.verticalAxis,{angle:{central:l,total:d,start:c,end:h,drawingStart:u},label:{labels:p},tickInterval:m,clockwise:g}=e.circularAxis,v=d!==Fe;return{type:t,categories:i,centralAngle:l,centerX:s,centerY:n,initialRadius:a,radius:r,radiusRanges:o,lineCount:p.length,tickInterval:m,drawingStartAngle:u,usingArcPlot:v,startAngle:c,endAngle:h,clockwise:g}}renderPlot(e){const{type:t,usingArcPlot:i}=e;return i?this.makeArc(e):"spiderweb"===t?this.makeSpiderwebPlot(e):this.makeCirclePlot(e)}makeSpiderwebPlot(e){const{centralAngle:t,centerX:i,centerY:s,categories:n,radiusRanges:o}=e,{strokeStyle:a,lineWidth:r}=this.circularAxisTheme;return o.map((e=>{const o=n.map(((n,o)=>qe(i,s,e,_e(t*o))));return{type:"polygon",color:a,lineWidth:r,points:o}}))}makeCirclePlot(e){const{centerX:t,centerY:i,radiusRanges:s}=e,{strokeStyle:n,lineWidth:o}=this.circularAxisTheme;return s.map((e=>({type:"circle",color:"rgba(0, 0, 0, 0)",radius:e,x:t,y:i,borderColor:n,borderWidth:o})))}makeArc(e){const{centerX:t,centerY:i,radiusRanges:s,startAngle:n,endAngle:o,clockwise:a}=e,{strokeStyle:r,lineWidth:l}=this.circularAxisTheme;return s.map((e=>({type:"arc",borderWidth:l,borderColor:r,x:t,y:i,angle:{start:n,end:o},drawingStartAngle:$e,radius:e,clockwise:a})))}renderLine(e){const{centerX:t,centerY:i,initialRadius:s,radius:n,lineCount:o,centralAngle:a,tickInterval:r,drawingStartAngle:l,clockwise:d}=e,{strokeStyle:c,lineWidth:h}=this.circularAxisTheme;return C(0,o).reduce(((e,o,u)=>{const p=l+a*u*(d?1:-1),{x:m,y:g}=qe(t,i,s,_e(p)),{x:v,y:f}=qe(t,i,n,_e(p));return u%r==0?[...e,{type:"line",x:m,y:g,x2:v,y2:f,strokeStyle:c,lineWidth:h}]:e}),[])}renderBands(e,t,i){const s=[],{centerX:n,centerY:o,clockwise:a,totalAngle:r,scaleMaxLimitValue:l,startAngle:d,outerRadius:c,bandWidth:h,bandMargin:u,hasCategoryAxis:p}=t;return e.forEach((({range:e,color:t},m)=>{const g=et((p?dr(i,e[1].toString())-dr(i,e[0].toString()):Number(e[1])-Number(e[0]))/l*r*(a?1:-1)),v=s[s.length-1],f=m&&v?v.degree.end:d,b=et(f+g);s.push({type:"sector",color:t,x:n,y:o,clockwise:a,degree:{start:f,end:b},radius:{inner:c+u,outer:c+h}})})),s}}class hr extends jt{constructor(){super(...arguments),this.models={verticalAxisLabel:[],circularAxisLabel:[],dot:[],line:[],tick:[]}}initialize(e){var t,i;this.type="axis",this.name=null!=(i=null===(t=e)||void 0===t?void 0:t.name)?i:"radial"}render({layout:e,radialAxes:t,theme:i,series:s}){if(this.isShow=!cn(s),this.rect=e.plot,!t)return;this.circularAxisTheme=i.circularAxis;const{circularAxis:n,verticalAxis:o}=t;o&&(this.verticalAxisTheme=i.verticalAxis,this.models.verticalAxisLabel=this.renderVerticalAxisLabel(o)),this.models.circularAxisLabel=this.renderCircularAxisLabel(n),"gauge"===this.name?(this.models.line=this.renderArcLine(n),this.models.tick=this.renderTick(n)):this.models.dot=this.renderDotModel(n)}getBubbleShadowStyle(){const{visible:e,shadowColor:t,shadowOffsetX:i,shadowOffsetY:s,shadowBlur:n}=this.verticalAxisTheme.label.textBubble;return e&&t?[{shadowColor:t,shadowOffsetX:i,shadowOffsetY:s,shadowBlur:n}]:null}renderVerticalAxisLabel(e){const{radius:{ranges:t,outer:i},label:{labels:s,interval:n,maxWidth:o,maxHeight:a,margin:r,align:l},angle:{start:d},pointOnColumn:c,centerX:h,centerY:u,tickDistance:p}=e,m=c?p/2:0,g=Te(this.verticalAxisTheme.label),{visible:v,backgroundColor:f,borderRadius:b,borderColor:x,borderWidth:y,paddingX:S,paddingY:w}=this.verticalAxisTheme.label.textBubble,M=v?S:0,O=o+2*M-r,A=a+2*(v?w:0),k=this.verticalAxisTheme.label.color;return t.reduce(((e,t,o)=>{const{x:a,y:p}=qe(h,u,t-m,_e(d)),v=function(e,t,i,s,n){return!(!t&&0===e)&&!(e%i)&&(t&&s<=n||!t&&s<n)}(o,c,n,t,i);let S=a+r,w=a+r+M;return"center"===l?(S=a-r-O/2,w=a-r):T(["right","end"],l)&&(S=a-r-O,w=a-r-M),v?[...e,{type:"bubbleLabel",rotationPosition:{x:a,y:p},radian:_e(d,0),bubble:{x:S,y:p-A/2,width:O,height:A,align:l,radius:b,fill:f,lineWidth:y,strokeStyle:x,style:this.getBubbleShadowStyle()},label:{text:s[o],x:w,y:p,style:[{font:g,fillStyle:k,textAlign:l,textBaseline:"middle"}]}}]:e}),[])}renderDotModel(e){const{angle:{central:t,drawingStart:i},label:{labels:s,interval:n},radius:{outer:o},centerX:a,centerY:r,clockwise:l}=e,{dotColor:d}=this.circularAxisTheme;return s.reduce(((e,s,c)=>{const h=i+t*c*(l?1:-1),{x:u,y:p}=qe(a,r,o,_e(et(h)));return c%n==0?[...e,{type:"rect",color:d,width:4,height:4,x:u-2,y:p-2}]:e}),[])}renderCircularAxisLabel(e){const{centerX:t,centerY:i,clockwise:s,label:{labels:n,interval:o,margin:a,maxHeight:r},angle:{drawingStart:l,central:d},radius:{outer:c}}=e,h=c+(a+r/2)*("gauge"===this.name?-1:1),u=this.circularAxisTheme.label,p=Te(u),m=d*(s?1:-1);return n.reduce(((e,s,n)=>{const a=et(l+m*n);return n%o==0?[...e,Object.assign({type:"label",style:[{textAlign:"center",textBaseline:"middle",font:p,fillStyle:u.color}],text:s},qe(t,i,h,_e(a)))]:e}),[])}renderTick(e){const{centerX:t,centerY:i,tickInterval:s,clockwise:n,angle:{central:o,drawingStart:a},label:{labels:r},radius:{outer:l}}=e,{strokeStyle:d,lineWidth:c}=this.circularAxisTheme.tick;return r.reduce(((e,r,h)=>{const u=a+o*h*(n?1:-1),{x:p,y:m}=qe(t,i,l-5,_e(et(u))),{x:g,y:v}=qe(t,i,l+5,_e(et(u)));return h%s==0?[...e,{type:"line",lineWidth:c,strokeStyle:d,x:p,y:m,x2:g,y2:v}]:e}),[])}renderArcLine(e){const{centerX:t,centerY:i,clockwise:s,angle:{start:n,end:o,total:a},radius:{outer:r}}=e,{strokeStyle:l,lineWidth:d}=this.circularAxisTheme;return a===Fe?[{type:"circle",x:t,y:i,radius:r,borderWidth:d,borderColor:l,color:"rgba(0, 0, 0, 0)"}]:[{type:"arc",borderWidth:d,borderColor:l,x:t,y:i,angle:{start:n,end:o},drawingStartAngle:$e,radius:r,clockwise:s}]}}class ur extends En{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{radar:i.series},categories:i.categories,modules:[Yn,lo,si]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add($o),this.componentManager.add(cr),this.componentManager.add(hr),this.componentManager.add(rr),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,d,e,h,r,i,c])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{radar:i},categories:t})}setOptions(e){this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function pr({height:e,width:t}){return e<t}function mr(e,t,i,s){const n=e*e,o=s*s;return Math.max(o*i/n,n/(o*t))}function gr(e,t,i){return t||(t=yt(Dt(i,"weight"))),t/e}function vr(e,t,i,s){t.reduce(((e,t)=>{const n=t.weight/i;return s(n,e,t.id),e+n}),e)}function fr(e,t,i){e[t]=i}function br(e,t,i,s,n){const o=gr(s,n,t);vr(i.y,t,o,((t,s,n)=>{fr(e,n,{x:i.x,y:s,width:o,height:t})})),i.x+=o,i.width-=o}function xr(e,t,i,s,n){const o=gr(s,n,t);vr(i.x,t,o,((t,s,n)=>{fr(e,n,{x:s,y:i.y,width:t,height:o})})),i.y+=o,i.height-=o}function yr(e,t){const i=e,s=function(e,t){const{width:i,height:s}=t,n=function(e,t,i){return t*i/yt(e)}(Dt(e,"data"),i,s);return e.map((e=>({id:e.id,weight:e.data*n}))).sort(((e,t)=>t.weight-e.weight))}(t,i);let n,o,a=[];const r={};return s.forEach((e=>{const t=Dt(a,"weight"),s=yt(t);a.length&&function(e,t,i,s){const n=Math.min(...t),o=Math.max(...t),a=mr(e,n,o,i);return mr(e+s,Math.min(n,s),Math.max(o,s),i)>=a}(s,t,n,e.weight)&&(o(r,a,i,n,s),a=[]),a.length||(n=function(e){return pr(e)?e.height:e.width}(i),o=function(e){return pr(e)?br:xr}(i)),a.push(e)})),a.length&&o(r,a,i,n),r}class Sr extends jt{constructor(){super(...arguments),this.models={series:[],layer:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.emitMouseEvent([])},this.selectSeries=({seriesIndex:e})=>{if(!S(e))return;const t=this.responders.find((({indexes:t})=>Y(t)===e));if(!t)throw new Error(U);const i=this.getRespondersWithTheme([t],"select");this.eventBus.emit("renderSelectedSeries",{models:i,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=({seriesIndex:e})=>{if(!S(e))return;const t=this.responders.find((({indexes:t})=>Y(t)===e));t&&this.emitMouseEvent([t])}}initialize(){this.type="series",this.name="treemap",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}getAllChildSeries(e,t){const i=[];return e.forEach((s=>{if(s.parentId===t&&(i.push(s),s.hasChild)){const t=this.getAllChildSeries(e,s.id);i.push(...t)}})),i}render(e){var t,i,s,n,o;const{layout:a,treemapSeries:r,colorValueScale:l,options:d,theme:c,treemapZoomId:h}=e;if(!r)throw new Error(Z(this.name));const u=h.cur,p=this.getAllChildSeries(r,u);if(this.theme=c.series.treemap,this.rect=a.plot,this.selectable=this.getSelectableOption(d),this.models=this.renderTreemapSeries(p,d,l,u),this.zoomable=null!=(i=null===(t=d.series)||void 0===t?void 0:t.zoomable)&&i,Io(d,this.name).visible){const e=null!=(o=null===(n=null===(s=d.series)||void 0===s?void 0:s.dataLabels)||void 0===n?void 0:n.useTreemapLeaf)&&o,t=this.makeDataLabel(e,u);this.renderDataLabels(t)}this.responders=this.makeTreemapSeriesResponder(u)}makeTreemapSeriesResponder(e){const t=this.makeTooltipData();let{series:i}=this.models;return this.zoomable&&(i=i.filter((({parentId:t})=>t===e))),i.map(((e,i)=>Object.assign(Object.assign({},e),{data:t[i],thickness:4,style:["shadow"]})))}makeTooltipData(){return this.models.series.map((({label:e,data:t,color:i})=>({label:e,color:i,value:t})))}makeBoundMap(e,t,i,s={}){const n=e.filter((e=>e.parentId===t));return s=Object.assign(Object.assign({},s),yr(Object.assign({},i),n)),n.forEach((t=>{s=this.makeBoundMap(e,t.id,s[t.id],s)})),s}makeDataLabel(e,t){const i=e?this.models.series.filter((({hasChild:e})=>!e)):this.models.series.filter((({parentId:e})=>e===t)),s=this.theme.dataLabels;return i.map((e=>Object.assign(Object.assign({},e),{type:"treemapSeriesName",value:e.label,direction:"left",plot:{x:0,y:0,size:0},theme:Object.assign(Object.assign({},s),{color:s.useSeriesColor?e.color:s.color})})))}getColor(e,t){const{indexes:i}=e;return t[I(i)]}getOpacity(e){const{indexes:t,depth:i}=e,s=Y(t);return 1===t.length?0:Number((.1*i+.05*s).toFixed(2))}renderTreemapSeries(e,t,i,s){var n,o,a;let r=[];const l=this.makeBoundMap(e,s,Object.assign(Object.assign({},this.rect),{x:0,y:0})),{colors:d,startColor:c,endColor:h,borderWidth:u,borderColor:p}=this.theme;let m,g;const v=null!=(o=null===(n=t.series)||void 0===n?void 0:n.useColorValue)&&o;v&&c&&h&&(m=we(c),g=Ma(m,we(h)));const f=Object.keys(l).map((t=>{const s=e.find((e=>e.id===t));let n;return v&&(n=Oa(i.limit,s.colorValue)),Object.assign(Object.assign(Object.assign({},s),l[t]),{type:"rect",colorRatio:n,color:v?Aa(n,g,m):this.getColor(s,d),opacity:v?0:this.getOpacity(s),thickness:u,borderColor:p})}));return(null===(a=t.series)||void 0===a?void 0:a.useColorValue)||(r=f.map((e=>Object.assign(Object.assign({},e),{color:Me("#000000",e.opacity)})))),{series:f,layer:r}}getRespondersWithTheme(e,t){return e.map((e=>L(e,Object.assign(Object.assign({},this.theme[t]),{style:["shadow"]}))))}onClick({responders:e}){if(e.length)if(this.zoomable){const{id:t,hasChild:i}=e[0];i?(this.emitMouseEvent([]),this.store.dispatch("setTreemapZoomId",t),this.eventBus.emit("resetSelectedSeries")):this.selectable&&this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(e,"select"),name:this.name})}else if(this.selectable){const t=Lo(e);this.eventBus.emit("renderSelectedSeries",{models:this.getRespondersWithTheme(t,"select"),name:this.name})}}onMousemove({responders:e}){const t=Lo(e);this.activatedResponders=t,this.emitMouseEvent(t)}emitMouseEvent(e){this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name}),this.eventBus.emit("seriesPointHovered",{models:e,name:this.name}),this.eventBus.emit("renderSpectrumTooltip",e),this.eventBus.emit("needDraw")}}class wr extends jt{initialize(){this.type="backButton",this.name="backButton"}onClick({responders:e}){e.length&&(this.store.dispatch("zoomBack"),this.eventBus.emit("resetSelectedSeries"))}render({options:e,layout:t},i){ps(e)&&(this.rect=t.resetButton,this.isShow=i.isTreemapSeriesZooming,this.models=this.isShow?[{type:"backButton",x:0,y:0}]:[],this.responders=this.isShow?[{type:"rect",x:0,y:0,width:qi,height:qi}]:[])}}class Mr extends En{constructor(e){super({el:e.el,options:e.options,series:{treemap:e.data.series},modules:[xa,Sa]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(wa),this.componentManager.add(Sr),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(wr),this.componentManager.add(ta),this.painter.addGroups([t,d,e,h,o,a,u])}addSeries(e,t){this.resetSeries(),this.store.dispatch("addTreemapSeries",Object.assign({data:e},t))}setData(e){this.resetSeries(),this.store.dispatch("setData",{series:{treemap:e.series}})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Or(e,t){return null!=t?t:e}class Ar extends jt{constructor(){super(...arguments),this.models={rect:[],line:[],circle:[]},this.activatedResponders=[],this.eventDetectType="point",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.selectSeries=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.boxPlot[t],n=this.getRespondersWithTheme(this.tooltipRectMap[`${s}-${e}`],"select");this.eventBus.emit("renderSelectedSeries",{models:n,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.showTooltip=({index:e,seriesIndex:t,state:i})=>{if(!S(e)||!S(t))return;const{name:s}=i.series.boxPlot[t],n=this.getRespondersWithTheme(this.tooltipRectMap[`${s}-${e}`],"hover");this.eventBus.emit("renderHoveredSeries",{models:n,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=n,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}}initialize(){this.type="series",this.name="boxPlot",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i;const{layout:s,axes:n,series:o,scale:a,legend:r,options:l,theme:d}=e;if(!o.boxPlot)throw new Error(Z(this.name));(null===(i=null===(t=l)||void 0===t?void 0:t.series)||void 0===i?void 0:i.eventDetectType)&&(this.eventDetectType=l.series.eventDetectType),this.theme=d.series.boxPlot,this.rect=s.plot,this.activeSeriesMap=hn(r),this.selectable=this.getSelectableOption(l);const c=e.categories,{tickDistance:h}=n.xAxis,{min:u,max:p}=a.yAxis.limit,m=o.boxPlot.data,g=m.length,v=Object.assign({ratio:this.rect.height/(p-u),tickDistance:h},this.getBarWidths(h,g)),f=this.makeBoxPlots(m,v),b=this.renderSeriesModels(f);this.models=b,this.drawModels||(this.drawModels={rect:b.rect.map((e=>Object.assign(Object.assign({},e),{y:e.y+e.height,height:0}))),line:b.line,circle:b.circle});const x=this.makeTooltipModel(m,c);this.tooltipRectMap=this.makeTooltipRectMap(f,x),this.responders="grouped"===this.eventDetectType?this.makeGroupedResponderModel(f):this.makeDefaultResponderModel(f,x)}makeTooltipRectMap(e,t){const i={};return e.forEach(((e,s)=>{if(!x(e)){const n=`${e.name}-${e.index}`;i[n]||(i[n]=[]),i[n].push(Object.assign(Object.assign({},this.makeHoveredModel(e)),{data:t[s]}))}})),i}makeGroupedResponderModel(e){const t=[];return e.forEach((e=>{const{type:i,index:s,name:n}=e,o=`${n}-${s}`;if("boxPlot"===i&&!t[o]){const{boxPlotDetection:i}=e;t.push(Object.assign(Object.assign({type:"rect",name:o},i),{y:0,height:this.rect.height}))}})),t}makeDefaultResponderModel(e,t){return e.map(((e,i)=>Object.assign(Object.assign({},this.makeHoveredModel(e)),{data:t[i],color:Me(e.color,1)})))}makeHoveredModel(e){const t="boxPlot"===e.type&&e.rect?{x:e.rect.x,y:e.rect.y}:{x:e.x,y:e.y},i=Object.assign({},e);return"boxPlot"===e.type&&(["lowerWhisker","upperWhisker","maximum","minimum","median"].forEach((t=>{e[t]&&(e[t].detectionSize=3)})),e.color=Me(i.color,1)),Object.assign(Object.assign({},i),t)}getResponderModelFromMap(e){if(!e.length)return[];const t=e[0].name;return this.tooltipRectMap[t]}onMousemove({responders:e}){if("grouped"===this.eventDetectType){const t=this.getResponderModelFromMap(e);this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(t,"select"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}else this.eventBus.emit("renderHoveredSeries",{models:this.getRespondersWithTheme(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=e;this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}onClick({responders:e}){if(this.selectable){let t;t="grouped"===this.eventDetectType?this.getRespondersWithTheme(this.getResponderModelFromMap(e),"select"):this.getRespondersWithTheme(e,"select"),this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}renderSeriesModels(e){return e.reduce(((e,t)=>{const{type:i,name:s}=t;return"boxPlot"===i?(e.rect.push(Object.assign({name:s},t.rect)),["maximum","minimum","median","upperWhisker","lowerWhisker"].forEach((i=>{e.line.push(Object.assign({name:s},t[i]))}))):e.circle.push(Object.assign({},t)),e}),{rect:[],line:[],circle:[]})}makeBoxPlots(e,t){const{ratio:i,barWidth:s}=t,n=[],o=e.length,{dot:a}=this.theme;return e.forEach((({outliers:e,data:r,name:l,color:d},c)=>{const h=this.getSeriesColor(l,d);(null!=r?r:[]).forEach(((e,i)=>{if(!x(e)){const a=this.getStartX(c,i,t,o),r=this.getRect(e,a,h,t);n.push(Object.assign(Object.assign({type:"boxPlot",color:h,name:l,rect:r,median:this.getMedian(e,a,h,t),minimum:this.getMinimum(e,a,h,t),maximum:this.getMaximum(e,a,h,t)},this.getWhisker(e,a,h,t,r)),{index:i,boxPlotDetection:{x:a,width:s}}))}}));const{color:u,radius:p,borderColor:m,borderWidth:g,useSeriesColor:v}=a;(null!=e?e:[]).forEach((e=>{const[a,r]=e,d=this.getStartX(c,a,t,o);n.push({type:"circle",name:l,x:d+s/2,y:this.getYPos(r,i),radius:p,style:[{strokeStyle:null!=m?m:h,lineWidth:g}],color:v?h:u,index:a})}))})),n}makeTooltipModel(e,t){const i=[];return e.forEach((({outliers:e,data:s,name:n,color:o})=>{(null!=s?s:[]).forEach(((e,s)=>{if(!x(e)){const a=[...e].reverse();i.push({label:n,color:o,value:["Maximum","Upper Quartile","Median","Lower Quartile","Minimum"].reduce(((e,t,i)=>{const s=a[i];return x(s)?e:[...e,{title:t,value:s}]}),[]),category:t[s],templateType:"boxPlot"})}})),(null!=e?e:[]).forEach((e=>{if(!x(e)){const[s,a]=e;i.push({label:n,color:o,value:[{title:"Outlier",value:a}],category:t[s],templateType:"boxPlot"})}}))})),i}getStartX(e,t,i,s){const{tickDistance:n,barWidth:o}=i,a=function(e,t,i){return(e-t*i)/(i+1)}(n,o,s);return t*n+(e+1)*a+o*e}getYPos(e,t,i){return S(i)?Mt(this.rect.height-e*t,i):this.rect.height-e*t}getBarWidths(e,t){const{barWidth:i,barWidthRatios:s}=this.theme,{barRatio:n,minMaxBarRatio:o}=s,a=Math.max((e-Be(e)*(t-1+2))/t,5),r=i?$(e/t,i):a;return{barWidth:r*n,minMaxBarWidth:r*o}}getRespondersWithTheme(e,t){const{color:i,rect:s,dot:n,line:o,shadowColor:a,shadowOffsetX:r,shadowOffsetY:l,shadowBlur:d}=this.theme[t],{whisker:c,median:h,maximum:u,minimum:p}=o,{color:m,radius:g,borderColor:v,borderWidth:f,useSeriesColor:b}=n;return e.map((e=>{const{type:t,data:n}=e;let o,x=e.color;if("circle"===t)x=n.color,o=Object.assign(Object.assign({},e),{radius:g,color:b?x:m,style:[{strokeStyle:Or(x,v),lineWidth:f}]});else{const{rect:t,upperWhisker:n,lowerWhisker:m,median:g,maximum:v,minimum:f}=e;o=Object.assign(Object.assign({},e),{rect:Object.assign(Object.assign({},t),{color:null!=i?i:Me(x,1),thickness:s.borderWidth,borderColor:s.borderColor,style:[{shadowColor:a,shadowOffsetX:r,shadowOffsetY:l,shadowBlur:d}]}),upperWhisker:Object.assign(Object.assign({},n),{strokeStyle:Or(x,c.color),lineWidth:c.lineWidth}),lowerWhisker:Object.assign(Object.assign({},m),{strokeStyle:Or(x,c.color),lineWidth:c.lineWidth}),median:Object.assign(Object.assign({},g),{strokeStyle:Or(x,h.color),lineWidth:h.lineWidth}),maximum:Object.assign(Object.assign({},v),{strokeStyle:Or(x,u.color),lineWidth:u.lineWidth}),minimum:Object.assign(Object.assign({},f),{strokeStyle:Or(x,p.color),lineWidth:p.lineWidth})})}return o}))}getRect(e,t,i,{barWidth:s,ratio:n}){const{rect:o}=this.theme,[,a,,r]=e;return{type:"rect",x:t,y:this.getYPos(r,n),width:s,height:(r-a)*n,thickness:o.borderWidth,borderColor:o.borderColor,color:i}}getWhisker(e,t,i,{barWidth:s,ratio:n},o){const[a,,,,r]=e,{lineWidth:l,color:d}=this.theme.line.whisker,c=Mt(t+s/2,l);return{upperWhisker:{type:"line",x:c,y:this.getYPos(r,n,l),x2:c,y2:o.y,strokeStyle:null!=d?d:i,lineWidth:l},lowerWhisker:{type:"line",x:c,y:this.getYPos(a,n,l),x2:c,y2:Mt(o.y+o.height,l),strokeStyle:null!=d?d:i,lineWidth:l}}}getMedian(e,t,i,{barWidth:s,ratio:n}){const o=e[2],{lineWidth:a,color:r}=this.theme.line.median;return{type:"line",x:Mt(t,a),y:this.getYPos(o,n,a),x2:Mt(t+s,a),y2:this.getYPos(o,n,a),strokeStyle:null!=r?r:i,lineWidth:a}}getMinimum(e,t,i,{barWidth:s,ratio:n,minMaxBarWidth:o}){const a=e[0],{lineWidth:r,color:l}=this.theme.line.minimum;return{type:"line",x:Mt(t+(s-o)/2,r),y:this.getYPos(a,n,r),x2:Mt(t+(s-o)/2+o,r),y2:this.getYPos(a,n,r),strokeStyle:null!=l?l:i,lineWidth:r}}getMaximum(e,t,i,{barWidth:s,ratio:n,minMaxBarWidth:o}){const a=e[4],{lineWidth:r,color:l}=this.theme.line.maximum;return{type:"line",x:Mt(t+(s-o)/2,r),y:this.getYPos(a,n,r),x2:Mt(t+(s-o)/2+o,r),y2:this.getYPos(a,n,r),strokeStyle:null!=l?l:i,lineWidth:r}}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e],o=Object.values(this.activeSeriesMap).some((e=>!e)),a=n?i.areaOpacity:i.restSeries.areaOpacity;return Me(t,o?a:s)}}function kr(e,t){const{rect:i,upperWhisker:s,lowerWhisker:n,median:o,minimum:a,maximum:r}=t;a&&at(e,Object.assign({type:"line"},a)),n&&at(e,Object.assign({type:"line"},n)),i&&rt(e,Object.assign({type:"rect"},i)),s&&at(e,Object.assign({type:"line"},s)),r&&at(e,Object.assign({type:"line"},r)),o&&at(e,Object.assign({type:"line"},o))}class Cr extends En{constructor({el:e,options:t,data:{series:i,categories:s}}){super({el:e,options:t,series:{boxPlot:i},categories:s,modules:[Yn,lo,Ii,po]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(Co),this.componentManager.add($o),this.componentManager.add(Ar),this.componentManager.add(Lt,{name:"yAxis"}),this.componentManager.add(Lt,{name:"xAxis"}),this.componentManager.add(_o,{name:"xAxis"}),this.componentManager.add(_o,{name:"yAxis"}),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,i,g,d,e,h])}addData(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addData",{data:e,category:t})}addOutlier(e,t){this.animationControlFlag.updating=!0,this.resetSeries(),this.store.dispatch("addOutlier",{seriesIndex:e,outliers:t})}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{boxPlot:i},categories:t})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}class Tr extends jt{constructor(){super(...arguments),this.models={},this.activatedResponders=[],this.eventDetectType="point",this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{var t;const{index:i,seriesIndex:s}=e;if(!S(i)||"grouped"!==this.eventDetectType&&!S(s))return;const n="grouped"===this.eventDetectType?[...this.getGroupedSector([this.responders[i]],"select"),...this.getRadialBarSectorModelsFromResponders([this.responders[i]])]:null!=(t=this.getResponderModelsWithTheme([this.tooltipSectorMap[i][s]],"select"))?t:[];if(!n.length)throw new Error(U);this.eventBus.emit("renderSelectedSeries",{models:n,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t,seriesIndex:i}=e;if(!ln(e,this.eventDetectType,"radialBar"))return;const s="grouped"===this.eventDetectType?this.getGroupedSector([this.responders[t]],"hover"):this.getResponderModelsWithTheme([this.tooltipSectorMap[t][i]],"hover");s.length&&(this.eventBus.emit("renderHoveredSeries",{models:s,name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders="grouped"===this.eventDetectType?this.tooltipSectorMap[t]:s,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initUpdate(e){if(!this.drawModels)return;const{angle:{start:t,total:i}}=this.circularAxis;let s;Object.keys(this.models).forEach((n=>{const o=this.models[n].findIndex((({clockwise:n,degree:{start:o,end:a}})=>(s=n?t+i*e:t-i*e,Ze(n,o,a,s))));this.syncEndAngle(o<0?this.models[n].length:o,n),-1!==o&&(this.drawModels[n][o].degree.end=s)}))}syncEndAngle(e,t){if(!(e<1))for(let i=0;i<e;i+=1){const e=this.models[t][i].degree.end;this.drawModels[t][i].degree.end!==e&&(this.drawModels[t][i].degree.end=e)}}initialize(){this.type="series",this.name="radialBar",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}render(e){var t,i;const{layout:s,series:n,legend:o,options:a,theme:r,stackSeries:l,scale:d,radialAxes:c}=e,h=null!=(t=e.categories)?t:[];if(!n.radialBar||!l.radialBar)throw new Error(Z(this.name));this.theme=r.series.radialBar,this.rect=s.plot,this.activeSeriesMap=hn(o),this.selectable=this.getSelectableOption(a),this.setEventDetectType(a);const u=h.reduce(((e,t)=>(e[t]||(e[t]=[]),e)),{}),p=n.radialBar.data;this.circularAxis=c.circularAxis;const m=c.verticalAxis,g=this.makeRenderOptions(m,d.circularAxis,null===(i=a)||void 0===i?void 0:i.series),{categoryMap:v,seriesModels:f}=this.makeSeriesModelData(p,l.radialBar.stackData,g,u),b=this.makeTooltipData(f,h);if(this.models=v,this.drawModels||this.initDrawModels(v),Io(a,this.name).visible){const e=f.reduce(((e,t)=>[...e,Object.assign(Object.assign({},t),{type:"sector",theme:this.theme.dataLabels})]),[]);this.renderDataLabels(e)}this.tooltipSectorMap=this.makeTooltipSectorMap(f,b),this.responders=this.makeResponders(m.radius.ranges,f,g,h,b)}initDrawModels(e){this.drawModels={},Object.keys(e).forEach((t=>{this.drawModels[t]=e[t].map((e=>Object.assign(Object.assign({},e),{degree:Object.assign(Object.assign({},e.degree),{end:e.degree.start})})))}))}makeResponders(e,t,i,s,n){return"grouped"===this.eventDetectType?function(e,t,i){const{centerX:s,centerY:n,angleRange:{start:o,end:a},clockwise:r}=t;return Qe(e,0).map(((e,t)=>({type:"sector",x:s,y:n,degree:{start:o,end:a},radius:e,name:i[t],clockwise:r,index:t})))}(e,i,s):t.map(((e,t)=>Object.assign(Object.assign({},e),{data:Object.assign({},n[t])})))}makeTooltipSectorMap(e,t){return e.reduce(((e,i,s)=>{const n=i.index;return e[n]||(e[n]=[]),e[n].push(Object.assign(Object.assign({},i),{data:Object.assign({},t[s])})),e}),{})}setEventDetectType(e){var t,i;(null===(i=null===(t=e)||void 0===t?void 0:t.series)||void 0===i?void 0:i.eventDetectType)&&(this.eventDetectType=e.series.eventDetectType)}getBarWidth(e,t){const{barWidth:i}=this.theme;return i?Math.min(e,$(t,i)):e-10}makeRenderOptions({axisSize:e,centerX:t,centerY:i,tickDistance:s,radius:{ranges:n},angle:{start:o,end:a}},r,l){var d,c;const{limit:{max:h},stepSize:u}=r,p=null==(c=null===(d=l)||void 0===d?void 0:d.clockwise)||c,m=Ft(p,o,a),g=this.getBarWidth(s,e),v=h+(m<Fe?0:u);return{clockwise:p,centerX:t,centerY:i,radiusRanges:Qe(n,(s-g)/2),angleRange:{start:o,end:a},totalAngle:m,scaleMaxLimitValue:v,startAngle:o}}makeSeriesModelData(e,t,i,s){const{clockwise:n,centerX:o,centerY:a,radiusRanges:r,totalAngle:l,scaleMaxLimitValue:d,startAngle:c}=i,h=c,{lineWidth:u,strokeStyle:p}=this.theme,m=[],g=Object.keys(s),v=E(s);return t.forEach((({values:t},i)=>{const{inner:s,outer:c}=r[i];t.forEach(((t,r)=>{if(!x(t)){const f=Math.max(t/d*l,1)*(n?1:-1),b=m[m.length-1],x=r&&b?b.degree.end:h,y=n?Math.min(x+f,Fe):Math.max(x+f,0),{name:S,color:w}=e[r],M={type:"sector",name:S,color:this.getSeriesColor(S,w),x:o,y:a,degree:{start:x,end:y},radius:{inner:s,outer:c},value:t,style:[{strokeStyle:p}],lineWidth:u,clockwise:n,totalAngle:l,seriesColor:w,seriesIndex:r,index:i,drawingStartAngle:$e};v[g[i]].push(M),m.push(M)}}))})),{seriesModels:m,categoryMap:v}}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return Me(t,Object.values(this.activeSeriesMap).some((e=>!e))?n?i.areaOpacity:i.restSeries.areaOpacity:s)}makeTooltipData(e,t){const i=[];return e.forEach((({seriesColor:e,name:s,value:n,index:o})=>{x(n)||i.push({label:s,color:e,value:n,category:S(o)?t[o]:""})})),i}makeTooltipResponder(e){const t=Object.keys(this.models);return e.map((e=>Object.assign(Object.assign({},e),Ue(Ve("center",this.models[t[e.index]].find((({name:t})=>t===e.name)))))))}getRadialBarSectorModelsFromResponders(e){var t;return e.length&&null!=(t=this.tooltipSectorMap[e[0].index])?t:[]}getGroupedSector(e,t){const i=this.getRadialBarSectorModelsFromResponders(e),{color:s,opacity:n}=this.theme[t].groupedSector;return i.length?e.map((e=>Object.assign(Object.assign({},e),{color:Me(s,n)}))):[]}onMousemoveGroupedType(e){const t=this.getRadialBarSectorModelsFromResponders(e);this.eventBus.emit("renderHoveredSeries",{models:this.getGroupedSector(e,"hover"),name:this.name,eventDetectType:this.eventDetectType}),this.activatedResponders=t}onMousemove({responders:e}){"grouped"===this.eventDetectType?this.onMousemoveGroupedType(e):(this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(e,"hover"),name:this.name}),this.activatedResponders=this.makeTooltipResponder(e)),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}onClick({responders:e}){if(this.selectable){let t;t="grouped"===this.eventDetectType?[...this.getGroupedSector(e,"select"),...this.getRadialBarSectorModelsFromResponders(e)]:this.getResponderModelsWithTheme(e,"select"),this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name,eventDetectType:this.eventDetectType}),this.eventBus.emit("needDraw")}}getResponderModelsWithTheme(e,t){const i=this.theme[t],s=i.lineWidth,n=this.theme.lineWidth===s?0:.5*s;return e.map((e=>{var t,o;return Object.assign(Object.assign({},e),{color:(o=null===(t=i)||void 0===t?void 0:t.color,null!=o?o:e.color),lineWidth:s,style:[R(i,"strokeStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY")],radius:{inner:Math.max(e.radius.inner-n,0),outer:e.radius.outer+n}})}))}}class Rr extends En{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{radialBar:i.series},categories:i.categories,modules:[oo,Yn,lo,si]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add($o),this.componentManager.add(cr),this.componentManager.add(Tr),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(hr),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,d,e,h,p,o,i])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{radialBar:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}}function Dr(e,t,i){var s,n,o;const a=null!=(o=null===(n=null===(s=e[i])||void 0===s?void 0:s.label)||void 0===n?void 0:n.formatter)?o:e=>e;return t.map(((e,s)=>a(e,{index:s,labels:t,axisName:i})))}const jr={name:"gaugeAxes",state:()=>({radialAxes:{circularAxis:{}}}),action:{setCircularAxisData({state:e}){var t,i,s,n,o,a,r,l,d,c,h,u,p;const{series:m,layout:g,scale:v}=e,f=e.categories,{plot:b}=g,x=ni({series:m,categories:f}),y=e.options,S=e.theme,w=Te(S.circularAxis.label),M=function(e){var t,i,s,n;return null!=(n=null===(s=null===(i=null===(t=e)||void 0===t?void 0:t.circularAxis)||void 0===i?void 0:i.label)||void 0===s?void 0:s.margin)?n:15}(y),A=function(e,t,i,s){const n=e?Jt.CIRCULAR:Jt.VERTICAL,{limit:o,stepSize:a}=s[n],r=Dr(t,St(o,a),n),l=Dr(t,i,e?Jt.VERTICAL:Jt.CIRCULAR);return e?r:l}(x,y,f,v),{maxLabelWidth:k,maxLabelHeight:C}=Mi(A,M,w),T=ki(y,b,k,C,x),R=mt(Te(S.series.gauge.dataLabels)),D=null!=(n=null===(s=null===(i=null===(t=y)||void 0===t?void 0:t.series)||void 0===i?void 0:i.dataLabels)||void 0===s?void 0:s.offsetY)?n:30;if(T.isSemiCircular){T.centerY=T.centerY-(D>0?D+R:0);const e=T.centerY-T.axisSize;T.axisSize+=e<0?e:0}const j=(null===(r=null===(a=null===(o=y)||void 0===o?void 0:o.plot)||void 0===a?void 0:a.bands)||void 0===r?void 0:r.length)?T.axisSize/2-10:0,B=null!=(c=null===(d=null===(l=S.plot)||void 0===l?void 0:l.bands)||void 0===d?void 0:d.barWidth)?c:j,L=function({labels:e,intervalData:t,circularAxisLabelMargin:i,circularAxisLabelFont:s,defaultAxisData:n,bandWidth:o,options:a,solidBarWidth:r}){var l,d,c,h;const{maxLabelWidth:u,maxLabelHeight:p}=Mi(e,i,s),{totalAngle:m,axisSize:g,centerX:v,centerY:f,startAngle:b,endAngle:x,drawingStartAngle:y,clockwise:S}=n,{tickInterval:w,labelInterval:M}=t,A=g-o-10,k=function(e,t,i){const s=null!=i&&i,n=$(e,t),o={visible:!0,radiusRange:{inner:e-n,outer:e},barWidth:n,clockHand:!1};return s?O(s)?Object.assign(Object.assign({},o),s):o:Object.assign(Object.assign({},o),{visible:!1})}(A-i-p-(i-5),null!=r?r:.1*A,null===(d=null===(l=a)||void 0===l?void 0:l.series)||void 0===d?void 0:d.solid);return{axisSize:g,centerX:v,centerY:f,label:{labels:e,interval:M,margin:i,maxWidth:u,maxHeight:p},radius:{inner:0,outer:A},angle:{start:b,end:x,total:m,central:m/(e.length+(m<Fe?-1:0)),drawingStart:y},band:{width:o,margin:10},tickInterval:w,clockwise:S,maxClockHandSize:A-i-p-10+(k.visible?-k.barWidth-10:0),title:xi(null===(h=null===(c=a)||void 0===c?void 0:c.circularAxis)||void 0===h?void 0:h.title),solidData:k}}({labels:A,intervalData:Ai(!0,{axis:y.circularAxis,categories:f,layout:g}),defaultAxisData:T,circularAxisLabelMargin:M,circularAxisLabelFont:w,bandWidth:B,options:y,solidBarWidth:null===(u=null===(h=S.series.gauge)||void 0===h?void 0:h.solid)||void 0===u?void 0:u.barWidth});(function(e,t){var i,s,n,o;const a=null===(s=null===(i=e)||void 0===i?void 0:i.label)||void 0===s?void 0:s.maxWidth,r=null===(o=null===(n=e)||void 0===n?void 0:n.label)||void 0===o?void 0:o.maxHeight,l=t.label.maxWidth;return r!==t.label.maxHeight||a!==l})(null===(p=e.radialAxes)||void 0===p?void 0:p.circularAxis,L)&&this.notify(e,"layout"),e.radialAxes={circularAxis:L}},addGaugePlotBand({state:e},{data:t}){var i,s,n;const o=null!=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands)?n:[];co(o,t)||this.dispatch("updateOptions",{options:{plot:{bands:[...o,t]}}})},removeGaugePlotBand({state:e},{id:t}){var i,s,n;const o=(n=null===(s=null===(i=e.options)||void 0===i?void 0:i.plot)||void 0===s?void 0:s.bands,null!=n?n:[]).filter((({id:e})=>e!==t));this.dispatch("updateOptions",{options:{plot:{bands:o}}})}},observe:{updateRadialAxes(){this.dispatch("setCircularAxisData")}}},Br=jr;class Lr extends jt{constructor(){super(...arguments),this.models={clockHand:[],solid:[],backgroundSolid:[]},this.activatedResponders=[],this.onMouseoutComponent=()=>{this.eventBus.emit("seriesPointHovered",{models:[],name:this.name}),this.eventBus.emit("renderHoveredSeries",{models:[],name:this.name}),this.eventBus.emit("needDraw")},this.selectSeries=e=>{var t;const{index:i}=e;if(!S(i))return;const s=null!=(t=this.tooltipMap.clockHand[i])?t:this.tooltipMap.solid[i];if(!s)return;const n=this.getResponderModelsWithTheme(this.getResponderModels([s]),"select");if(!n.length)throw new Error(U);this.eventBus.emit("renderSelectedSeries",{models:n,name:this.name}),this.eventBus.emit("needDraw")},this.showTooltip=e=>{const{index:t}=e,i=this.getResponderModelsWithTheme([this.tooltipMap.clockHand[t]],"hover");i.length&&(this.eventBus.emit("renderHoveredSeries",{models:i,name:this.name}),this.activatedResponders=i,this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw"))}}initialize(){this.type="series",this.name="gauge",this.eventBus.on("selectSeries",this.selectSeries),this.eventBus.on("showTooltip",this.showTooltip),this.eventBus.on("hideTooltip",this.onMouseoutComponent)}initUpdate(e){if(!this.drawModels)return;const{angle:{start:t,total:i},clockwise:s}=this.circularAxis,n=s?t+i*e:t-i*e;this.models.clockHand.forEach(((e,t)=>{const{x:i,y:o,animationDegree:a,handSize:r}=e;if(s&&a<n||!s&&a>n)return void this.syncEndAngle(t);const{x:l,y:d}=qe(i,o,r,_e(et(n)));this.drawModels.clockHand[t].x2=l,this.drawModels.clockHand[t].y2=d})),this.models.solid.forEach((()=>{const e=this.models.solid.findIndex((({animationDegree:e})=>{const{start:t,end:i}=e;return Ze(s,t,i,n)}));this.syncSectorEndAngle(e<0?this.models.solid.length:e),-1!==e&&(this.drawModels.solid[e].degree.end=et(n))}))}updateModels(e,t,i){const{angle:{total:s}}=this.circularAxis;Object.keys(e).forEach((n=>{e&&t&&"_"!==n[0]&&(S(e[n])?e[n]=e[n]+(t[n]-e[n])*i:"degree"===n?s<Fe&&e.degree.end<Ge?e[n].end=Fe+e[n].end-(Fe-t[n].end+e[n].end)*i:e[n].end=e[n].end+(t[n].end-e[n].end)*i:e[n]=t[n])}))}update(e){this.models.clockHand.forEach(((t,i)=>{this.updateModels(this.drawModels.clockHand[i],t,e)})),this.models.solid.forEach(((t,i)=>{this.updateModels(this.drawModels.solid[i],t,e)}))}syncEndAngle(e){const t=this.models.clockHand[e],i=this.drawModels.clockHand[e];t.x2===i.x2&&t.y2===i.y2||(i.x2=t.x2,i.y2=t.y2)}syncSectorEndAngle(e){if(e)for(let t=0;t<e;t+=1){const e=this.models.solid[t].degree.end;this.drawModels.solid[t].degree.end!==e&&(this.drawModels.solid[t].degree.end=e)}}render(e){var t,i;const{layout:s,series:n,legend:o,options:a,theme:r,scale:l,radialAxes:d}=e,c=null!=(t=e.categories)?t:[];if(!n.gauge)throw new Error(Z(this.name));this.theme=r.series.gauge,this.rect=s.plot,this.circularAxis=d.circularAxis,this.activeSeriesMap=hn(o),this.selectable=this.getSelectableOption(a);const h=n.gauge.data,u=!ni({series:n,categories:c}),p=this.makeRenderOptions(u,c,l,null===(i=a)||void 0===i?void 0:i.series),m=this.renderClockHands(h,p);this.models.clockHand=p.useClockHand?m:[];const g=this.renderSolidModels(h,m,p),v=this.makeTooltipData(m);if(this.drawModels||this.initDrawModels(),Io(a,this.name).visible){const{value:e,name:t,x:i,y:s,seriesData:n}=m[0];this.renderDataLabels([{type:"point",theme:this.theme.dataLabels,value:e,name:t,x:i,y:s+30,data:n}])}this.tooltipMap=this.makeTooltipMap(v,p),this.responders=this.getResponders(m,g,v,p.useClockHand)}renderSolidModels(e,t,i){let s=[];return this.models.clockHand=i.useClockHand?t:[],i.solidData.visible&&(s=this.renderSectors(e,i),this.models.backgroundSolid=this.renderBackgroundSolid(i),this.models.solid=s),s}initDrawModels(){const{angle:{start:e}}=this.circularAxis;this.drawModels={clockHand:this.models.clockHand.map((t=>{const{x:i,y:s}=qe(t.x,t.y,t.handSize,_e(e));return Object.assign(Object.assign({},t),{x2:i,y2:s,testDegree:0})})),backgroundSolid:this.models.backgroundSolid,solid:this.models.solid.map((e=>Object.assign(Object.assign({},e),{degree:Object.assign(Object.assign({},e.degree),{end:e.degree.start})})))}}getResponders(e,t,i,s=!0){const n=s?e.map(((e,t)=>Object.assign(Object.assign({},e),{detectionSize:e.baseLine+3,data:Object.assign({},i[t])}))):[];return t.length?[...t.map(((e,t)=>Object.assign(Object.assign({},e),{data:Object.assign({},i[t])}))),...n]:n}getHandSize(e,t=0){const i=this.circularAxis.maxClockHandSize;return e?Array.isArray(e)?$(i,e[t]):$(i,e):i}renderClockHands(e,t){const{centerX:i,centerY:s,totalAngle:n,clockwise:o,scaleMaxLimitValue:a,categories:r,drawingStartAngle:l}=t,d=[],{size:c,baseLine:h,color:u}=this.theme.clockHand,{radius:p,color:m,borderWidth:g,borderColor:v}=this.theme.pin;return e.forEach((({name:e,data:t,color:f},b)=>{const x=this.getSeriesColor(e,f);t.forEach(((f,y)=>{const S=w(f)?r.findIndex((e=>e===f)):f,M=l+S/a*n*(o?1:-1),O=et(M),A=this.getHandSize(c,y),{x:k,y:C}=qe(i,s,A,_e(O));d.push({type:"clockHand",color:null!=u?u:x,name:e,value:f,x:i,y:s,x2:k,y2:C,pin:{radius:p,color:null!=m?m:x,style:[{strokeStyle:null!=v?v:Me(x,.1),lineWidth:g?g+p:0}]},degree:O,animationDegree:M,baseLine:h,handSize:A,seriesData:t,index:y,seriesIndex:b})}))})),d}renderBackgroundSolid(e){const{centerX:t,centerY:i,startAngle:s,totalAngle:n,clockwise:o,solidData:a}=e,{color:r}=this.theme.solid.backgroundSolid;return[{type:"sector",color:r,x:t,y:i,clockwise:o,degree:{start:s,end:s+n},radius:a.radiusRange}]}renderSectors(e,t){const i=[],{centerX:s,centerY:n,clockwise:o,totalAngle:a,scaleMaxLimitValue:r,startAngle:l,categories:d,solidData:c}=t,{radiusRange:h}=c,{lineWidth:u,strokeStyle:p}=this.theme.solid;return e.forEach((({name:e,data:t,color:c},m)=>{const g=this.getSeriesColor(e,c),v=t[0],f=w(v)?d.findIndex((e=>e===v)):v,b=f/r*a*(o?1:-1),x=et(b),y=l,S=y+b,M=l,O=M+x;i.push({type:"sector",color:g,x:s,y:n,clockwise:o,degree:{start:y,end:S},radius:h,animationDegree:{start:M,end:O},drawingStartAngle:$e,style:[{strokeStyle:p}],lineWidth:u,index:m})})),i}makeTooltipMap(e,t){const{clockHand:i,solid:s}=this.models,{useClockHand:n}=t;return e.reduce(((e,t,o)=>(n&&e.clockHand.push(Object.assign(Object.assign({},i[o]),{detectionSize:i[o].baseLine+3,data:t})),s[o]&&e.solid.push(Object.assign(Object.assign({},s[o]),{data:t})),e)),{solid:[],clockHand:[]})}makeRenderOptions(e,t,i,s){var n,o;const{centerX:a,centerY:r,solidData:l,angle:{start:d,end:c,drawingStart:h},radius:{outer:u}}=this.circularAxis,p=this.circularAxis.solidData,m=null==(o=null===(n=s)||void 0===n?void 0:n.clockwise)||o,g=Ft(m,d,c);return{clockwise:m,centerX:a,centerY:r,angleRange:{start:d,end:c},totalAngle:g,scaleMaxLimitValue:e?t.length:lr(i.circularAxis,g),startAngle:d,categories:t,drawingStartAngle:h,outerRadius:u,useClockHand:!p.visible||p.clockHand,solidData:l}}getSeriesColor(e,t){const{select:i,areaOpacity:s}=this.theme,n=this.activeSeriesMap[e];return Me(t,Object.values(this.activeSeriesMap).some((e=>!e))?n?i.areaOpacity:i.restSeries.areaOpacity:s)}makeTooltipData(e){return e.reduce(((e,{color:t,name:i,value:s,index:n,seriesIndex:o})=>x(s)?e:[...e,{label:i,color:t,value:s,index:n,seriesIndex:o}]),[])}onMousemove({responders:e}){this.eventBus.emit("renderHoveredSeries",{models:this.getResponderModelsWithTheme(this.getResponderModels(e),"hover"),name:this.name}),this.activatedResponders=e.map((e=>Object.assign({},e))),this.eventBus.emit("seriesPointHovered",{models:this.activatedResponders,name:this.name}),this.eventBus.emit("needDraw")}getResponderModels(e){const{clockHand:t,solid:i}=this.tooltipMap;return e.reduce(((e,s)=>{const n=s.index;return[...e,...t[n]?[t[n]]:[],...i[n]?[i[n]]:[]]}),[])}onClick({responders:e}){if(this.selectable){const t=this.getResponderModelsWithTheme(this.getResponderModels(e),"select");this.eventBus.emit("renderSelectedSeries",{models:t,name:this.name}),this.eventBus.emit("needDraw")}}getResponderModelsWithSolidTheme(e,t){var i;const s=this.theme[t].solid,n=s.lineWidth,o=this.theme.solid===n?0:.5*n;return Object.assign(Object.assign({},e),{color:(i=s.color,null!=i?i:e.color),lineWidth:n,style:[R(s,"strokeStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY")],radius:{inner:Math.max(e.radius.inner-o,0),outer:e.radius.outer+o}})}getResponderWithClockHandTheme(e,t){const{clockHand:i,pin:s}=this.theme[t],{size:n,baseLine:o,color:a}=i,{radius:r,color:l,borderWidth:d,borderColor:c}=s,h=null!=r?r:e.pin.radius,u=[{strokeStyle:null!=c?c:Me(e.pin.style[0].strokeStyle,.3),lineWidth:d?d+h:0}];return Object.assign(Object.assign({},e),{color:null!=a?a:e.color,pin:{radius:h,color:null!=l?l:e.pin.color,style:u},baseLine:null!=o?o:e.baseLine,handSize:n?this.getHandSize(n,e.index):e.handSize})}getResponderModelsWithTheme(e,t){return e.map((e=>{var i;return"sector"===(null===(i=e)||void 0===i?void 0:i.type)?this.getResponderModelsWithSolidTheme(e,t):this.getResponderWithClockHandTheme(e,t)}))}}function Pr(e){const{x:t,y:i,x2:s,y2:n,degree:o,baseLine:a}=e,r=a/2;let l,d;return t===s?(l={x:t-r,y:i},d={x:t+r,y:i}):i===n?(l={x:t,y:i-r},d={x:t,y:i+r}):(l=qe(t,i,r,_e(et(o+Ge))),d=qe(t,i,r,_e(et(o-Ge)))),[l,{x:s,y:n},d]}function Er(e,t){const{color:i,x:s,y:n,pin:{color:o,radius:a,style:r}}=t;ot(e,{type:"circle",x:s,y:n,radius:a,color:o,style:r}),Es(e,{type:"polygon",color:i,lineWidth:1,fillColor:i,points:Pr(t)})}class Wr extends En{constructor({el:e,options:t,data:i}){super({el:e,options:t,series:{gauge:i.series},categories:i.categories,modules:[Yn,lo,Br]})}initialize(){super.initialize(),this.componentManager.add(ea),this.componentManager.add(Uo),this.componentManager.add(cr,{name:"gauge"}),this.componentManager.add(hr,{name:"gauge"}),this.componentManager.add(_o,{name:"circularAxis"}),this.componentManager.add(Lr),this.componentManager.add(Zo),this.componentManager.add(Qo),this.componentManager.add(Vo),this.componentManager.add(Zi,{chartEl:this.el}),this.componentManager.add(Oo,{chartEl:this.el}),this.componentManager.add(ta),this.painter.addGroups([t,d,e,h,p,o,i,v])}addSeries(e){this.resetSeries(),this.store.dispatch("addSeries",{data:e})}addData(e,t){this.resetSeries(),this.animationControlFlag.updating=!0,this.store.dispatch("addData",{data:e,category:t})}setData(e){const{categories:t,series:i}=e;this.resetSeries(),this.store.dispatch("setData",{series:{gauge:i},categories:t})}hideSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!1}}}})}showSeriesDataLabel(){this.store.dispatch("updateOptions",{options:{series:{dataLabels:{visible:!0}}}})}setOptions(e){this.resetSeries(),this.dispatchOptionsEvent("initOptions",e)}updateOptions(e){this.resetSeries(),this.dispatchOptionsEvent("updateOptions",e)}showTooltip(e){this.eventBus.emit("showTooltip",Object.assign(Object.assign({},e),{state:this.store.state}))}hideTooltip(){this.eventBus.emit("hideTooltip")}addPlotBand(e){this.store.dispatch("addGaugePlotBand",{data:e})}removePlotBand(e){this.store.dispatch("removeGaugePlotBand",{id:e})}}class zr{}zr.lineChart=e=>new ra(e),zr.areaChart=e=>new Da(e),zr.barChart=e=>new Xa(e),zr.boxPlotChart=e=>new Cr(e),zr.columnChart=e=>new Fa(e),zr.pieChart=e=>new ha(e),zr.heatmapChart=e=>new Ta(e),zr.bubbleChart=e=>new Za(e),zr.scatterChart=e=>new Ja(e),zr.bulletChart=e=>new ir(e),zr.radarChart=e=>new ur(e),zr.treemapChart=e=>new Mr(e),zr.nestedPieChart=e=>new ar(e),zr.lineAreaChart=e=>new La(e),zr.lineScatterChart=e=>new Ba(e),zr.columnLineChart=e=>new Ga(e),zr.radialBarChart=e=>new Rr(e),zr.gaugeChart=e=>new Wr(e);var Ir=s(3379),Yr=s.n(Ir),Hr=s(7795),Nr=s.n(Hr),Xr=s(569),Fr=s.n(Xr),$r=s(3565),Gr=s.n($r),Vr=s(9216),_r=s.n(Vr),Ur=s(4589),qr=s.n(Ur),Zr=s(8840),Kr={};Kr.styleTagTransform=qr(),Kr.setAttributes=Gr(),Kr.insert=Fr().bind(null,"head"),Kr.domAPI=Nr(),Kr.insertStyleElement=_r(),Yr()(Zr.Z,Kr),Zr.Z&&Zr.Z.locals&&Zr.Z.locals,HTMLWidgets.widget({name:"chart",type:"output",factory:function(e,t,i){var s;return{renderValue:function(t){var i=t.config.type,n=t.config.data,o=t.config.options;void 0!==s&&s.destroy(),s=zr[i]({el:e,data:n,options:o})},getWidget:function(){return s},resize:function(e,t){}}}})})(),n})()}));